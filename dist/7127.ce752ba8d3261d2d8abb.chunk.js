(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[7127],{517127:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var s=t(253772),i=t.n(s);const o=class{constructor(){let{drawIcons:e,getImageIdFromSymbolizer:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._parser=new(i()),this._drawIcons=e||(()=>Promise.resolve(null)),this._getImageIdFromSymbolizer=r||(e=>e.symbolizerId)}readStyle(e){return e?this._parser.readStyle(e):Promise.reject("No style provided")}writeStyle(e){var r=this;return e?this._drawIcons(e).then((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const s={...e,rules:(e?.rules||[]).map((e=>({...e,symbolizers:(e?.symbolizers||[]).map((e=>{if("Icon"===e.kind){const{image:s,width:i,height:o}=t.find((t=>{let{id:s}=t;return s===r._getImageIdFromSymbolizer(e)}))||{};if(s&&i&&o){const r=i>o?i:o,t=e.size/r;return{...e,size:t}}}return"Fill"===e.kind||"Mark"===e.kind?{...e,opacity:e.fillOpacity}:e}))})))};return r._parser.writeStyle(s)})):Promise.reject("No style provided")}}}}]);