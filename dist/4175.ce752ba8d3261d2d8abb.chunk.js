(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[4175],{608880:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var s=r(124852),i=r.n(s),a=r(45697),l=r.n(a),n=r(630998);function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends i().Component{constructor(){super(...arguments),u(this,"setLayer",(()=>{let e;this._layer&&this.cleanSupport(),this.props.map.eachLayer((t=>{t.layerId===this.props.layer&&(e=t)}),this),void 0!==e&&e.on("click",this.featureClicked,this),this._layer=e,this.highlightFeatures(this.props.features)})),u(this,"featureClicked",(e=>{let t=e.layer;if((e.originalEvent.ctrlKey||e.originalEvent.metaKey)&&t){let e=(0,n.findIndex)(this._selectedFeatures,(e=>e===t));-1!==e?(this._layer.resetStyle(t),this._selectedFeatures=this._selectedFeatures.filter(((t,r)=>r!==e)),t=null):this._selectedFeatures.push(t)}else this._selectedFeatures.map((e=>{this._layer.resetStyle(e)})),this._selectedFeatures=t?[t]:[];t&&(t.bringToFront(),t.setStyle(this.props.selectedStyle)),this.props.updateHighlighted(this._selectedFeatures.map((e=>e.msId)),"")})),u(this,"cleanSupport",(()=>{this._layer&&(this._selectedFeatures.map((e=>{this._layer.resetStyle(e)})),this._layer.off("click",this.featureClicked,this)),this._selectedFeatures=[],this._layer=null,this.props.updateHighlighted([],"")})),u(this,"highlightFeatures",(e=>{this._layer||this.setLayer(),this._selectedFeatures.map((e=>{this._layer.resetStyle(e)})),this._selectedFeatures=[],this._layer.eachLayer((t=>{-1!==e.indexOf(t.msId)&&(this._selectedFeatures.push(t),t.bringToFront(),t.setStyle(this.props.selectedStyle))}),this)}))}componentDidMount(){this._selectedFeatures=[],this._layer=null,"enabled"===this.props.status&&this.setLayer()}shouldComponentUpdate(e){let t=this.props;return e.status!==t.status||e.layer!==t.layer||"update"===e.status&&e.features.toString()!==t.features.toString()}UNSAFE_componentWillUpdate(e){switch(e.status){case"enabled":this.setLayer();break;case"disabled":this.cleanSupport();break;case"update":this.highlightFeatures(e.features);break;default:return}}componentWillUnmount(){this.cleanSupport()}render(){return null}}u(o,"propTypes",{map:l().object,layer:l().string,status:l().oneOf(["disabled","enabled","update"]),updateHighlighted:l().func,selectedStyle:l().object,features:l().array}),u(o,"contextTypes",{messages:l().object}),u(o,"defaultProps",{status:"disabled",updateHighlighted:()=>{},selectedStyle:{radius:12,weight:4,opacity:1,fillOpacity:1,color:"yellow",fillColor:"red"},features:[]});const h=o},692621:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});const s={LMap:r(728589).Z,Layer:r(580537).Z,Feature:r(574198).Z,Overview:r(397969),ScaleBar:r(982935),DrawSupport:r(221389).Z,HighlightFeatureSupport:r(608880).Z,PopupSupport:r(795141).Z}},23279:(e,t,r)=>{var s=r(513218),i=r(707771),a=r(14841),l=Math.max,n=Math.min;e.exports=function(e,t,r){var u,o,h,p,c,d,f=0,y=!1,m=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var r=u,s=o;return u=o=void 0,f=t,p=e.apply(s,r)}function _(e){var r=e-d;return void 0===d||r>=t||r<0||m&&e-f>=h}function b(){var e=i();if(_(e))return S(e);c=setTimeout(b,function(e){var r=t-(e-d);return m?n(r,h-(e-f)):r}(e))}function S(e){return c=void 0,g&&u?v(e):(u=o=void 0,p)}function F(){var e=i(),r=_(e);if(u=arguments,o=this,d=e,r){if(void 0===c)return function(e){return f=e,c=setTimeout(b,t),y?v(e):p}(d);if(m)return clearTimeout(c),c=setTimeout(b,t),v(d)}return void 0===c&&(c=setTimeout(b,t)),p}return t=a(t)||0,s(r)&&(y=!!r.leading,h=(m="maxWait"in r)?l(a(r.maxWait)||0,t):h,g="trailing"in r?!!r.trailing:g),F.cancel=function(){void 0!==c&&clearTimeout(c),f=0,u=d=o=c=void 0},F.flush=function(){return void 0===c?p:S(i())},F}},707771:(e,t,r)=>{var s=r(555639);e.exports=function(){return s.Date.now()}}}]);