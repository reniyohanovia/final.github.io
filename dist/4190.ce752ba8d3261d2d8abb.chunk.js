(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[4190],{940711:(e,t,r)=>{"use strict";r.d(t,{b:()=>p});var n=r(727418),a=r.n(n);var o=r(348660),s=r(487758);const i=e=>{let{searchText:t,staticFilter:r,blacklist:n,item:a,queriableAttributes:s,predicate:i}=e;const l=(0,o.generateTemplateString)(r||"")(a);let u,p=t.split(" ").filter((e=>e)).filter((e=>n.indexOf(e.toLowerCase())<0));return 0===p.length&&(p=t?[t]:[]),p.length>0&&(u="(".concat(p.map((e=>s.map((t=>`${t} ${i} '%${e.replace("'","''")}%'`)).join(" OR "))).join(") AND (")).concat(")")),u=u?u.concat(l):l||null,u};let l={nominatim:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return r(61427).Z.geocode(e,t).then((e=>{return t.returnFullData?e:null===(r=e.data)?[]:r.map((e=>({properties:{...e},id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((e=>parseFloat(e))).reduce(((e,t,r)=>(e[(e=>{switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}})(r)]=t,e)),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}})));var r}))},wfs:(e,t)=>{let{url:r,typeName:n,queriableAttributes:o=[],outputFormat:l="application/json",predicate:u="ILIKE",staticFilter:p="",blacklist:c=[],item:d,fromTextToFilter:h=i,returnFullData:g=!1,...m}=t;const f=h({searchText:e,staticFilter:p,blacklist:c,item:d,queriableAttributes:o,predicate:u});return s.DH(r,a()({maxFeatures:10,typeName:n,outputFormat:l,cql_filter:f},m)).then((e=>g?e:e.features))}};const u={setService:(e,t)=>{l[e]=t},getService:e=>l[e]?l[e]:null},p={Services:l,Utils:u}},664190:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>pe});var n=r(45697),a=r.n(n),o=r(124852),s=r.n(o),i=r(112008),l=r(496259),u=r(626824),p=r(867076),c=r(49977),d=r.n(c);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}const g=(0,p.branch)((e=>{let{virtualScroll:t}=e;return t}),(0,p.compose)((0,p.mapPropsStream)((e=>{const{handler:t,stream:r}=(0,p.createEventHandler)();return e.combineLatest(r.throttle((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return d().Observable.timer(e)})).scan((e=>e+1),0).map((e=>({scrollToTopCounter:e}))).startWith({}),((e,r)=>({...e,...r,scrollToTop:t})))})),(0,p.withHandlers)({onGridSort:e=>{let{onGridSort:t=(()=>{}),scrollToTop:r=(()=>{})}=e;return function(){return r(0),t(...arguments)}},onAddFilter:e=>{let{onAddFilter:t=(()=>{}),scrollToTop:r=(()=>{})}=e;return function(){r(1e3),t(...arguments)}}})))(u.Z);var m=r(414293),f=r.n(m),y=r(630294),v=r(401811),b=r(56784),w=r.n(b),P=r(509978),T=r(940721),x=r(825079),F=r(556382),O=r(234228),S=r(208232);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(this,arguments)}function C(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class j extends T.Z{constructor(e){super(e),this.validate=e=>{try{return this.props.isValid(e[this.props.column&&this.props.column.key])}catch(e){return!1}},this.getValue=()=>super.getValue()}render(){return s().createElement(S.Q,E({},this.props,{url:O.ZP.getParsedUrl(this.props.url,{outputFormat:"json"}),filter:"contains",autocompleteStreamFactory:F.Vd}))}}C(j,"propTypes",{column:a().object,dataType:a().string,inputProps:a().object,isValid:a().func,onBlur:a().func,autocompleteStreamFactory:a().func,url:a().string,typeName:a().string,value:a().string}),C(j,"defaultProps",{isValid:()=>!0,dataType:"string"});const D=j;var V=r(703476),N=r(390136);function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R.apply(this,arguments)}function I(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const k=(0,r(63528).Z)({dateProp:"value",dateTypeProp:"dataType",setDateProp:"onChange"})(N.Z);class L extends T.Z{constructor(){super(),I(this,"onChange",(e=>{this.date=e})),I(this,"getValue",(()=>({[this.props.column.key]:this.date}))),this.state={date:null}}componentDidMount(){this.date=this.props.value,this.props.onTemporaryChanges?.(!0)}componentWillUnmount(){this.props.onTemporaryChanges?.(!1)}render(){const{dataType:e,calendar:t,time:r}=this.props,{value:n}=this.props;return s().createElement(k,R({},this.props,{type:e,defaultValue:n,value:n,onChange:this.onChange,calendar:t,time:r,options:{shouldCalendarSetHours:!1},format:i.fK[e]}))}}I(L,"propTypes",{value:a().string,inputProps:a().object,dataType:a().string,minValue:a().number,maxValue:a().number,column:a().object,onTemporaryChanges:a().func,calendar:a().bool,time:a().bool,onChange:a().func,onBlur:a().func}),I(L,"contextTypes",{locale:a().string}),I(L,"defaultProps",{dataType:"date-time",column:{},calendar:!0,time:!1,onChange:()=>{},onBlur:()=>{}});const Z=L;function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(this,arguments)}const M={defaultEditor:e=>s().createElement(T.Z,e),int:e=>s().createElement(x.Z,A({dataType:"int",inputProps:{step:1,type:"number"}},e)),number:e=>s().createElement(x.Z,A({dataType:"number",inputProps:{step:1,type:"number"}},e)),string:e=>e.autocompleteEnabled?s().createElement(D,A({dataType:"string"},e)):s().createElement(T.Z,A({dataType:"string"},e)),boolean:e=>s().createElement(V.Z,A({dataType:"string"},e,{value:e.value&&e.value.toString(),emptyValue:null,filter:!1,values:["true","false"]})),"date-time":e=>s().createElement(Z,A({dataType:"date-time",calendar:!0,time:!0,popupPosition:"top"},e)),date:e=>s().createElement(Z,A({dataType:"date",time:!1,calendar:!0,popupPosition:"top"},e)),time:e=>s().createElement(Z,A({dataType:"time",calendar:!1,time:!0,popupPosition:"top"},e))},U=(0,p.withState)("value","onValueChange",(e=>e.value));var H=r(544401),W=r(227361),q=r.n(W),G=r(659632),B=r.n(G),_=r(730381),$=r.n(_),z=r(913186);const K=(0,p.compose)((0,p.defaultProps)({sortable:!0,autocompleteEnabled:!1,initPlugin:()=>{},url:"",typeName:"",enableColumnFilters:!1,columns:[],features:[],newFeatures:[],select:[],changes:{},focusOnEdit:!1,editors:(e,t)=>M[e]?M[e](t):M.defaultEditor(t),dataStreamFactory:e=>{const{handler:t,stream:r}=(0,p.createEventHandler)();return(e=>e.distinctUntilChanged(((e,t)=>{let{features:r,pages:n,isFocused:a}=e,{features:o,pages:s,isFocused:i}=t;return r===o&&a===i&&n===s})).switchMap((e=>{let{size:t,pageEvents:r,isFocused:n,pages:a,pagination:o,vsOverScan:s=20,scrollDebounce:l=50,onGridScroll$:u}=e;return u.debounceTime(l).filter((()=>!n)).map((e=>{let{firstRowIdx:r,lastRowIdx:n}=e;const l=r-s<0?0:r-s,u=n+s>o.totalFeatures-1?o.totalFeatures-1:n+s,p=Math.floor(l/t),c=Math.floor(u/t);let d=!1;for(let e=p;e<=c&&!d;e++)-1===(0,i.t3)(e*t,a,t)&&(d=!0);return d&&{startPage:p,endPage:c}})).filter((e=>e)).do((e=>r.moreFeatures(e)))})))(e.filter((e=>{let{virtualScroll:t}=e;return t})).map((e=>({...e,onGridScroll$:r})))).startWith({}).map((e=>({...e,onGridScroll:t})))},virtualScroll:!0}),(0,p.withPropsOnChange)("showDragHandle",(function(){let{showDragHandle:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{className:e?"feature-grid-drag-handle-show":"feature-grid-drag-handle-hide"}})),(0,p.withPropsOnChange)(["enableColumnFilters"],(e=>({displayFilters:e.enableColumnFilters}))),(0,p.withPropsOnChange)(["editingAllowedRoles","virtualScroll"],(e=>({editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin}))),(0,p.withPropsOnChange)(["autocompleteEnabled"],(e=>({autocompleteEnabled:e.autocompleteEnabled}))),(0,p.withPropsOnChange)(["url"],(e=>({url:e.url}))),(0,p.withPropsOnChange)(["typeName"],(e=>({typeName:e.typeName}))),(0,p.withPropsOnChange)(["features","newFeatures","changes"],(e=>({rows:(e.newFeatures?[...e.newFeatures,...e.features]:e.features).filter(e.focusOnEdit?(0,i.ek)(e.changes&&Object.keys(e.changes).length>0,e.newFeatures,e.changes):()=>!0).map((t=>(0,i.Qc)(t,e.changes))).map((e=>({...e,"_!_id_!_":e.id,get:t=>"geometry"===t||"_new"===t?e[t]:e.properties&&e.properties[t]})))}))),(0,p.withPropsOnChange)(["newFeatures","changes","focusOnEdit"],(e=>({isFocused:e.focusOnEdit&&(e.changes&&Object.keys(e.changes).length>0||e.newFeatures&&e.newFeatures.length>0)}))),(0,p.withPropsOnChange)(["features","newFeatures","isFocused","virtualScroll","pagination"],(e=>({rowsCount:(e.isFocused||!e.virtualScroll)&&e.rows&&e.rows.length||e.pagination&&e.pagination.totalFeatures||0}))),(0,p.withHandlers)({rowGetter:e=>e.virtualScroll&&(t=>(0,i.WQ)(t,e.rows,e.pages,e.size))||(t=>(0,i.dM)(t,e.rows))}),(0,p.withPropsOnChange)(["describeFeatureType","columnSettings","tools","actionOpts","mode","isFocused","sortable"],(e=>{const t=function(){let{localType:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return e.filterRenderers&&e.filterRenderers[r]?e.filterRenderers[r]:U((0,H.Q)(t))},r={columns:(0,i.Sc)(e.tools,e.rowGetter,e.describeFeatureType,e.actionOpts,t).concat((0,i.AV)(e.describeFeatureType,e.columnSettings,{editable:"EDIT"===e.mode,sortable:e.sortable&&!e.isFocused,defaultSize:e.defaultSize,options:e.options?.propertyName},{getEditor:t=>{const r={onTemporaryChanges:e.gridEvents&&e.gridEvents.onTemporaryChanges,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName},n={attribute:t.name,url:e.url,typeName:e.typeName},a=e.customEditorsOptions&&e.customEditorsOptions.rules||[],o={type:t.localType,generalProps:r,props:e},s=w().getCustomEditor(n,a,o);return f()(s)?e.editors(t.localType,r):s},getFilterRenderer:t,getFormatter:t=>((e,t)=>{if("boolean"===e.localType)return function(){let{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f()(e)?null:s().createElement("span",null,e.toString())};if(["int","number"].includes(e.localType))return function(){let{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f()(e)?null:s().createElement(z.Z,{value:e,numberParams:{maximumFractionDigits:17}})};if("string"===e.localType)return function(){let{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f()(e)?null:B()(e,/(https?:\/\/\S+)/g,((e,t)=>s().createElement("a",{key:e+t,href:e,target:"_blank"},e)))};if("Geometry"===e.localType)return()=>null;if(["date","date-time"].includes(e.localType)){const r=q()(t,e.localType)??i.fK[e.localType];return function(){let{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f()(e)?null:$().utc(e).isValid()?$().utc(e).format(r):$()(e).format(r)}}if(["time"].includes(e.localType)){const r=q()(t,e.localType)??i.fK[e.localType];return function(){let{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f()(e)?null:$().utc(e).isValid()?$().utc(e).format(r):$()(`1970-01-01T${e}`).utc().format(r)}}return null})(t,e.dateFormats)}))};return r})),(0,p.withPropsOnChange)(["gridOpts","describeFeatureType","actionOpts","mode","select","columns","showCheckbox"],(e=>{let{onRowsSelected:t=(()=>{}),onRowsDeselected:r=(()=>{}),onRowsToggled:n=(()=>{}),...a}=(0,i.a3)(e.gridEvents,e.rowGetter,e.describeFeatureType,e.actionOpts,e.columns),o=e.gridOpts;return o={...o,enableCellSelect:"EDIT"===e.mode,rowSelection:{showCheckbox:e.showCheckbox||"EDIT"===e.mode,selectBy:{keys:{rowKey:"_!_id_!_",values:e.select.map((e=>e.id))}},onRowsSelected:t,onRowsDeselected:r}},a.onRowClick=(e,t)=>{e>=0&&n([{rowIdx:e,row:t}])},{...a,...o}})),P.Z,(0,p.withProps)((e=>{let{columns:t}=e;return{columns:t?.map((e=>({...e,name:e.showTitleTooltip?s().createElement(v.Z,{placement:"top",overlay:s().createElement(y.Tooltip,{id:e.name},e.description)},s().createElement("span",null,e.title)):e.title||e.name})))}}))),Q=K;var X=r(753370);function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y.apply(this,arguments)}function J(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ee extends s().Component{constructor(e){super(e),this.setScrollLeft=e=>this.refs.cell.setScrollLeft(e)}render(){const e=this.context.isProperty(this.props.column.key),t=this.props.rowData._new&&e||this.context.isModified(this.props.rowData.id,this.props.column.key),r=!e||this.context.isValid(this.props.rowData.get(this.props.column.key),this.props.column.key),n=(t?["modified"]:[]).concat(r?[]:["invalid"]).join(" ");return s().createElement(X.Cell,Y({},this.props,{ref:"cell",className:n}))}}J(ee,"propTypes",{value:a().any,rowData:a().object,column:a().object}),J(ee,"contextTypes",{isModified:a().func,isProperty:a().func,isValid:a().func}),J(ee,"defaultProps",{value:null,rowData:{},column:{}});const te=ee;class re extends s().Component{constructor(e){super(e),this.setScrollLeft=e=>this.refs.row.setScrollLeft(e)}render(){return this.props.renderBaseRow({extraClasses:"empty_row"===this.props.row.id?"empty-row":"",cellRenderer:te,...this.props})}}var ne,ae,oe;ne=re,ae="propTypes",oe={columns:a().array,row:a().object,renderBaseRow:a().func.isRequired},(ae=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(ae))in ne?Object.defineProperty(ne,ae,{value:oe,enumerable:!0,configurable:!0,writable:!0}):ne[ae]=oe;const se=re;function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ie.apply(this,arguments)}function le(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ue extends s().PureComponent{constructor(e){super(e)}getChildContext(){return{isModified:(e,t)=>this.props.changes.hasOwnProperty(e)&&this.props.changes[e].hasOwnProperty(t),isProperty:e=>"geometry"===e||(0,i.IC)(e,this.props.describeFeatureType),isValid:(e,t)=>!this.props.describeFeatureType||(0,i.wT)(e,t,this.props.describeFeatureType)}}render(){const e=this.props.gridComponent;return s().createElement(e,ie({rowRenderer:se},this.props))}}le(ue,"propTypes",{autocompleteEnabled:a().bool,editingAllowedRoles:a().array,gridOpts:a().object,changes:a().object,selectBy:a().object,customEditorsOptions:a().object,features:a().array,showDragHandle:a().bool,gridComponent:a().func,describeFeatureType:a().object,columnSettings:a().object,gridOptions:a().object,actionOpts:a().object,tools:a().array,gridEvents:a().object,virtualScroll:a().bool,maxStoredPages:a().number}),le(ue,"childContextTypes",{isModified:a().func,isValid:a().func,isProperty:a().func}),le(ue,"defaultProps",{editingAllowedRoles:["ADMIN"],autocompleteEnabled:!1,gridComponent:e=>s().createElement(l.Z,null,(t=>{let{width:r,height:n}=t;return s().createElement("div",{className:e.className},s().createElement(g,h({},e,{minHeight:n,minWidth:r,enableCellAutoFocus:!1})))})),changes:{},gridEvents:{},gridOpts:{},describeFeatureType:{},columnSettings:{},features:[],tools:[],showDragHandle:!1,virtualScroll:!1,maxStoredPages:5});const pe=Q(ue)},940721:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r(45697),a=r.n(n),o=r(753370);function s(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class i extends o.editors.SimpleTextEditor{componentDidMount(){this.props.onTemporaryChanges?.(!0)}componentWillUnmount(){this.props.onTemporaryChanges?.(!1)}}s(i,"propTypes",{onTemporaryChanges:a().func}),s(i,"defaultProps",{onTemporaryChanges:()=>{}});const l=i},703476:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(124852),a=r.n(n),o=r(45697),s=r.n(o),i=r(940721),l=r(727437),u=r(867076);const p=(0,u.compose)((0,u.withStateHandlers)((e=>({open:!1,currentPage:1,value:e.value,data:e.data,textValue:e.textValue,textLabel:e.textLabel})),{select:e=>()=>({...e,selected:!0}),change:e=>t=>{if(e.selected&&e.changingPage)return{...e,selected:!1,changingPage:!1,value:e.value,currentPage:e.changingPage?e.currentPage:1};const r="string"==typeof t?t:t.value;return{...e,selected:!1,changingPage:!1,value:r,currentPage:e.changingPage?e.currentPage:1}},focus:e=>t=>t&&0===t.length&&""===e.value?{...e,currentPage:1,isToggled:!1,open:!0}:e,toggle:e=>()=>({...e,open:!!e.changingPage||!e.open})}))((e=>{let{toggle:t,select:r,focus:n,change:o,value:s,busy:i,data:u,loading:p=!1,filter:c,open:d}=e;return a().createElement(l.Z,{pagination:{paginated:!1},onFocus:n,onToggle:t,onChange:o,onSelect:r,selectedValue:s,dropUp:!1,busy:i,data:u,open:d,loading:p,filter:c})})),c=e=>{let{oldValue:t,changedValue:r,data:n,allowEmpty:a,emptyValue:o=""}=e;return a&&""===r?o:-1!==n.indexOf(r)?r:t};var d=r(91175),h=r.n(d),g=r(727418),m=r.n(g);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function y(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class v extends i.Z{constructor(e){super(e),this.validate=e=>{try{return this.props.isValid(e[this.props.column&&this.props.column.key])}catch(e){return!1}},this.getValueByLabel=e=>{try{return this.props.values[this.props.labels.indexOf(e)]}catch(t){return e}},this.getValue=()=>{const e=super.getValue();return this.props.forceSelection?{[this.props.column.key]:c({oldValue:this.props.defaultOption,changedValue:this.getValueByLabel(e[this.props.column&&this.props.column.key]),data:this.props.values,allowEmpty:this.props.allowEmpty,emptyValue:this.props.emptyValue})}:this.props.allowEmpty?e:{[this.props.column.key]:c({oldValue:this.props.defaultOption,changedValue:this.getValueByLabel(e[this.props.column&&this.props.column.key]),data:this.props.values,allowEmpty:this.props.allowEmpty,emptyValue:this.props.emptyValue})}}}render(){const e=this;var t=[];this.props.values&&this.props.labels&&this.props.values.lenght===this.props.labels.lenght?this.props.values.forEach((function(r,n){t.push({label:e.props.labels[n],value:r})})):t=this.props.values.map((e=>({label:e,value:e})));const r=m()({},{...this.props},{data:t,defaultOption:this.props.defaultOption||h()(this.props.values)});return a().createElement(p,f({},r,{filter:this.props.filter}))}}y(v,"propTypes",{column:s().object,dataType:s().string,defaultOption:s().string,forceSelection:s().bool,allowEmpty:s().bool,inputProps:s().object,isValid:s().func,onBlur:s().func,typeName:s().string,value:s().string,filter:s().string,values:s().array,labels:s().array,emptyValue:s().string}),y(v,"defaultProps",{isValid:()=>!0,dataType:"string",filter:"contains",values:[],forceSelection:!0,allowEmpty:!0,emptyValue:""});const b=v},230195:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(124852),a=r.n(n),o=r(45697),s=r.n(o);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends a().Component{constructor(e){super(e),l(this,"state",{inputText:""}),l(this,"validateValue",(e=>!this.props.formatRegex||new RegExp(this.props.formatRegex).test(e))),this.state={inputText:e.value},this.inputRef=a().createRef()}componentDidMount(){this.props.onTemporaryChanges?.(!0)}componentWillUnmount(){this.props.onTemporaryChanges?.(!1)}getValue(){return{[this.props.column.key]:this.validateValue(this.state.inputText)?this.state.inputText:this.props.value}}getInputNode(){return this.inputRef.current}render(){return a().createElement("input",i({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:this.inputRef,className:"form-control",defaultValue:this.props.value,onChange:e=>{this.setState({inputText:e.target.value,isValid:this.validateValue(e.target.value),validated:!0})}}))}}l(u,"propTypes",{value:s().string,inputProps:s().object,dataType:s().string,column:s().object,formatRegex:s().string,onTemporaryChanges:s().func}),l(u,"defaultProps",{dataType:"string",column:{}})},825079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(124852),a=r.n(n),o=r(45697),s=r.n(o),i=r(281763),l=r.n(i),u=r(481330);function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d={int:e=>parseInt(e,10),number:e=>parseFloat(e,10)};class h extends a().Component{constructor(e){super(e),c(this,"state",{inputText:""}),c(this,"validateTextValue",(e=>{if(!d[this.props.dataType])return!1;try{const t=d[this.props.dataType](e);return this.validateNumberValue(t)}catch(e){return!1}})),c(this,"validateNumberValue",(e=>l()(e)&&!isNaN(e)&&(!l()(this.props.minValue)||this.props.minValue<=e)&&(!l()(this.props.maxValue)||this.props.maxValue>=e))),this.state={inputText:e.value?.toString?.()??""},this.inputRef=a().createRef()}componentDidMount(){this.props.onTemporaryChanges?.(!0)}componentWillUnmount(){this.props.onTemporaryChanges?.(!1)}getValue(){try{const e=d[this.props.dataType](this.state.inputText);return{[this.props.column.key]:this.validateNumberValue(e)?e:this.props.value}}catch(e){return{[this.props.column.key]:this.props.value}}}getInputNode(){return this.inputRef.current}render(){return a().createElement(u.Z,p({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:e=>{this.inputRef=e},type:"number",min:this.props.minValue,max:this.props.maxValue,className:"form-control",defaultValue:this.props.value,onChange:e=>{this.setState({inputText:e,isValid:this.validateTextValue(e),validated:!0})}}))}}c(h,"propTypes",{value:s().oneOfType([s().string,s().number]),inputProps:s().object,dataType:s().string,minValue:s().number,maxValue:s().number,column:s().object,onTemporaryChanges:s().func}),c(h,"defaultProps",{dataType:"number",column:{}})},427481:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(124852),a=r.n(n),o=r(703476),s=r(825079),i=r(230195);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}const u={DropDownEditor:{string:e=>a().createElement(o.Z,l({dataType:"string"},e))},NumberEditor:{int:e=>a().createElement(s.Z,l({dataType:"int"},e)),number:e=>a().createElement(s.Z,l({dataType:"number"},e))},FormatEditor:{string:e=>a().createElement(i.Z,l({dataType:"string"},e))}}},626824:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(45697),a=r.n(n),o=r(753370),s=r.n(o),i=r(180307),l=r.n(i);function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends(s()){constructor(e){super(e),u(this,"scrollListener",(()=>{this.props.isFocused||(this.scroll=this.canvas.scrollTop);const e=Math.ceil(this.canvas.clientHeight/this.props.rowHeight),t=Math.floor(this.canvas.scrollTop/this.props.rowHeight),r=t+e;this.props.onGridScroll&&this.props.onGridScroll({firstRowIdx:t,lastRowIdx:r})})),u(this,"setCanvasListener",(()=>{this.canvas=l().findDOMNode(this).querySelector(".react-grid-Canvas"),this.header=l().findDOMNode(this).querySelector(".react-grid-HeaderRow"),this.canvas&&this.canvas.addEventListener("scroll",this.scrollListener)}))}componentDidMount(){this.setCanvasListener(),this.props.displayFilters&&this.onToggleFilter()}componentWillUnmount(){this.canvas&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.canvas=null),this.props.displayFilters&&this.onToggleFilter()}componentDidUpdate(e){const{virtualScroll:t,displayFilters:r,scrollToTopCounter:n}=this.props;e.displayFilters!==r&&this.onToggleFilter(),t&&(this.canvas&&this.canvas!==l().findDOMNode(this).querySelector(".react-grid-Canvas")&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.setCanvasListener()),this.canvas||this.setCanvasListener(),this.canvas&&e.isFocused&&!this.props.isFocused?this.canvas.scrollTop=this.scroll:this.canvas&&this.props.minHeight!==e.minHeight&&this.scrollListener(),!this.props.isFocused&&this.canvas&&(this.scroll=this.canvas.scrollTop),n!==e.scrollToTopCounter&&this.canvas?this.canvas.scrollTop=0:this.canvas&&this.header&&(this.canvas.scrollLeft=this.header.scrollLeft))}}u(p,"propTypes",{displayFilters:a().bool});const c=p},208232:(e,t,r)=>{"use strict";r.d(t,{Q:()=>c});var n=r(701469),a=r.n(n),o=r(124852),s=r.n(o),i=r(867076),l=r(828878),u=r(727437);(0,i.setObservableConfig)(l.Z);const p=(0,i.mapPropsStreamWithConfig)(l.Z)((e=>e.take(1).switchMap((t=>t.autocompleteStreamFactory(e))).combineLatest(e,((e,t)=>({data:a()(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values.map((e=>({label:e,value:e}))):[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,currentPage:t&&t.currentPage,maxFeatures:t&&t.maxFeatures,select:t&&t.select,focus:t&&t.focus,loadNextPage:t&&t.loadNextPage,loadPrevPage:t&&t.loadPrevPage,toggle:t&&t.toggle,change:t.change,open:t.open,selected:t&&t.selected,value:t.value,busy:e.busy,dropUp:t.dropUp,attribute:t.column&&t.column.key,changeAttribute:t.changeAttribute})))))((e=>{let{open:t,toggle:r,select:n,focus:a,change:o,value:i,valuesCount:l,loadNextPage:p,loadPrevPage:c,maxFeatures:d,currentPage:h,busy:g,data:m,loading:f=!1,dropUp:y=!1,attribute:v,changeAttribute:b}=e;const w=Math.ceil(l/d);return s().createElement(u.Z,{pagination:{firstPage:1===h,lastPage:h===w,paginated:!0,loadPrevPage:c,loadNextPage:p},busy:g,dropUp:y,data:m,attribute:v,open:t,onFocus:a,onToggle:r,onChange:o,onSelect:n,onChangeAttribute:b,selectedValue:i,loading:f})})),c=(0,i.compose)((0,i.withStateHandlers)((e=>({delayDebounce:0,performFetch:!1,open:!1,openOnFocus:e.openOnFocus,currentPage:1,maxFeatures:5,url:e.url,typeName:e.typeName,value:e.value,attribute:e.column&&e.column.key,autocompleteStreamFactory:e.autocompleteStreamFactory,onChange:e.onChange})),{select:e=>()=>({...e,selected:!0}),change:e=>t=>{if(e.selected&&e.changingPage)return{...e,delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:e.value,currentPage:e.changingPage?e.currentPage:1};const r="string"==typeof t?t:t.value;return e.onChange&&e.onChange(r),{...e,delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:r,currentPage:e.changingPage?e.currentPage:1}},focus:e=>t=>t&&0===t.length&&""===e.value?{...e,delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,...e.openOnFocus?{open:!0}:{}}:e,toggle:e=>()=>({...e,open:!!e.changingPage||!e.open}),loadNextPage:e=>()=>({...e,currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value}),loadPrevPage:e=>()=>({...e,currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value}),changeAttribute:e=>t=>({...e,attribute:t})}))(p)},556382:(e,t,r)=>{"use strict";r.d(t,{Vd:()=>w,Vj:()=>P});var n=r(472500),a=r.n(n),o=r(666654),s=r.n(o),i=r(91175),l=r.n(i),u=r(414293),p=r.n(u),c=r(727418),d=r.n(c),h=r(49977),g=r.n(h),m=r(940711),f=r(470509),y=r.n(f),v=r(69090);const b=e=>{let{searchText:t="",queriableAttributes:r=[],predicate:n="ILIKE"}=e;const a=l()(r);let o=`strToLowerCase(${a}) ${n} '%${t.toLowerCase()}%'`;return p()(a)?"":"("+o+")"},w=e=>e.distinctUntilChanged((function(e){let{value:t,currentPage:r,attribute:n}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(a.value!==t||a.currentPage!==r||a.attribute!==n)})).throttle((e=>g().Observable.timer(e.delayDebounce||0))).merge(e.debounce((e=>g().Observable.timer(e.delayDebounce||0)))).distinctUntilChanged().switchMap((e=>{if(e.performFetch){const t=(0,v.getWpsPayload)({attribute:e.attribute,layerName:e.typeName,maxFeatures:e.maxFeatures,startIndex:(e.currentPage-1)*e.maxFeatures,value:e.value});return g().Observable.fromPromise(y().post(e.url,t,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((e=>({fetchedData:e.data,busy:!1})))).catch((()=>g().Observable.of({fetchedData:{values:[],size:0},busy:!1}))).startWith({busy:!0})}return g().Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({}),P=e=>g().Observable.merge(e.distinctUntilChanged((function(){let{value:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{value:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e===t})).debounce((e=>g().Observable.timer(e.delayDebounce||0))),e.distinctUntilChanged((function(){let{filterProps:e,currentPage:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{filterProps:r,currentPage:n}=arguments.length>1?arguments[1]:void 0;return e===r&&t===n}))).switchMap((e=>{if(e.performFetch){let t=a().parse(e.url,!0),r="";(s()(t.pathname,"wfs")||s()(t.pathname,"wms")||s()(t.pathname,"ows")||s()(t.pathname,"wps"))&&(r=t.pathname.replace(/(wms|ows|wps|wfs)$/,"wfs")),t.query&&t.query.service&&delete t.query.service;const n=a().format(d()({},t,{search:null,pathname:r}));let o=d()({},{url:n,typeName:e.filterProps&&e.filterProps.typeName||"",predicate:e.filterProps&&e.filterProps.predicate||"ILIKE",blacklist:e.filterProps&&e.filterProps.blacklist||[],maxFeatures:e.filterProps&&e.filterProps.maxFeatures||3,queriableAttributes:e.filterProps&&e.filterProps.queriableAttributes||[],returnFullData:!0,startIndex:((e.currentPage||1)-1)*(e.filterProps&&e.filterProps.maxFeatures||3),outputFormat:"application/json",staticFilter:"",fromTextToFilter:b,item:{},timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"},srsName:e.filterProps&&e.filterProps.srsName||"EPSG:4326",...t.query});return g().Observable.fromPromise(m.b.Utils.getService("wfs")(e.value,o).then((t=>({fetchedData:{values:t.features.map((e=>e.properties)),size:t.totalFeatures,features:t.features,crs:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},busy:!1})))).catch((()=>g().Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1}))).startWith({busy:!0})}return g().Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({})},56784:(e,t,r)=>{const n=r(313311);let a=r(727418)({},r(427481).Z);e.exports={get:()=>a,set:e=>{a=e},register:e=>{let{name:t,editors:r}=e;r&&(a[t]=r)},remove:e=>{if(t=e,-1!==Object.keys(a).indexOf(t))try{return delete a[e],!0}catch(e){return!1}var t;return!1},clean:()=>{a={}},getCustomEditor:function(e){let{attribute:t,url:r,typeName:o}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{type:i,generalProps:l={},props:u}=arguments.length>2?arguments[2]:void 0;const p=n(s,(e=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).length>0&&Object.keys(e).reduce(((r,n)=>{const a=new RegExp(e[n]);return r&&a.test(t[n])}),!0)}(e.regex,{attribute:t,url:r,typeName:o})));if(p){const e=((e,t,r)=>{if(a[t]){if(a[t][e])return a[t][e](r);if(a[t].defaultEditor)return a[t].defaultEditor(r)}return null})(i,p.editor,{...u,...l,...p.editorProps||{}});return e}return null}}},69090:(e,t,r)=>{const{isFilterValid:n,toOGCFilterParts:a}=r(738839),o=r(883796),{and:s}=o({});e.exports={getWpsPayload:e=>{let{layerName:t,layerFilter:r,attribute:o,maxFeatures:i,startIndex:l,value:u}=e;const p=u?'<ogc:PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">   <ogc:PropertyName>'+o+"</ogc:PropertyName>   <ogc:Literal>*"+u+"*</ogc:Literal></ogc:PropertyIsLike>":"",c=r&&!r.disabled&&n(r)?a(r,"1.1.0","ogc"):[];return'<wps:Execute xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0.0" service="WPS" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">  <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">gs:PagedUnique</ows:Identifier>  <wps:DataInputs>    <wps:Input>      <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Identifier>      <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Title>      <wps:Data />      <wps:Reference xmlns:xlink="http://www.w3.org/1999/xlink" mimeType="text/xml" xlink:href="http://geoserver/wfs" method="POST">        <wps:Body>         <wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" service="WFS" version="1.0.0">           <wfs:Query typeName="'+t+'">'+(p.length>0||c.length>0?'<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">'+s(...c,p)+"</ogc:Filter>":"")+'             <ogc:SortBy xmlns:ogc="http://www.opengis.net/ogc">               <ogc:SortProperty>                 <ogc:PropertyName>'+o+'</ogc:PropertyName>               </ogc:SortProperty>             </ogc:SortBy>           </wfs:Query>         </wfs:GetFeature>       </wps:Body>     </wps:Reference>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Title>     <wps:Data>       <wps:LiteralData>'+o+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Title>     <wps:Data>       <wps:LiteralData>'+i+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Title>     <wps:Data>       <wps:LiteralData>'+l+'</wps:LiteralData>     </wps:Data>   </wps:Input> </wps:DataInputs> <wps:ResponseForm>   <wps:RawDataOutput mimeType="application/json">     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">result</ows:Identifier>   </wps:RawDataOutput> </wps:ResponseForm></wps:Execute>'}}},659632:e=>{var t=function(e){return"string"==typeof e};e.exports=function(e,r,n){return Array.isArray(e)||(e=[e]),a=e.map((function(e){return t(e)?function(e,r,n){var a=0,o=0;if(""===e)return e;if(!e||!t(e))throw new TypeError("First argument to react-string-replace#replaceString must be a string");var s,i,l,u=r;(function(e){return e instanceof RegExp})(u)||(u=new RegExp("("+(s=u,i=/[\\^$.*+?()[\]{}|]/g,l=RegExp(i.source),(s&&l.test(s)?s.replace(i,"\\$&"):s)+")"),"gi"));for(var p=e.split(u),c=1,d=p.length;c<d;c+=2)void 0!==p[c]&&void 0!==p[c-1]?(o=p[c].length,a+=p[c-1].length,p[c]=n(p[c],c,a),a+=o):console.warn("reactStringReplace: Encountered undefined value during string replacement. Your RegExp may not be working the way you expect.");return p}(e,r,n):e})),o=[],a.forEach((function(e){Array.isArray(e)?o=o.concat(e):o.push(e)})),o;var a,o}}}]);