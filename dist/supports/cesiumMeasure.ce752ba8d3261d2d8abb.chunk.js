(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[8175],{887853:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var n=r(124852),a=r.n(n),o=r(45697),i=r.n(o),s=r(968929),c=r.n(s),l=r(630294),u=r(200020),d=r(23888),f=r(288487),p=r(423570),g=r.n(p),m=r(509187),h=r.n(m),C=r(823493),E=r.n(C);function T(e,t){let{getObjectsToExcludeOnPick:r=(()=>[]),pickObjectsLimit:n=Number.MAX_VALUE,depthTestAgainstTerrain:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=r();let i;void 0!==a&&(i=e.scene.globe.depthTestAgainstTerrain,e.scene.globe.depthTestAgainstTerrain=a),o.forEach((e=>{e&&(e.show=!1)})),e.scene.render();const s=function(e,t){let{pickObjectsLimit:r=Number.MAX_VALUE}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.scene,a=e.camera,o=t.position||t.endPosition,i=n.pick(o),s=n.pickPosition(o);if(i&&s)return{cartesian:s,cartographic:f.Cartographic.fromCartesian(s),feature:i};const c=a.getPickRay(o),l=n.drillPickFromRay(c,r).find((e=>{let{exclude:t,object:r,position:n}=e;return!t&&n&&r}))||null;if(l)return{cartesian:l.position,cartographic:f.Cartographic.fromCartesian(l.position),feature:l?.object?.primitive};const u=n.globe.pick(c,n);return u?{cartesian:u,cartographic:f.Cartographic.fromCartesian(u)}:{}}(e,t,{pickObjectsLimit:n});return void 0!==a&&(e.scene.globe.depthTestAgainstTerrain=i),o.forEach((e=>{e&&(e.show=!0)})),s}function y(e,t){if(e?.length<3)return 0;const r=f.Cartesian2.packArray(e),n=h()(r,t,2);let a=0;for(let t=0;t<n.length;t+=3){const r=e[n[t]],o=e[n[t+1]],i=e[n[t+2]],s=f.Cartesian3.subtract(o,r,new f.Cartesian3),c=f.Cartesian3.subtract(i,r,new f.Cartesian3),l=f.Cartesian3.cross(s,c,new f.Cartesian3);a+=f.Cartesian3.magnitude(l)/2}return a}function I(e){return e?.length<2?0:e.reduce(((t,r,n)=>e[n-1]?t+f.Cartesian3.distance(r,e[n-1]):t),0)}function O(e){return Math.sign(f.Cartographic.fromCartesian(e[1]).height-f.Cartographic.fromCartesian(e[0]).height)}function A(e){const{longitude:t,latitude:r,height:n}=f.Cartographic.fromCartesian(e);return[f.Math.toDegrees(t),f.Math.toDegrees(r),n]}function D(e,t,r){let{area:n,areaUom:a,length:o,lengthUom:i,height:s,heightUom:c,terrainCoordinates:l}=r;switch(e){case"Point":return{type:"Feature",properties:l?{height:s,heightUom:c,terrainCoordinates:l}:{},geometry:{type:"Point",coordinates:A(t[t.length-1])}};case"LineString":return{type:"Feature",properties:{length:o,lengthUom:i},geometry:{type:"LineString",coordinates:t.map((e=>A(e)))}};case"Polygon":return{type:"Feature",properties:{area:n,areaUom:a,length:o,lengthUom:i},geometry:{type:"Polygon",coordinates:[t.map((e=>A(e)))]}};default:return null}}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,r=arguments.length>2?arguments[2]:void 0;return new Promise((n=>{const a=r.map((e=>f.Cartographic.fromCartesian(e))).map((e=>new f.Cartographic(e.longitude,e.latitude,0))),o=e?.availability?f.sampleTerrainMostDetailed(e,a):f.sampleTerrain(e,t,a);f.defined(o)?o.then((e=>{n(e)})).catch((()=>{n()})):n()}))}const w=function(e){let{map:t,active:r,geometryType:a="LineString",onDrawStart:o=(()=>{}),onDrawing:i=(()=>{}),onMouseMove:s=(()=>{}),onDrawEnd:c=(()=>{}),onInit:l=(()=>{}),onDestroy:u=(()=>{}),getObjectsToExcludeOnPick:d,mouseMoveThrottleTime:p=100,depthTestAgainstTerrain:g,sampleTerrain:m,coordinatesLength:h,getPositionInfo:C=T}=e;const w=(0,n.useRef)(),P=(0,n.useRef)(!1),N=(0,n.useRef)(!1),L=(0,n.useRef)([]);function v(e,r){if(P.current){const{cartesian:n}=C(t,e,{getObjectsToExcludeOnPick:d,depthTestAgainstTerrain:g});if(r&&L.current.splice(L.current.length-2,2),L.current.push(n),!function(e,t,r){if(r&&r!==t.length)return!1;switch(e){case"Point":case"LineString":default:return!0;case"Polygon":return t.length>2}}(a,[...L.current],h))return c({}),L.current=[],P.current=!1,null;const o="Polygon"===a?[...L.current,L.current[0]]:[...L.current],i=y(o),s=I(o);c({area:i,distance:s,coordinates:o,feature:D(a,o,{area:i,areaUom:"m²",length:s,lengthUom:"m"})}),L.current=[],P.current=!1}return null}return(0,n.useEffect)((()=>(t?.canvas&&r&&(l(),w.current=new f.ScreenSpaceEventHandler(t.canvas),w.current.setInputAction((e=>{v(e,!0)}),f.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),w.current.setInputAction((e=>{!function(e){if(P.current){if(L.current.length+1===h)return N.current=!0,v(e);const{cartesian:r}=C(t,e,{getObjectsToExcludeOnPick:d,depthTestAgainstTerrain:g});if(r){const e=L.current[L.current.length-1];L.current.push(r);const t=[...L.current],n=y(t),a=I(t);i({area:n,distance:a,previousCartesian:e,cartesian:r,coordinates:[...L.current]})}}}(e),function(e){if(!P.current&&!N.current){const r=[...L.current];L.current=[];const{cartesian:n}=C(t,e,{getObjectsToExcludeOnPick:d,depthTestAgainstTerrain:g});n&&(L.current.push(n),"Point"===a?((m&&2!==r.length?()=>b(t?.terrainProvider,t?.terrainProvider?.sampleTerrainZoomLevel??18,[n]).then((e=>{if(e){const[t]=e;return[f.Cartographic.toCartesian(t),n]}return[n]})):()=>Promise.resolve(2===r.length?r:[n]))().then((e=>{o({cartesian:e[e.length-1],coordinates:e}),c({coordinates:e,feature:m&&2===e.length?D(a,e,{height:O(e)*I(e),heightUom:"m",terrainCoordinates:A(e[0])}):D(a,e,{})})})),L.current=[]):(o({cartesian:n,coordinates:[...L.current]}),P.current=!0))}N.current&&(N.current=!1)}(e)}),f.ScreenSpaceEventType.LEFT_CLICK),w.current.setInputAction(E()((e=>{!function(e){if(r){const{cartesian:r}=C(t,e,{getObjectsToExcludeOnPick:d,depthTestAgainstTerrain:g});if(r)if("Point"===a&&m)b(t?.terrainProvider,t?.terrainProvider?.sampleTerrainZoomLevel??18,[r]).then((e=>{let t;if(e){const[n]=e,a=[f.Cartographic.toCartesian(n),r];t=O(a)*I(a),L.current=a}else L.current=[r];s({distance:t,cartesian:r,coordinates:[...L.current]})}));else{const e=L.current[L.current.length-1],t=[...L.current,r],n=y(t),a=I(t);s({area:n,distance:a,previousCartesian:e,cartesian:r,coordinates:t})}}}(e)}),p),f.ScreenSpaceEventType.MOUSE_MOVE)),()=>{u({coordinates:[...L.current]}),w.current&&(w.current.destroy(),w.current=null),L.current=[],P.current=!1})),[t,r,a,p,m,h]),null};var P=r(556233),N=r(594397),L=r(112635);function v(e){const t=f.Cartesian3.distance(e[1],e[0]),r=f.Cartesian3.distance(e[1],e[2]),n=f.Cartesian3.normalize(f.Cartesian3.subtract(e[0],e[1],new f.Cartesian3),new f.Cartesian3),a=f.Cartesian3.normalize(f.Cartesian3.subtract(e[2],e[1],new f.Cartesian3),new f.Cartesian3),o=f.Cartesian3.normalize((0,L.eN)(n,a),new f.Cartesian3),i=(t>r?r:t)/3;return[n,o,a].map((t=>f.Cartesian3.add(e[1],f.Cartesian3.multiplyByScalar(t,i,new f.Cartesian3),new f.Cartesian3)))}const S=function(e){let{map:t,active:r=!1,type:o,clearId:i,hideInfoLabel:s,hideSegmentsLengthLabels:c,onUpdateCollection:l=(()=>{}),unitsOfMeasure:u={},tooltipLabels:d={},style:p={primaryLabel:{font:"12px sans-serif",fillColor:"#ffffff",backgroundColor:"rgba(0, 0, 0, 0.6)"},secondaryLabel:{font:"12px sans-serif",fillColor:"#ffffff",outlineColor:"#000000",outlineWidth:4,offset:[0,-16]},tooltip:{font:"12px sans-serif",fillColor:"#ffffff",backgroundColor:"rgba(0, 0, 0, 0.5)",offset:[8,8]},lineDrawing:{color:"#000000",opacity:1,depthFailColor:"#000000",depthFailOpacity:.4,width:3,dashLength:8},line:{color:"#ffcc33",opacity:1,depthFailColor:"#ffcc33",depthFailOpacity:.4,width:2},areaDrawing:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},area:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},cursor:{color:"#000000"},coordinatesNode:{color:"#333333"}},infoLabelsFormat:m={[P.sW.POLYLINE_DISTANCE_3D]:e=>e,[P.sW.AREA_3D]:e=>e,[P.sW.HEIGHT_FROM_TERRAIN]:e=>e,[P.sW.ANGLE_3D]:e=>e,[P.sW.SLOPE]:e=>e,[P.sW.POINT_COORDINATES]:function(e){let{latitude:t,longitude:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return`latitude: ${t.toFixed(6)}\nlongitude: ${r.toFixed(6)}\naltitude: ${e}`}},getPositionInfo:h}=e;const C=(0,n.useRef)(),E=(0,n.useRef)(),T=(0,n.useRef)(),y=(0,n.useRef)(),I=(0,n.useRef)(),O=(0,n.useRef)(),A=(0,n.useRef)({type:"FeatureCollection",features:[]}),D=(0,n.useRef)(),b=(0,n.useRef)(),S=(0,n.useRef)();S.current=u;const _=(0,n.useRef)();_.current=d;const R=(0,n.useRef)();function F(){return{color:(0,N.KF)({...p?.coordinatesNode}),disableDepthTestDistance:Number.POSITIVE_INFINITY}}function W(){const{font:e="12px sans-serif",fillColor:t="#ffffff",backgroundColor:r="rgba(0, 0, 0, 0.6)",offset:n=[0,-16]}=p?.primaryLabel||{};return{font:e,disableDepthTestDistance:Number.POSITIVE_INFINITY,fillColor:(0,N.KF)({color:t}),showBackground:!0,backgroundColor:(0,N.KF)({color:r}),backgroundPadding:new f.Cartesian2(4,4),pixelOffset:new f.Cartesian2(...n),horizontalOrigin:f.HorizontalOrigin.CENTER,verticalOrigin:f.VerticalOrigin.BASELINE}}function k(){const{font:e="12px sans-serif",fillColor:t="#ffffff",outlineColor:r="#000000",outlineWidth:n=4}=p?.secondaryLabel||{};return{font:e,disableDepthTestDistance:Number.POSITIVE_INFINITY,fillColor:(0,N.KF)({color:t}),outlineColor:(0,N.KF)({color:r}),outlineWidth:n,style:f.LabelStyle.FILL_AND_OUTLINE,showBackground:!1,backgroundPadding:new f.Cartesian2(4,4),pixelOffset:new f.Cartesian2(0,0),horizontalOrigin:f.HorizontalOrigin.CENTER,verticalOrigin:f.VerticalOrigin.BASELINE}}function M(){const{font:e="12px sans-serif",fillColor:t="#ffffff",backgroundColor:r="rgba(0, 0, 0, 0.5)",offset:n=[8,8]}=p?.tooltip||{};return{font:e,disableDepthTestDistance:Number.POSITIVE_INFINITY,fillColor:(0,N.KF)({color:t}),showBackground:!0,backgroundColor:(0,N.KF)({color:r}),backgroundPadding:new f.Cartesian2(4,4),pixelOffset:new f.Cartesian2(...n),horizontalOrigin:f.HorizontalOrigin.LEFT,verticalOrigin:f.VerticalOrigin.TOP}}function x(e,t,r){return e&&e.value!==r?`${(0,P.Ov)(t,r,e.value).toFixed(2)} ${e.label}`:`${t.toFixed(2)} ${e.label}`}function G(e,t,r){const n=r===P.sW.AREA_3D?P.vq[S.current[r]?.value]:S.current[r];return c?null:t.map(((r,a)=>{const o=t[a+1];if(o){const t=(0,L.eN)(r,o),a=f.Cartesian3.distance(r,o),i=x(n,a,"m");e.add({position:t,text:i,...k()});const{longitude:s,latitude:c,height:l}=f.Cartographic.fromCartesian(t);return[f.Math.toDegrees(s),f.Math.toDegrees(c),l,a,i]}return null})).filter((e=>e))}function $(e){let r,n,a,{coordinates:o,feature:i,measureType:c}=e,l="",u=o[o.length-1];const d=S.current[c],f=R.current[c];switch(c){case P.sW.HEIGHT_FROM_TERRAIN:T.current.add({position:o[o.length-1],image:D.current,color:(0,N.KF)({color:"#ffff00"}),disableDepthTestDistance:Number.POSITIVE_INFINITY,allowPicking:!1}),l=f(x(d,i.properties.height,"m")),C.current.add((0,N.c4)({...p?.line,coordinates:[...o]}));break;case P.sW.ANGLE_3D:C.current.add((0,N.c4)({...p?.line,coordinates:[...o]}));const[e]=(0,L.Ys)(o);n=e,l=f(x(d,n,"deg")),u=o[1],C.current.add((0,N.c4)({...p?.line,coordinates:v(o)}));break;case P.sW.SLOPE:C.current.add((0,N.XI)({...p?.area,coordinates:[...o]})),C.current.add((0,N.c4)({...p?.line,coordinates:[...o]}));const[s]=(0,L.Qg)(o,t?.camera?.position);a=s,l=f(x(d,a,"deg")),u=(0,L.bj)(o);break;case P.sW.POINT_COORDINATES:T.current.add({position:o[o.length-1],image:D.current,color:(0,N.KF)({color:"#ffff00"}),disableDepthTestDistance:Number.POSITIVE_INFINITY,allowPicking:!1}),l=f(x(d,i.geometry.coordinates[2],"m"),{latitude:i.geometry.coordinates[1],longitude:i.geometry.coordinates[0]});break;case P.sW.POLYLINE_DISTANCE_3D:o.length>1&&(C.current.add((0,N.c4)({...p?.line,coordinates:[...o]})),r=G(I.current,o,P.sW.POLYLINE_DISTANCE_3D),l=f(x(d,i.properties.length,"m")));break;case P.sW.AREA_3D:o.length>2&&(C.current.add((0,N.XI)({...p?.area,coordinates:[...o]})),C.current.add((0,N.c4)({...p?.line,coordinates:[...o]})),r=G(I.current,o,P.sW.AREA_3D),l=f(x(d,i.properties.area,"m²")))}s||I.current.add({position:u,text:l,...W()});const m=i?.id?i.id:g()();return{...i,id:m,properties:{...i?.properties,id:m,measureType:c,...r&&{segments:r,segmentsCRS:"WGS84",segmentsColumns:["longitude","latitude","height:m","length:m","label"]},...l&&{infoLabelText:l},...n&&{angle:n,angleUom:"deg"},...a&&{slope:a,slopeUom:"deg"}}}}function H(e){let{coordinates:r,area:n,distance:a}=e;!function(e){let{area:r,distance:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};E.current.removeAll(),y.current.removeAll(),O.current.removeAll();let a="",i="",c=e[e.length-1];const l=S.current[o],u=_.current[o]||{},d=R.current[o];switch(o){case P.sW.HEIGHT_FROM_TERRAIN:i=u.start,2===e?.length&&(E.current.add((0,N.c4)({...p?.lineDrawing,coordinates:[...e]})),a=n?d(x(l,n,"m")):"");break;case P.sW.ANGLE_3D:if(i=u.start,e.length>1&&E.current.add((0,N.c4)({...p?.lineDrawing,coordinates:[...e]})),3===e.length){const[t]=(0,L.Ys)(e);a=d(x(l,t,"deg")),c=e[1],E.current.add((0,N.c4)({...p?.lineDrawing,coordinates:v(e)}))}break;case P.sW.SLOPE:if(i=u.start,e.length>1&&E.current.add((0,N.c4)({...p?.lineDrawing,coordinates:[...e]})),3===e.length){E.current.add((0,N.XI)({...p?.areaDrawing,coordinates:[...e]}));const[r]=(0,L.Qg)(e,t?.camera?.position);a=d(x(l,r,"deg")),c=(0,L.bj)(e)}break;case P.sW.POINT_COORDINATES:if(i=u.start,e[0]){const t=f.Cartographic.fromCartesian(e[0]);a=d(x(l,t.height,"m"),{latitude:t.latitude,longitude:t.longitude})}break;case P.sW.POLYLINE_DISTANCE_3D:i=u.start,e.length>1&&(i=u.end,a=d(x(l,n,"m")),E.current.add((0,N.c4)({...p?.lineDrawing,coordinates:[...e]})),G(O.current,e,P.sW.POLYLINE_DISTANCE_3D),e.forEach(((t,r)=>{r!==e.length-1&&y.current.add({position:t,image:b.current,...F()})})));break;case P.sW.AREA_3D:i=u.start,e.length>1&&(E.current.add((0,N.XI)({...p?.areaDrawing,coordinates:[...e]})),E.current.add((0,N.c4)({...p?.lineDrawing,coordinates:[...e]})),G(O.current,e,P.sW.AREA_3D),e.forEach(((t,r)=>{r!==e.length-1&&y.current.add({position:t,image:b.current,...F()})}))),e.length>2&&(i=u.end,a=d(x(l,r,"m²"))),2===e.length&&(i=u.missingVertex)}e.length>0&&(y.current.add({position:e[e.length-1],image:D.current,color:(0,N.KF)({...p?.cursor}),disableDepthTestDistance:Number.POSITIVE_INFINITY}),O.current.add({position:e[e.length-1],text:i,...M()}),s||O.current.add({position:c,text:a,...W()})),t.scene.requestRender()}(r,{area:n,distance:a})}return R.current=m,(0,n.useEffect)((()=>(t&&(C.current=new f.PrimitiveCollection({destroyPrimitives:!0}),t.scene.primitives.add(C.current),T.current=new f.BillboardCollection,t.scene.primitives.add(T.current),I.current=new f.LabelCollection,t.scene.primitives.add(I.current),E.current=new f.PrimitiveCollection({destroyPrimitives:!0}),t.scene.primitives.add(E.current),y.current=new f.BillboardCollection,t.scene.primitives.add(y.current),O.current=new f.LabelCollection,t.scene.primitives.add(O.current),D.current=(0,N.xB)(12,{stroke:"#ffffff",strokeWidth:2,fill:!1}),b.current=(0,N.xB)(8,{stroke:"#ffffff",strokeWidth:2,fill:!1})),()=>{t?.isDestroyed&&!t.isDestroyed()&&((0,N.U2)(t,C.current),C.current=null,(0,N.U2)(t,T.current),T.current=null,(0,N.U2)(t,I.current),I.current=null,(0,N.U2)(t,E.current),E.current=null,(0,N.U2)(t,y.current),y.current=null,(0,N.U2)(t,O.current),O.current=null)})),[t]),(0,n.useEffect)((()=>{r||(E.current.removeAll(),y.current.removeAll(),O.current.removeAll(),t.scene.requestRender())}),[r]),(0,n.useEffect)((()=>{i&&(E.current.removeAll(),y.current.removeAll(),O.current.removeAll(),C.current.removeAll(),T.current.removeAll(),I.current.removeAll(),A.current={type:"FeatureCollection",features:[]},l(A.current),t.scene.requestRender())}),[i]),(0,n.useEffect)((()=>{u[o]?.value&&function(){C.current.removeAll(),T.current.removeAll(),I.current.removeAll();const{features:e=[]}=A.current||{},r=e.map((e=>{const t=function(e){const{properties:t={},geometry:r={}}=e,{measureType:n}=t,{coordinates:a=[]}=r;switch(n){case P.sW.HEIGHT_FROM_TERRAIN:return[f.Cartographic.toCartesian(f.Cartographic.fromDegrees(...t?.terrainCoordinates)),f.Cartographic.toCartesian(f.Cartographic.fromDegrees(...a))];case P.sW.POINT_COORDINATES:return[f.Cartographic.toCartesian(f.Cartographic.fromDegrees(...a))];case P.sW.ANGLE_3D:case P.sW.POLYLINE_DISTANCE_3D:return a.map((e=>f.Cartographic.toCartesian(f.Cartographic.fromDegrees(...e))));case P.sW.SLOPE:case P.sW.AREA_3D:return a[0].map((e=>f.Cartographic.toCartesian(f.Cartographic.fromDegrees(...e))));default:return[]}}(e);return $({coordinates:t,feature:e,measureType:e?.properties?.measureType})}));A.current.features=r,l(A.current),t.scene.requestRender()}()}),[u[o]?.value]),a().createElement(w,{key:o,map:t,active:r,geometryType:function(){switch(o){case P.sW.HEIGHT_FROM_TERRAIN:case P.sW.POINT_COORDINATES:return"Point";case P.sW.ANGLE_3D:case P.sW.POLYLINE_DISTANCE_3D:return"LineString";case P.sW.SLOPE:case P.sW.AREA_3D:return"Polygon";default:return null}}(),onDrawStart:H,onMouseMove:H,onDrawing:H,onDrawEnd:function(e){let{coordinates:r,feature:n}=e;r&&n&&function(e,r){let{feature:n}=r;const a=$({coordinates:e,feature:n,measureType:o});A.current.features.push(a),l(A.current),t.scene.requestRender()}(r,{feature:n})},depthTestAgainstTerrain:!1,sampleTerrain:P.sW.HEIGHT_FROM_TERRAIN===o,coordinatesLength:function(){switch(o){case P.sW.ANGLE_3D:case P.sW.SLOPE:return 3;case P.sW.HEIGHT_FROM_TERRAIN:case P.sW.POINT_COORDINATES:case P.sW.POLYLINE_DISTANCE_3D:case P.sW.AREA_3D:default:return null}}(),getPositionInfo:h,getObjectsToExcludeOnPick:()=>[E.current,y.current,O.current,C.current,T.current,I.current]})};var _=r(270415),R=r(36549),F=r(719648);const W=(0,R.Z)(d.Z);function k(e,t){let{map:r,active:o,measureType:i,onChangeMeasureType:s,defaultMeasureType:d,hideInfoLabel:f,hideSegmentsLengthLabels:p,unitsOfMeasure:g,unitsOfMeasureOptions:m=P.O$,onUpdateFeatures:h,onChangeUnitOfMeasure:C,tools:E=[P.sW.POLYLINE_DISTANCE_3D,P.sW.AREA_3D,P.sW.POINT_COORDINATES,P.sW.HEIGHT_FROM_TERRAIN,P.sW.ANGLE_3D,P.sW.SLOPE],onClose:T}=e,{messages:y}=t;const[I,O]=(0,n.useState)(0),A=m[i];function D(e){s(e)}return(0,n.useEffect)((()=>{o&&D(d)}),[o,d]),o?a().createElement(a().Fragment,null,a().createElement(S,{map:r,active:!!i,type:i,clearId:I,hideInfoLabel:f,hideSegmentsLengthLabels:p,unitsOfMeasure:g,onUpdateCollection:e=>h(e?.features||[]),tooltipLabels:{[P.sW.POLYLINE_DISTANCE_3D]:{start:(0,F.S$)(y,"measureComponent.tooltipPolylineDistance3DStart"),end:(0,F.S$)(y,"measureComponent.tooltipPolylineDistance3DEnd")},[P.sW.AREA_3D]:{start:(0,F.S$)(y,"measureComponent.tooltipArea3DStart"),missingVertex:(0,F.S$)(y,"measureComponent.tooltipArea3DMissingVertex"),end:(0,F.S$)(y,"measureComponent.tooltipArea3DEnd")},[P.sW.POINT_COORDINATES]:{start:(0,F.S$)(y,"measureComponent.tooltipPointCoordinatesStart")},[P.sW.HEIGHT_FROM_TERRAIN]:{start:(0,F.S$)(y,"measureComponent.tooltipHeightFromTerrainStart")},[P.sW.ANGLE_3D]:{start:(0,F.S$)(y,"measureComponent.tooltipAngle3DStart")},[P.sW.SLOPE]:{start:(0,F.S$)(y,"measureComponent.tooltipSlopeStart")}},infoLabelsFormat:{[P.sW.POLYLINE_DISTANCE_3D]:e=>e,[P.sW.AREA_3D]:e=>e,[P.sW.POINT_COORDINATES]:function(e){let{latitude:t,longitude:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return`${(0,F.S$)(y,"measureComponent.latitude")}: ${t.toFixed(6)}\n${(0,F.S$)(y,"measureComponent.longitude")}: ${r.toFixed(6)}\n${(0,F.S$)(y,"measureComponent.altitude")}: ${e}`},[P.sW.HEIGHT_FROM_TERRAIN]:e=>e,[P.sW.ANGLE_3D]:e=>e,[P.sW.SLOPE]:e=>e}}),a().createElement(_.Z,{info:a().createElement(u.DropdownList,{disabled:!A,value:g[i],data:A,onChange:function(e){C(i,e)},textField:"label",valueField:"value"}),onClose:T},a().createElement(l.ButtonToolbar,null,a().createElement(l.ButtonGroup,null,E.map((e=>a().createElement(W,{key:e,className:"square-button-md",bsStyle:i===e?"success":"primary",tooltipId:`measureComponent.${c()(e)}Measure`,active:i===e,onClick:D.bind(null,e)},a().createElement(l.Glyphicon,{glyph:P.r2[e]}))))),a().createElement(l.ButtonGroup,null,a().createElement(W,{className:"square-button-md",bsStyle:"primary",tooltipId:"measureComponent.resetTooltip",onClick:()=>O(I+1)},a().createElement(l.Glyphicon,{glyph:"trash"})))))):null}k.contextTypes={messages:i().object};const M=k},112635:(e,t,r)=>{"use strict";r.d(t,{eN:()=>a,tj:()=>o,Ys:()=>i,bj:()=>s,Qg:()=>c});var n=r(288487);function a(e,t){const r=n.Cartesian3.subtract(t,e,new n.Cartesian3),a=n.Cartesian3.multiplyByScalar(r,.5,new n.Cartesian3);return n.Cartesian3.add(e,a,new n.Cartesian3)}function o(e,t){const r=n.Cartesian3.normalize(e,new n.Cartesian3),a=n.Cartesian3.normalize(t,new n.Cartesian3),o=n.Cartesian3.dot(r,a);return n.Math.toDegrees(Math.acos(o))}function i(e){return e.map(((t,r)=>{const a=e[r-1],i=e[r+1];return a&&i?o(n.Cartesian3.subtract(a,t,new n.Cartesian3),n.Cartesian3.subtract(i,t,new n.Cartesian3)):null})).filter((e=>null!==e))}function s(e){return new n.Cartesian3((e[0].x+e[1].x+e[2].x)/3,(e[0].y+e[1].y+e[2].y)/3,(e[0].z+e[1].z+e[2].z)/3)}function c(e,t){return e.map(((r,a)=>{const i=e[a-1],s=e[a+1];if(i&&s){const e=function(e,t){const r=n.Cartesian3.normalize(e,new n.Cartesian3),a=n.Cartesian3.normalize(t,new n.Cartesian3);return n.Cartesian3.cross(r,a,new n.Cartesian3)}(n.Cartesian3.subtract(i,r,new n.Cartesian3),n.Cartesian3.subtract(s,r,new n.Cartesian3)),a=-Math.sign(n.Cartesian3.dot(e,n.Cartesian3.subtract(r,t,new n.Cartesian3),new n.Cartesian3));return o(n.Cartesian3.multiplyByScalar(e,a,new n.Cartesian3),r)}return null})).filter((e=>null!==e))}},594397:(e,t,r)=>{"use strict";r.d(t,{KF:()=>c,c4:()=>l,XI:()=>u,U2:()=>d,xB:()=>f,ir:()=>p});var n=r(288487),a=r(65792),o=r.n(a),i=r(545578),s=r.n(i);const c=e=>{let{color:t,opacity:r}=e;const[a,i,s,c]=o()(t).gl();return void 0!==r?new n.Color(a,i,s,r):new n.Color(a,i,s,c)},l=e=>{let{coordinates:t,width:r=4,color:a="#ff00ff",opacity:o=1,depthFailColor:i,depthFailOpacity:s,dashLength:l,clampToGround:u}=e;return new n[u?"GroundPolylinePrimitive":"Primitive"]({geometryInstances:new n.GeometryInstance({geometry:u?new n.GroundPolylineGeometry({positions:[...t],width:r}):new n.PolylineGeometry({positions:[...t],width:r,arcType:n.ArcType.NONE})}),appearance:new n.PolylineMaterialAppearance({material:l?n.Material.fromType("PolylineDash",{color:c({color:a,opacity:o}),dashLength:l}):n.Material.fromType("Color",{color:c({color:a,opacity:o})})}),...i&&{depthFailAppearance:new n.PolylineMaterialAppearance({material:l?n.Material.fromType("PolylineDash",{color:c({color:i,opacity:s}),dashLength:l}):n.Material.fromType("Color",{color:c({color:i,opacity:s})})})},allowPicking:!1,asynchronous:!1})},u=e=>{let{coordinates:t,color:r="#ff00ffAA",opacity:a=1,depthFailColor:o,depthFailOpacity:i}=e;return new n.Primitive({geometryInstances:new n.GeometryInstance({geometry:new n.PolygonGeometry({polygonHierarchy:new n.PolygonHierarchy([...t]),perPositionHeight:!0})}),appearance:new n.MaterialAppearance({material:n.Material.fromType("Color",{color:c({color:r,opacity:a})}),faceForward:!0}),...o&&{depthFailAppearance:new n.MaterialAppearance({material:n.Material.fromType("Color",{color:c({color:o,opacity:i})}),faceForward:!0})},allowPicking:!1,asynchronous:!1})},d=(e,t)=>{e?.scene?.primitives&&t&&!t.isDestroyed()&&(t.removeAll(),e.scene.primitives.remove(t))},f=function(e){let{stroke:t,strokeWidth:r=1,fill:n="#ffffff"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=t?e+2*r:e,o=document.createElement("canvas");o.setAttribute("width",a),o.setAttribute("height",a);const i=o.getContext("2d");return i.beginPath(),n&&(i.fillStyle="#ffffff"),t&&(i.strokeStyle=t,i.lineWidth=r),i.arc(a/2,a/2,e/2,0,2*Math.PI),n&&i.fill(),t&&i.stroke(),o},p=(e,t,a)=>r.e(9706).then(r.bind(r,979706)).then((o=>{const i=o.default,c=a?e:i(e),{geometry:l}=c;return(u=[...l?.coordinates?.[0]||[]],r.e(4220).then(r.bind(r,574220)).then((e=>(0,e.default)({type:"Feature",geometry:{type:"LineString",coordinates:u},properties:{}})?u:[...u].reverse()))).then((e=>{const r=s()(t?e:e.reverse(),(e=>`${e[0]}${e[1]}`)).map((e=>{let[t,r,a=0]=e;return n.Cartesian3.fromDegrees(t,r,a)})),a=r.length,o=[];for(let e=0;e<a;++e){const t=(e+1)%a;let i=n.Cartesian3.add(r[e],r[t],new n.Cartesian3);i=n.Cartesian3.multiplyByScalar(i,.5,i);const s=n.Cartesian3.normalize(i,new n.Cartesian3);let c=n.Cartesian3.subtract(r[t],i,new n.Cartesian3);c=n.Cartesian3.normalize(c,c);let l=n.Cartesian3.cross(c,s,new n.Cartesian3);l=n.Cartesian3.normalize(l,l);const u=new n.Plane(l,0),d=n.Plane.getPointDistance(u,i);o.push(new n.ClippingPlane(l,d))}return o}));var u}))}}]);