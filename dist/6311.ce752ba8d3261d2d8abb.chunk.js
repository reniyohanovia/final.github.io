(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[6311],{403410:(e,t,l)=>{"use strict";l.d(t,{hn:()=>r,yg:()=>n,vD:()=>a,jJ:()=>o,oy:()=>i,W:()=>s,B1:()=>c,fU:()=>d,cY:()=>u});const r="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",n="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",a="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",o="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",i="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",s=function(e,t){return{type:o,id:e,owner:t,actionType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",options:arguments.length>3?arguments[3]:void 0}},c=(e,t)=>({type:i,owner:e,options:t}),d=function(){let{id:e,owner:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:n,id:e,owner:t}},u=e=>({type:a,owner:e})},546243:(e,t,l)=>{"use strict";l.d(t,{vZ:()=>r,TB:()=>n,gF:()=>a,g$:()=>o,dJ:()=>i,uz:()=>s,vA:()=>c,lX:()=>d,E2:()=>u,mF:()=>p,ch:()=>m,DX:()=>y,j1:()=>f,wL:()=>g,Nm:()=>h,rb:()=>b,dk:()=>v,Wv:()=>k,Nf:()=>E,FU:()=>S,k5:()=>I,pt:()=>T,Wm:()=>C,wj:()=>w,l1:()=>F,cu:()=>x,Fe:()=>O,Lc:()=>P,p2:()=>L,WQ:()=>D,E0:()=>A,xR:()=>N,WB:()=>R,bB:()=>Z});const r="STYLEEDITOR:TOGGLE_STYLE_EDITOR",n="STYLEEDITOR:SELECT_STYLE_TEMPLATE",a="STYLEEDITOR:UPDATE_TEMPORARY_STYLE",o="STYLEEDITOR:UPDATE_STATUS",i="STYLEEDITOR:RESET_STYLE_EDITOR",s="STYLEEDITOR:ADD_STYLE",c="STYLEEDITOR:CREATE_STYLE",d="STYLEEDITOR:LOADING_STYLE",u="STYLEEDITOR:LOADED_STYLE",p="STYLEEDITOR:ERROR_STYLE",m="STYLEEDITOR:UPDATE_STYLE_CODE",y="STYLEEDITOR:EDIT_STYLE_CODE",f="STYLEEDITOR:DELETE_STYLE",g="STYLEEDITOR:INIT_STYLE_SERVICE",h="STYLEEDITOR:SET_EDIT_PERMISSION",b="STYLEEDITOR:SET_DEFAULT_STYLE",v="STYLEEDITOR:UPDATE_EDITOR_METADATA";function k(e,t){return{type:r,layer:e,enabled:t}}function E(e){return{type:o,status:e}}function S(){let{code:e,templateId:t,format:l,languageVersion:r,init:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:n,code:e,templateId:t,format:l,init:a,languageVersion:r}}function I(){let{temporaryId:e,templateId:t,code:l,format:r,languageVersion:n,init:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:a,temporaryId:e,templateId:t,code:l,format:r,init:o,languageVersion:n}}function T(e){return{type:d,status:e}}function C(){return{type:u}}function w(e){return{type:c,settings:e}}function F(){return{type:i}}function x(e){return{type:s,add:e}}function O(e,t){return{type:p,status:e,error:t}}function P(){return{type:m}}function L(e){return{type:y,code:e}}function D(e){return{type:f,styleName:e}}function A(e,t){return{type:g,service:e,canEdit:t}}function N(e){return{type:h,canEdit:e}}function R(){return{type:b}}function Z(e){return{type:v,metadata:e}}},458698:(e,t,l)=>{"use strict";l.d(t,{Z:()=>L});var r=l(959956),n=l(472500),a=l.n(n),o=l(189734),i=l.n(o),s=l(91175),c=l.n(s),d=l(984596),u=l.n(d),p=l(281763),m=l.n(p),y=l(747037),f=l.n(y),g=l(944908),h=l.n(g),b=l(727418),v=l.n(b),k=l(65792),E=l.n(k),S=l(399790);const I=[{name:"red",colors:["#000","#f00"]},{name:"green",colors:["#000","#008000","#0f0"]},{name:"blue",colors:["#000","#00f"]},{name:"gray",colors:["#333","#eee"]},{name:"jet",colors:["#00f","#ff0","#f00"]},...h()(Object.keys(E().brewer).map((e=>e.toLocaleLowerCase()))).map((e=>({name:e,colors:e})))],T=(e,t,l,r)=>{const n=e?c()((e.thematic.colors||e.thematic.additionalColors||[]).filter((e=>e.name===t)))||c()(I.filter((e=>e.name===t))):r?c()([r,...I].filter((e=>e.name===t))):c()(I.filter((e=>e.name===t)));return n&&(f()(n.colors)||n.colors.length>=2)?{ramp:"custom",colors:E().scale(n.colors).colors(l).join(",")}:{ramp:t}},C=(e,t)=>{const l=e.thematic&&e.thematic.params||[],r=e.thematic&&e.thematic.fieldAsParam&&["field"]||[];return Object.keys(t).reduce(((n,a)=>{return((e,t)=>function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter((t=>t.field===e)).length>0}(e,t))(a,[...l,...r])?v()(n,((e,t,l)=>({viewparams:(e?e+";":"")+t+":"+l}))(n.viewparams,a,t[a])):"ramp"===a?v()(n,T(e,t[a],t.intervals||5)):"classification"===a?v()(n,(o=t[a])?{customClasses:o.reduce(((e,t)=>[...e,t.min+","+t.max+","+t.color]),[]).join(";")}:{}):"attribute"===a?v()(n,{attribute:e.thematic&&e.thematic.fieldAsParam?t[a]:t.field}):"field"===a&&e.thematic&&!e.thematic.fieldAsParam?n:"strokeWeight"!==a||t.strokeOn?"strokeOn"===a?n:v()(n,{[a]:t[a]}):v()(n,{[a]:-1});var o}),{})},w=e=>v()({protocol:e.protocol,hostname:e.domain},e.port?{port:e.port}:{}),F=e=>e.reduce(((e,t)=>m()(t)?t:e),null),x=e=>e.PolygonSymbolizer?"Polygon":e.LineSymbolizer?"LineString":e.PointSymbolizer?"Point":null,O=e=>e.PolygonSymbolizer?e.PolygonSymbolizer.Fill&&e.PolygonSymbolizer.Fill.CssParameter&&e.PolygonSymbolizer.Fill.CssParameter.$||"#808080":e.LineSymbolizer?e.LineSymbolizer.Stroke&&e.LineSymbolizer.Stroke.CssParameter&&e.LineSymbolizer.Stroke.CssParameter.$||"#808080":e.PointSymbolizer&&e.PointSymbolizer.Graphic&&e.PointSymbolizer.Graphic.Mark&&e.PointSymbolizer.Graphic.Mark.Fill&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter.$||"#808080",P={getStyleService:(e,t)=>{const l=(0,r.ij)((0,S.Hi)(e));return a().format(v()(w(l),{pathname:l.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.xml",query:v()({},C(e,t),{fullSLD:!0})}))},getCapabilitiesUrl:e=>{const t=(0,r.ij)((0,S.Hi)(e));return a().format(v()(w(t),{pathname:t.applicationRootPath+"/rest/sldservice/capabilities.json"}))},getStyleMetadataService:(e,t,l)=>{const{baseUrl:n="",isStatic:o=!1}=l||{},i=(0,r.ij)(o?n:(0,S.Hi)(e));return a().format(v()(w(i),{pathname:i.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.json",query:t}))},getStyleParameters:(e,t)=>({SLD:P.getStyleService(e,t),viewparams:C(e,t).viewparams}),getMetadataParameters:(e,t)=>C(e,t),getFieldsService:e=>{const t=(0,r.ij)((0,S.Hi)(e)),l=e.thematic&&e.thematic.datatable||e.name;return a().format(v()(w(t),{pathname:t.applicationRootPath+"/rest/sldservice/"+l+"/attributes.json"}))},readFields:e=>i()(u()(e.Attributes.Attribute||[]).filter((e=>{return t=e.type,-1!==["Integer","Long","Double","Float","BigDecimal"].indexOf(t);var t})).map((e=>({name:e.name,type:(e.type,"number")}))),(e=>e.name)),readClassification:(e,t)=>{(e=>{if(e&&e.Rule)throw new Error("toc.thematic.invalid_attribute");if(!e||!e.Rules||!e.Rules.Rule)throw new Error("toc.thematic.invalid_object");u()(e.Rules.Rule).forEach((e=>{if(!e.PolygonSymbolizer&&!e.LineSymbolizer&&!e.PointSymbolizer)throw new Error("toc.thematic.invalid_geometry")}))})(e);const l=u()(e.Rules.Rule||[]);return l.map(((e,r)=>({title:e.Title,color:O(e),type:x(e),..."uniqueInterval"===t?{unique:e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal}:{min:F([e.Filter.And&&(e.Filter.And.PropertyIsGreaterThanOrEqualTo||e.Filter.And.PropertyIsGreaterThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,r===l.length-1&&e?.Filter?.PropertyIsGreaterThanOrEqualTo?.Literal]),max:F([e.Filter.And&&(e.Filter.And.PropertyIsLessThanOrEqualTo||e.Filter.And.PropertyIsLessThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,0===r&&e?.Filter?.PropertyIsLessThan?.Literal])}})))||[]},readRasterClassification:e=>{const t=u()(e?.Rules?.Rule);return(t[0]?.RasterSymbolizer?.ColorMap?.ColorMapEntry||[]).map((e=>({color:e["@color"],opacity:void 0===e["@opacity"]?1:e["@opacity"],label:e["@label"],quantity:parseFloat(e["@quantity"])})))},methods:["equalInterval","quantile","jenks"],getThematicParameters:e=>e.map((e=>e.type&&P.standardParams[e.type]&&v()({},P.standardParams[e.type],e)||e)),standardParams:{aggregate:{title:"toc.thematic.classification_aggregate",defaultValue:"sum",values:[{name:"toc.thematic.values.sum",value:"sum"},{name:"toc.thematic.values.avg",value:"avg"},{name:"toc.thematic.values.count",value:"count"},{name:"toc.thematic.values.min",value:"min"},{name:"toc.thematic.values.max",value:"max"}]}},getColor:T,getColors:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return(t?t.thematic.colors||[...e,...t.thematic.additionalColors||[]]:r?[r,...e]:[...e]).map((e=>!f()(e.colors)&&e.colors.length>=l?e:v()({},e,{colors:E().scale(e.colors).colors(l)})))},hasThematicStyle:e=>!!(e&&e.params&&e.params.SLD),removeThematicStyle:e=>{const{SLD:t,viewparams:l,...r}=e;return v()({},r,{SLD:null,viewparams:null})},defaultParams:{attribute:"",intervals:5,method:"equalInterval",ramp:"red",field:"",open:!1,strokeWeight:.2,strokeColor:"#ff0000",strokeOn:!1}},L=P},811408:(e,t,l)=>{"use strict";l.d(t,{eb:()=>S,IW:()=>I,DG:()=>T});var r=l(618446),n=l.n(r),a=l(227361),o=l.n(a),i=l(984596),s=l.n(i),c=l(470509),d=l.n(c),u=l(860294),p=l(458698);const m=["equalInterval","uniqueInterval","quantile","jenks","standardDeviation"],y=["equalInterval","quantile","jenks"];let f={};function g(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;return t.map((t=>t.ruleId===e?l(t):t))}function h(e){const{capabilities:t={}}=e||{},{vector:l={}}=t,{raster:r={}}=t,n=l.classifications||[],a=r.classifications||[];return{vector:n.filter((e=>-1!==m.indexOf(e))),raster:a.filter((e=>-1!==m.indexOf(e)))}}const b=(e,t)=>{const l="uniqueInterval"===e?.method,r=e?.intervalsForUnique;return{errorId:t&&t.includes("toc")?t:l?"styleeditor.classificationUniqueIntervalError":"styleeditor.classificationError",msgParams:l?{intervalsForUnique:r}:{}}},v=(e,t)=>{const l="uniqueInterval"===e?.method,r=e?.intervalsForUnique;return{errorId:l?t&&t.includes("float type")?"styleeditor.classificationRasterUniqueIntervalError":"styleeditor.classificationUniqueIntervalError":"styleeditor.classificationRasterError",msgParams:l?{intervalsForUnique:r}:{}}},k=(e,t)=>{const l=o()(e,"Rules.Rule"),r=l&&o()(l,"RasterSymbolizer.ColorMap.ColorMapEntry"),n="classificationRaster"===t.type?r&&s()(r).length:l&&s()(l).length,a="custom"===t.ramp&&t.classification.length>0&&{name:"custom",colors:t.classification.map((e=>e.color))},{colors:i=[]}=p.Z.getColor(void 0,t.ramp,n||t.intervals,a);let c=i?.split(",");return t.reverse&&(c=c.reverse()),{classification:p.Z["classificationRaster"===t.type?"readRasterClassification":"readClassification"](e,t.method).map(((e,t)=>({...e,color:c[t]})))}},E={geoserver:{updateStyleService:e=>{let{baseUrl:t,styleService:l}=e;const r=l?.isStatic?l.baseUrl:t;if(f[r])return new Promise((e=>e(f[r])));const n=p.Z.getCapabilitiesUrl({url:r});return(l?.isStatic?new Promise((e=>e(l))):u.ZP.getStyleService({baseUrl:r})).then((e=>d().get(n).then((t=>{let{data:l}=t;return[e,l]})).catch((()=>[e,null])))).then((e=>{let[t,l]=e;const n={...t,classificationMethods:l?h(l):{vector:y,raster:y}};return f[r]=n,n}))}}};function S(e){let{baseUrl:t,styleService:l}=e;return E.geoserver.updateStyleService({baseUrl:t,styleService:l})}function I(e){let{values:t,properties:l,rules:r,layer:a,styleService:o}=e,i=["intervals","method","reverse","attribute","ramp","intervalsForUnique"],s={...l,...t};const{ruleId:c}=l;if(void 0!==t.ramp&&t.ramp!==l.ramp&&"customInterval"===s?.method&&!t.classification){const{colors:e}=p.Z.getColor(void 0,t.ramp,s.intervals),l=e.split(",");return new Promise((e=>e(g(c,r,(e=>({...e,...s,classification:s.classification.map(((e,t)=>({...e,color:l[t]}))),errorId:void 0}))))))}const u=i.reduce(((e,t)=>({...e,[t]:l[t]})),{}),m=i.reduce(((e,t)=>({...e,[t]:s[t]})),{}),y=!i.find((e=>void 0===s[e]))&&!n()(u,m)&&"custom"!==t?.ramp&&"customInterval"!==s?.method,f=function(){let{errorId:e,msgParams:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g(c,r,(r=>({...r,...t,errorId:e,msgParams:l})))};if(y){const e={intervals:s.intervals,method:s.method,attribute:s.attribute,intervalsForUnique:s.intervalsForUnique};return d().get(p.Z.getStyleMetadataService(a,e,o)).then((e=>{let{data:l}=e;return g(c,r,(e=>({...e,...t,...k(l,s),errorId:void 0})))})).catch((e=>f(b(s,e?.message))))}return new Promise((e=>e(f())))}function T(e){let{values:t,properties:l,rules:r,layer:a,styleService:o}=e;const i=["intervals","continuous","method","reverse","ramp","intervalsForUnique"],s={...l,...t},{ruleId:c}=l;if(void 0!==t.ramp&&t.ramp!==l.ramp&&"customInterval"===s?.method&&!t.classification){const{colors:e}=p.Z.getColor(void 0,t.ramp,s.intervals),l=e.split(",");return new Promise((e=>e(g(c,r,(e=>({...e,...s,classification:s.classification.map(((e,t)=>({...e,color:l[t]}))),errorId:void 0}))))))}const u=i.reduce(((e,t)=>({...e,[t]:l[t]})),{}),m=i.reduce(((e,t)=>({...e,[t]:s[t]})),{}),y=!i.find((e=>void 0===s[e]))&&!n()(u,m)&&"custom"!==t?.ramp&&"customInterval"!==s?.method,f=function(){let{errorId:e,msgParams:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g(c,r,(r=>({...r,...t,errorId:e,msgParams:l})))};return y?d().get(p.Z.getStyleMetadataService(a,{intervals:s.intervals,continuous:s.continuous,method:s.method,reverse:s.reverse,intervalsForUnique:s.intervalsForUnique},o)).then((e=>{let{data:l}=e;return g(c,r,(e=>({...e,...t,...k(l,s),errorId:void 0})))})).catch((e=>f(v(s,e?.data)))):new Promise((e=>e(f())))}},860294:(e,t,l)=>{"use strict";l.d(t,{ZP:()=>F});var r=l(470509),n=l.n(r),a=l(727418),o=l.n(a),i=l(227361),s=l.n(i),c=l(567523),d=l.n(c),u=l(968929),p=l.n(u);let m={};const y=e=>e.map((e=>d()(e,((e,t)=>p()(t)))));var f=l(91175),g=l.n(f),h=l(984596),b=l.n(h),v=l(644825);const k=[{regex:/gt-css/,format:"css"}],E={css:"application/vnd.geoserver.geocss+css",sld:"application/vnd.ogc.sld+xml",sldse:"application/vnd.ogc.se+xml",zip:"application/zip"},S=(e,t)=>"sld"===e?t&&t.version&&"1.1.0"===t.version?E.sldse:E.sld:E[e]||E.sld,I=(e,t)=>{let{options:l={},format:r,baseUrl:n,name:a,workspace:o,languageVersion:i}=e;const s=t?{name:encodeURIComponent(a)}:{};return{options:{...l,params:{...l.params,...s},headers:{...l.headers||{},"Content-Type":S(r,i)}},url:`${n}rest/${o&&`workspaces/${o}/`||""}styles${t?".json":`/${encodeURIComponent(a)}`}`}},T=e=>{let{geoserverBaseUrl:t,workspace:l,name:r,format:n="json"}=e;return`${t}rest/${l&&`workspaces/${l}/`||""}styles/${encodeURIComponent(r)}.${n}`},C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b()(e?.entry||[]).reduce(((e,t)=>({...e,[t["@key"]]:t.$})),{})},w=e=>{let{baseUrl:t,styleName:l,metadata:r}=e;const a=T({...(0,v.$N)(l),geoserverBaseUrl:t});return n().get(a).then((function(){let{data:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n().put(a,{style:{...e.style,metadata:{...C(e.style?.metadata),...r}}})}))},F={saveStyle:(e,t,l,r)=>{let a=e+"styles/"+encodeURI(t),i=o()({},r);return i.headers=o()({},i.headers,{"Content-Type":"application/vnd.ogc.sld+xml"}),n().put(a,l,i)},getStyleService:e=>{let{baseUrl:t}=e;return function(e){let{baseUrl:t}=e;return m[t]?new Promise((e=>e(m[t]))):n().all([n().get(`${t}rest/about/version`,{"Content-Type":"application/json"}).then((e=>{let{data:t}=e;return s()(t,"about.resource")})).catch((()=>null)),n().get(`${t}rest/about/manifest`,{"Content-Type":"application/json"}).then((e=>{let{data:t}=e;return s()(t,"about.resource")})).catch((()=>null)),n().get(`${t}rest/fonts`,{"Content-Type":"application/json"}).then((e=>{let{data:t}=e;return s()(t,"fonts")})).catch((()=>null))]).then((e=>{let[l,r,n]=e;const a={version:l&&y(l),manifest:r&&y(r),fonts:n};return l&&r?(m[t]=a,m[t]):a}))}({baseUrl:t}).then((e=>{let{version:l,manifest:r,fonts:n=[]}=e;if(!l)return null;const a=(r||[]).map((e=>{let{name:t}=e;return g()(k.filter((e=>{let{regex:l}=e;return t.match(l)})).map((e=>{let{format:t}=e;return t})))})).filter((e=>e)),o=g()(l.filter((e=>{let{name:t=""}=e;return"geoserver"===t.toLowerCase()})))||{};return{baseUrl:t,version:o.version,formats:[...a,"sld"],availableUrls:[],fonts:n}}))},getStyle:e=>{let{options:t,format:l,baseUrl:r,styleName:a}=e;const{name:o,workspace:i}=(0,v.$N)(a),s=I({options:t,format:l,baseUrl:r,name:o,workspace:i});return n().get(s.url,s.options)},createStyle:e=>{let{baseUrl:t,code:l,options:r,format:a="sld",styleName:o,languageVersion:i,metadata:s}=e;const{name:c,workspace:d}=(0,v.$N)(o),u=I({options:r,format:a,baseUrl:t,name:c,workspace:d,languageVersion:i},!0);return n().post(u.url,l,u.options).then((()=>s?w({baseUrl:t,styleName:o,metadata:s}).then((()=>null)).catch((()=>null)):null))},updateStyle:e=>{let{baseUrl:t,code:l,options:r,format:a="sld",styleName:o,languageVersion:i,metadata:s}=e;const{name:c,workspace:d}=(0,v.$N)(o),u=I({options:r,format:a,baseUrl:t,name:c,workspace:d,languageVersion:i});return n().put(u.url,l,u.options).then((()=>s?w({baseUrl:t,styleName:o,metadata:s}).then((()=>null)).catch((()=>null)):null))},deleteStyle:e=>{let{baseUrl:t,options:l,format:r="sld",styleName:a}=e;const{name:o,workspace:i}=(0,v.$N)(a),s=I({options:l,format:r,baseUrl:t,name:o,workspace:i});return n().delete(s.url,s.options)},getStylesInfo:e=>{let{baseUrl:t,styles:l=[]}=e,r=[],a=l.length;return new Promise((function(e){l&&0!==l.length?l.forEach(((i,s)=>{let{name:c,href:d}=i;return n().get(d||T({...(0,v.$N)(c),geoserverBaseUrl:t})).then((t=>{let{data:n}=t;r[s]=o()({},l[s],n&&n.style&&{...n.style,...n.style.metadata&&{metadata:C(n.style.metadata)},name:(0,v.U_)(n.style)}||{}),a--,0===a&&e(r.filter((e=>e)))})).catch((()=>{r[s]=o()({},l[s]),a--,0===a&&e(r.filter((e=>e)))}))})):e([])}))},getStyleCodeByName:e=>{let{baseUrl:t,styleName:l,options:r}=e;const{name:a,workspace:o}=(0,v.$N)(l),i=T({name:a,workspace:o,geoserverBaseUrl:t});return n().get(i,r).then((e=>{return e.data&&e.data.style&&e.data.style.name?n().get(T({workspace:o,geoserverBaseUrl:t,name:e.data.style.name,format:(l=e.data.style.filename,l.split(".").pop())})).then((t=>{let{data:l}=t;return{...e.data.style,...e?.data?.style?.metadata&&{metadata:C(e.data.style.metadata)},code:l}})):null;var l}))},updateStyleMetadata:w}},694149:(e,t,l)=>{"use strict";l.d(t,{Z:()=>d});var r=l(124852),n=l.n(r),a=l(630294),o=l(847911),i=l(486234);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},s.apply(this,arguments)}const c=(0,o.Z)("onChange","value")((0,i.Z)("placeholder")((e=>{let{debounceTime:t,...l}=e;return n().createElement(a.FormControl,s({},l,{onChange:e=>l.onChange(e.target.value)}))}))),d=function(e){let{fallbackValue:t,...l}=e;const[a,o]=(0,r.useState)(l.value??t),[i,d]=(0,r.useState)(l.value??t),[u,p]=(0,r.useState)(0),m=(0,r.useRef)(!1),y=(0,r.useRef)();function f(e){const t=!isNaN(parseFloat(e));return t&&void 0!==l.min&&e<l.min?{changed:!0,value:l.min}:t&&void 0!==l.max&&e>l.max?{changed:!0,value:l.max}:{changed:!1,value:t?parseFloat(e):e}}return y.current=a,(0,r.useEffect)((()=>{y.current!==l.value&&o(l.value??t)}),[l.value]),n().createElement(c,s({},l,{key:u,value:a,onChange:function(e){if(m.current){let t=e,r=!0;if("number"===l.type){const{changed:e}=f(t);(""===t||e)&&(r=!1)}o(t),r&&l.onChange(t)}},onChangeNoDebounce:d,onBlur:function(){if("number"===l.type)if(""===i)l.onChange(void 0),o(t),p((e=>e+1));else{const{value:e}=f(i);l.onChange(e),p((e=>e+1)),o(e)}m.current=!1},onFocus:function(){m.current=!0}}))}},768977:(e,t,l)=>{"use strict";l.d(t,{Z:()=>p});var r=l(45697),n=l.n(r),a=l(124852),o=l.n(a),i=l(630294),s=l(222777);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},c.apply(this,arguments)}function d(e,t,l){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var r=l.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}class u extends o().Component{render(){const{cardComponent:e,items:t,colProps:l,onItemClick:r,size:n}=this.props,a=e||s.Z;return o().createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},o().createElement(i.Row,{className:"items-list"},t.map(((e,t)=>o().createElement(i.Col,c({key:e.id||t},l),o().createElement(a,c({onClick:function(){for(var t=arguments.length,l=new Array(t),n=0;n<t;n++)l[n]=arguments[n];return r(e,...l)},size:n},e)))))))}}d(u,"propTypes",{size:n().string,onItemClick:n().func,colProps:n().object,items:n().array,cardComponent:n().oneOfType([n().string,n().func]),className:n().string}),d(u,"defaultProps",{size:"",onItemClick:()=>{},colProps:{xs:12},className:"",items:[]});const p=u},847911:(e,t,l)=>{"use strict";l.d(t,{Z:()=>c});var r=l(124852),n=l.n(r),a=l(45697),o=l.n(a),i=l(23279),s=l.n(i);const c=(e,t)=>l=>{function a(a){const o=(0,r.useRef)(),[i,c]=(0,r.useState)(a[t]),d=(0,r.useRef)();d.current=i,(0,r.useEffect)((()=>{if(d.current!==a[t]){c(a[t]);const l=a[`${e}NoDebounce`];l&&l(a[t])}}),[a[t]]),(0,r.useEffect)((()=>(o.current=s()((t=>{let{newProps:l,newValue:r}=t;l[e](r)}),a.debounceTime),()=>{o.current.cancel()})),[a.debounceTime]);const u={...a,[t]:i,[e]:function(t){c(t);const l=a[`${e}NoDebounce`];l&&l(t),o.current&&(o.current.cancel(),o.current({newProps:a,newValue:t}))}};return n().createElement(l,u)}return a.propTypes={debounceTime:o().number},a.defaultProps={debounceTime:300},a.displayName=l.displayName+"WithDebounceOnCallback",a}},392021:(e,t,l)=>{"use strict";l.d(t,{Z:()=>p});var r=l(45697),n=l.n(r),a=l(124852),o=l.n(a),i=l(743129),s=l(598611),c=l.n(s);function d(e,t,l){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var r=l.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}class u extends o().Component{constructor(){super(...arguments),d(this,"styleRenderer",((e,t,l)=>{const r=this.props.styleRendererPattern||o().createElement("svg",{style:{height:33,width:"100%"},viewBox:"0 0 300 25"},o().createElement("path",{className:"ms-dash-array",strokeWidth:this.props.defaultStrokeWidth,strokeDasharray:l||e.value,d:"M0 12.5, 300 12.5"}));return o().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",paddingRight:25}},r)}))}render(){const e=c()(this.props.dashArray||"1 0"," "),t=this.props.options.find((t=>t.value===e))?this.props.options:[{value:e},...this.props.options],l=this.props.creatable?i.ZP.Creatable:i.ZP;return o().createElement(l,{options:t,disabled:this.props.disabled,menuPlacement:this.props.menuPlacement,clearable:this.props.clearable,optionRenderer:this.props.optionRenderer||this.styleRenderer,valueRenderer:this.props.valueRenderer||this.styleRenderer,value:e,isValidNewOption:this.props.isValidNewOption,onChange:e=>{if(e){const t=e.value.split(" ");this.props.onChange(t)}}})}}d(u,"propTypes",{dashArray:n().array,menuPlacement:n().string,clearable:n().bool,value:n().string,optionRenderer:n().func,styleRendererPattern:n().node,valueRenderer:n().func,disabled:n().bool,onChange:n().func,options:n().array,creatable:n().bool,isValidNewOption:n().func,defaultStrokeWidth:n().number}),d(u,"defaultProps",{dashArray:["1","0"],menuPlacement:"top",clearable:!1,onChange:()=>{},options:[{value:"1 0"},{value:"10 50 30"},{value:"6 6"},{value:"20 20"},{value:"30 30"}],defaultStrokeWidth:4});const p=u},28815:(e,t,l)=>{"use strict";l.d(t,{Z:()=>x});var r=l(23279),n=l.n(r),a=l(666654),o=l.n(a),i=l(618446),s=l.n(i),c=l(623560),d=l.n(c),u=l(513218),p=l.n(u),m=l(747037),y=l.n(m),f=l(727418),g=l.n(f),h=l(45697),b=l.n(h),v=l(124852),k=l.n(v),E=l(804504),S=l(756435),I=l(89518),T=l(423214),C=l(662398);function w(e,t,l){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var r=l.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}class F extends k().Component{constructor(){super(...arguments),w(this,"state",{}),w(this,"onRenderToken",(e=>{const t=e.lineCount();this.inlineWidgets&&this.inlineWidgets.forEach((e=>{e&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)})),this.inlineWidgets=[],e.doc.iter(0,t,(t=>{const l=t.lineNo();e.getLineTokens(l).forEach((t=>{this.inlineWidgets=this.props.inlineWidgets.reduce(((r,n)=>{let{type:a,style:o={},active:i=(()=>!1),className:s=""}=n;if(i(t)){const n=this.getInlineWidget({className:s,token:t,onClick:()=>this.setState({inlineWidgetType:a,token:t,lineNo:l}),style:d()(o)&&o(t)||o});return e.addWidget({line:l,ch:t.start-1},n,!1),[...r,n]}return[...r]}),[...this.inlineWidgets])}))}))})),w(this,"onAutocomplete",(e=>{if(e&&e.state&&e.state.completionActive)return;const t=e.getCursor(),l=e.getTokenAt(t);if(l.string&&(o()(l.string,"-")||l.string.match(/^[.`\w@]\w*$/))&&l.string.length>0){const t=this.editor&&this.editor.getWrapperElement&&this.editor.getWrapperElement()||null;this.cm.commands.autocomplete(e,null,{completeSingle:!1,container:t})}})),w(this,"onUpdate",(()=>{this.update.cancel(),this.update()})),w(this,"getInlineWidget",(e=>{let{onClick:t=(()=>{}),token:l={},className:r="",style:n={}}=e;const a=document.createElement("div");return a.setAttribute("class",`${r} ms-style-editor-inline-widget`),g()(a.style,n),a.onclick=()=>t({...l}),a})),w(this,"getChangedCode",((e,t)=>{if("application/json"===t&&y()(e))try{return{code:JSON.parse(e)}}catch(e){return{error:e}}return{code:e}})),w(this,"getErrorMessage",(()=>this.props.error.messageId?k().createElement(E.Z,{msgId:this.props.error.messageId,msgParams:this.props.error.messageParams}):this.props.error.line?this.props.error.message:k().createElement(E.Z,{msgId:"styleeditor.genericValidationError"})))}UNSAFE_componentWillMount(){this.setState({code:p()(this.props.code)?JSON.stringify(this.props.code,null,2):this.props.code})}UNSAFE_componentWillUpdate(e){if(!s()(this.props.error,e.error)&&(this.marker&&(this.marker.clear(),this.marker=null),e.error)){const t=this.editor.lineCount(),l={line:e.error.line-1||0,ch:0},r=e.error.line?{line:t,ch:0}:this.editor.getCursor();this.marker=this.editor.markText(l,r,{className:"ms-style-editor-error"})}}render(){return k().createElement(S.Z,{className:"ms-style-editor",style:this.props.style,header:k().createElement("div",{className:"ms-style-editor-head"},this.props.loading&&k().createElement(I.Z,{className:"ms-style-editor-loader",size:20}),this.props.error&&k().createElement(T.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:k().createElement(E.Z,{msgId:"styleeditor.validationErrorTitle"}),text:this.getErrorMessage()}))},k().createElement(C.Z,{key:"style-editor",value:this.state.code,editorDidMount:(e,t,l,r)=>{this.onRenderToken(e),this.editor=e,this.cm=r,e.on("inputRead",this.onAutocomplete),this.update=n()((()=>{const{error:e,code:t}=this.getChangedCode(this.state.code,this.props.mode);e?this.props.onError(e):this.props.onChange(t)}),this.props.waitTime),this.cm.extendMode(this.props.mode,{hintProperties:this.props.hintProperties})},editorWillUnmount:e=>e.off("inputRead",this.onAutocomplete),onBeforeChange:(e,t,l)=>this.setState({code:l}),onChange:e=>{this.onRenderToken(e),this.onUpdate()},options:{theme:this.props.theme,mode:this.props.mode,lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),this.state.token&&k().createElement("div",{className:"ms-inline-widget-container"},k().createElement("div",null,k().createElement("button",{className:"btn close square-button",onClick:()=>{this.state.value&&this.editor.replaceRange(this.state.value,{line:this.state.lineNo,ch:this.state.token.start},{line:this.state.lineNo,ch:this.state.token.end}),this.setState({token:null,inlineWidgetType:null,lineNo:null,value:null})}})),k().createElement("div",null,this.props.inlineWidgets.filter((e=>{let{type:t}=e;return t===this.state.inlineWidgetType})).map((e=>{let{Widget:t}=e;return k().createElement(t,{value:this.state.value,token:this.state.token,onChange:e=>this.setState({value:e})})})))))}}w(F,"propTypes",{mode:b().string,theme:b().string,style:b().object,code:b().oneOfType([b().string,b().object]),onChange:b().func,waitTime:b().number,hintProperties:b().object,error:b().object,inlineWidgets:b().array,loading:b().bool,onError:b().func}),w(F,"defaultProps",{mode:"geocss",theme:"lesser-dark",style:{},code:"",onChange:()=>{},waitTime:1e3,hintProperties:{},inlineWidgets:[],onError:()=>{}});const x=F},393666:(e,t,l)=>{"use strict";l.d(t,{Z:()=>o});var r=l(124852),n=l.n(r);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},a.apply(this,arguments)}const o=e=>{let{type:t,patterns:l,paths:r,texts:o,backgroundColor:i="#ffffff"}=e;return n().createElement("svg",{viewBox:"0 0 200 200"},n().createElement("defs",null,l&&l.filter((e=>e.icon)).map((e=>n().createElement("pattern",{id:e.id,viewBox:"0 0 1 1",width:"15%",height:"15%"},e.icon&&n().createElement("path",e.icon)))),l&&l.filter((e=>e.image)).map((e=>n().createElement("pattern",{id:e.id,width:"100%",height:"100%"},e.image&&n().createElement("image",e.image))))),n().createElement("path",{fill:i,d:"M0 0 L200 0 L200 200 L0 200Z"}),r&&r.map((e=>{let{type:l,...r}=e;return"polygon"===(l||t)&&n().createElement("path",a({},r,{d:"M20 20 L180 20 L180 180 L20 180Z"}))||"linestring"===(l||t)&&n().createElement("path",a({},r,{fill:"none",d:"M30 160 L100 40 L170 160"}))||"point"===(l||t)&&n().createElement("path",r)})),o&&o.map((e=>{let{text:t,...l}=e;return n().createElement("text",a({x:"100",y:"100",textAnchor:"middle",alignmentBaseline:"middle"},l),t)})))}},329923:(e,t,l)=>{"use strict";l.d(t,{Z:()=>Vt});var r=l(124852),n=l.n(r),a=l(45697),o=l.n(a),i=l(23279),s=l.n(i),c=l(313311),d=l.n(c),u=l(406557),p=l.n(u),m=l(8204),y=l(89518),f=l(701469),g=l.n(f),h=l(630294),b=l(513218),v=l.n(b),k=l(957557),E=l.n(k),S=l(414293),I=l.n(S),T=l(807654),C=l.n(T),w=l(147814),F=l(981537),x=l(894449),O=l(392021),P=l(317723),L=l(804504);const D=function(e){let{children:t,label:l,tools:r,divider:a,invalid:o,warning:i,disabled:s}=e;if(a)return n().createElement("div",{className:"ms-symbolizer-field-divider"});const c=i?" ms-symbolizer-value-warning":"",d=o?" ms-symbolizer-value-invalid":"",u=s?" ms-symbolizer-field-disabled":"";return n().createElement("div",{className:"ms-symbolizer-field"+u},n().createElement("div",{className:"ms-symbolizer-label"},n().createElement(L.Z,{msgId:l})),n().createElement("div",{className:"ms-symbolizer-value"+d+c,onDragStart:e=>{e.stopPropagation(),e.preventDefault()},draggable:!0},t,n().createElement("div",{className:"ms-symbolizer-tools"},r)))};var A=l(424471),N=l(393666);const R=[{value:"Circle",label:"styleeditor.circle",preview:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Square",label:"styleeditor.square",preview:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Triangle",label:"styleeditor.triangle",preview:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Star",label:"styleeditor.star",preview:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Cross",label:"styleeditor.cross",preview:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"X",label:"styleeditor.x",preview:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"shape://vertline",label:"styleeditor.verticalLine",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://horline",label:"styleeditor.horizontalLine",preview:{type:"point",paths:[{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://slash",label:"styleeditor.slash",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://backslash",label:"styleeditor.backslash",preview:{type:"point",paths:[{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://dot",label:"styleeditor.dot",preview:{type:"point",paths:[{d:"M 95,100 105,100 Z",stroke:"#333333",strokeWidth:10,fill:"none"}]}},{value:"shape://plus",label:"styleeditor.plus",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://times",label:"styleeditor.times",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://oarrow",label:"styleeditor.openArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://carrow",label:"styleeditor.closedArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}}];var Z=l(36549),z=l(23888);const W=(0,Z.Z)(z.Z),M=function(e){let{value:t,config:l={},onChange:r=(()=>{})}=e;const{options:a=R}=l,o=a.find((e=>e.value===t));return n().createElement(A.Z,{content:n().createElement("div",{className:"ms-mark-list"},n().createElement("ul",null,a.map((e=>n().createElement("li",{key:e.value},n().createElement(W,{className:"ms-mark-preview",active:e.value===t,onClick:()=>r(e.value)},n().createElement(N.Z,e.preview)))))))},n().createElement(W,{className:"ms-mark-preview"},o&&n().createElement(N.Z,o.preview)))};var V=l(743129);const $=function(e){let{label:t="styleeditor.band",value:l,bands:r,onChange:a,enhancementType:o}=e;return n().createElement(n().Fragment,null,n().createElement(D,{label:t},n().createElement(V.ZP,{clearable:!1,options:r,value:l,onChange:e=>a("band",e.value)})),n().createElement(D,{label:"styleeditor.contrastEnhancement"},n().createElement(V.ZP,{clearable:!1,options:[{label:n().createElement(L.Z,{msgId:"styleeditor.none"}),value:"none"},{label:n().createElement(L.Z,{msgId:"styleeditor.normalize"}),value:"normalize"},{label:n().createElement(L.Z,{msgId:"styleeditor.histogram"}),value:"histogram"}],value:o||"none",onChange:e=>{const t="none"===e.value?void 0:e.value;a("enhancementType",t)}})))};var j=l(486234),U=l(847911),B=l(644825);function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},G.apply(this,arguments)}const q=(0,U.Z)("onChange","value")((0,j.Z)("placeholder")((function(e){return n().createElement(h.FormControl,G({},e,{onChange:t=>e.onChange(t.target.value)}))}))),_=(0,Z.Z)(h.Glyphicon);function K(e){let{value:t,onChange:l,onLoad:a}=e;const o=(0,r.useRef)(!0);(0,r.useEffect)((()=>(o.current=!0,()=>{o.current=!1})),[]);const[i,s]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!0),[u,p]=(0,r.useState)(t),m=(e,t)=>{p(e),s(!0),d(!1),(0,B.ZF)(e).then((t=>{if(o.current){let l=!1;t.isBase64&&(l={type:"warning",messageId:"imageSrcNotSupportedBase64Image"}),d(l),s(!1),a(l,e)}})).catch((t=>{if(o.current){const l=t.isBase64||"imageSrcLoadError"!==t.messageId?{type:"error",messageId:t.messageId}:{type:"warning",messageId:t.messageId};d(l),s(!1),a(l,e)}})),t&&l(e)},f=(0,r.useRef)(t);return(0,r.useEffect)((()=>{m(f.current)}),[]),n().createElement("div",{className:"ms-style-editor-icon-input",style:{position:"relative",display:"flex",alignItems:"center"}},n().createElement(h.FormGroup,{style:{flex:1}},n().createElement(q,{style:{paddingRight:26},placeholder:"styleeditor.placeholderEnterImageUrl",value:t,debounceTime:300,onChange:e=>m(e,!0)})),n().createElement("div",{style:{position:"absolute",minWidth:26,minHeight:26,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},u&&!c&&!i&&n().createElement("div",{className:"ms-style-editor-icon-input-image",style:{position:"absolute",margin:2,width:"calc(100% - 2px)",height:"calc(100% - 2px)",backgroundImage:`url(${u})`,backgroundPosition:"center",backgroundSize:"contain"}}),c&&n().createElement(_,{glyph:"exclamation-sign",tooltipId:`styleeditor.${c.messageId}`}),i&&n().createElement(y.Z,{size:20})))}K.propTypes={value:o().bool,onChange:o().node,onLoad:o().object,onError:o().object},K.defaultProps={value:"",onChange:()=>{},onLoad:()=>{},onError:()=>{}};const Y=K;var H=l(959956),J=l(694149);const X=(0,Z.Z)(h.Glyphicon);function Q(e){let{disabled:t,value:l,onChange:a=(()=>{}),onError:o=(()=>{})}=e;const[i,s]=(0,r.useState)(l),c=(0,H.Nw)(i);return(0,r.useEffect)((()=>{o(!c)}),[c]),n().createElement("div",{className:"ms-style-editor-model-input",style:{position:"relative",display:"flex",alignItems:"center"}},n().createElement(h.FormGroup,{style:{flex:1}},n().createElement(J.Z,{disabled:t,placeholder:"styleeditor.placeholderEnterModelUrl",style:{paddingRight:26},value:i,debounceTime:300,onChange:e=>(e=>{s(e),(0,H.Nw)(e)&&a(e)})(e)})),n().createElement("div",{style:{position:"absolute",minWidth:26,minHeight:26,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},c?i?n().createElement(X,{glyph:"model"}):null:n().createElement(X,{glyph:"exclamation-sign",tooltipId:"styleeditor.invalidModelUrl"})))}Q.propTypes={value:o().bool,onChange:o().node},Q.defaultProps={value:"",onChange:()=>{}};const ee=Q;var te=l(984596),le=l.n(te);function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},re.apply(this,arguments)}const ne=(0,j.Z)(["placeholder","noResultsText"])(V.ZP),ae=(0,j.Z)(["placeholder","noResultsText"])(V.ZP.Creatable),oe=function(e){let{label:t,value:l,config:{getOptions:a=(()=>[]),selectProps:o={}}={},onChange:i,disabled:s,...c}=e;const{creatable:d,clearable:u=!1,multi:p}=o;function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const l=e.map((e=>e.value));return t?.value&&-1===l.indexOf(t.value)?[t,...e]:e}function y(e){return l?le()(l).map((e=>({value:e,label:e}))).reduce(m,e):e}const f=a(c),[g,b]=(0,r.useState)(y(f));(0,r.useEffect)((()=>{b(y(f))}),[JSON.stringify(f)]);const v=d?ae:ne;return n().createElement(v,re({disabled:s,clearable:u,placeholder:"styleeditor.selectPlaceholder",noResultsText:"styleeditor.noResultsSelectInput"},o,{options:g.map((e=>({...e,label:e.labelId?n().createElement(n().Fragment,null,n().createElement(L.Z,{msgId:e.labelId}),e.glyphId&&n().createElement(h.Glyphicon,{style:{marginLeft:10},glyph:e.glyphId})):e.label}))),value:l,onChange:e=>p?i(e.length>0?e.map((e=>e.value)):void 0):(b(m(g,e)),i(e.value))}))},ie=(0,j.Z)(["placeholder","noResultsText"])(V.ZP),se=function(e){let{label:t,value:l,config:{initialOptionValue:r,getSelectOptions:a=(()=>[]),selectClearable:o=!1,fallbackValue:i}={},onChange:s,disabled:c,...d}=e;const u=a(d).map((e=>({...e,label:e.labelId?n().createElement(L.Z,{msgId:e.labelId}):e.label}))),p="constant"===l?.type?"constant":"attribute";return n().createElement("div",{className:"ms-style-editor-multi-input"},"constant"===l?.type&&n().createElement(h.FormGroup,null,n().createElement(J.Z,{type:"number",disabled:c,fallbackValue:i,value:l?.value,placeholder:"styleeditor.placeholderInput",onChange:e=>{s({...l,value:e})}})),"constant"!==l?.type&&n().createElement(h.FormGroup,null,n().createElement(ie,{disabled:c,clearable:o,options:u,value:"initial"===l?.type?r:l?.name,onChange:e=>{e.value!==r?s({type:"attribute",name:e.value}):s({type:"initial"})}})),n().createElement(h.DropdownButton,{className:"square-button-md no-border",noCaret:!0,pullRight:!0,disabled:c,title:n().createElement(h.Glyphicon,{glyph:"option-vertical"})},[{labelId:"styleeditor.constantValue",value:"constant"},{labelId:"styleeditor.attributeValue",value:"attribute"}].map((e=>n().createElement(h.MenuItem,{key:e.value,active:p===e.value,onClick:()=>{return t=e.value,void(l.type!==t&&s("attribute"===t&&r?{type:"initial"}:{type:t}));var t}},n().createElement(L.Z,{msgId:e.labelId}))))))};function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},ce.apply(this,arguments)}const de={color:e=>{let{label:t,config:l={},value:a,onChange:o=(()=>{}),disableAlpha:i,format:s,disabled:c}=e;const d=(0,r.useRef)({value:a});if(d.current={value:a},"pattern"==(v()(a)&&a.kind?"pattern":"solid")){const{params:e={}}=l?.getGroupParams(a.kind)||{},t=l?.getGroupConfig(a.kind)||{},r=a;return n().createElement(n().Fragment,null,n().createElement(ue,{properties:r,params:t.omittedKeys?E()(e,t.omittedKeys):e,config:{disableAlpha:t.disableAlpha},onChange:e=>o({...d.current.value,...e}),format:s}),n().createElement(D,{divider:!0}))}return n().createElement(D,{label:t,disabled:c},n().createElement(w.Z,{color:a,line:l.stroke,disabled:c,disableAlpha:l.disableAlpha||i,onChangeColor:e=>e&&o(e)}))},slider:e=>{let{label:t,value:l,disabled:r,config:a={},onChange:o=(()=>{})}=e;return n().createElement(D,{label:t,disabled:r},n().createElement("div",{className:"mapstore-slider with-tooltip",onClick:e=>{e.stopPropagation()}},n().createElement(F.Z,{start:[l],disabled:r,tooltips:[!0],format:a.format,range:a.range||{min:0,max:10},onChange:e=>o(e)})))},input:e=>{let{label:t,value:l,config:r={},onChange:a=(()=>{}),disabled:o,placeholderId:i}=e;return n().createElement(D,{label:t,disabled:o},n().createElement(h.FormGroup,null,n().createElement(h.InputGroup,{style:r?.maxWidth?{maxWidth:r?.maxWidth}:{}},n().createElement(J.Z,{type:r.type||"text",value:l,disabled:o,min:r.min,max:r.max,fallbackValue:r.fallbackValue,placeholder:i,style:{zIndex:0},onChange:e=>a(e)}),r.uom&&n().createElement(h.InputGroup.Addon,null,r.uom))))},multiInput:e=>n().createElement(D,{label:e.label,disabled:e.disabled},n().createElement(se,e)),toolbar:e=>{let{label:t,value:l,onChange:r=(()=>{}),config:a={},disabled:o}=e;return n().createElement(D,{label:t,disabled:o},n().createElement(m.Z,{btnDefaultProps:{className:"no-border",bsSize:"xs"},buttons:(a.options||[]).map((e=>{let{glyph:t,label:a,labelId:i,tooltipId:s,value:c}=e;return{glyph:t,tooltipId:s,disabled:o,text:i?n().createElement(L.Z,{msgId:i}):a,...c===l&&{bsStyle:"primary"},onClick:()=>r(l===c?void 0:c)}}))}))},mark:e=>{let{label:t,...l}=e;return n().createElement(D,{label:t},n().createElement(M,l))},image:e=>{let{label:t,value:l,config:{},onChange:a}=e;const[o,i]=(0,r.useState)(!1),s=v()(l)?l.src:l;return n().createElement(D,{label:t,invalid:!("error"!==o?.type),warning:!("warning"!==o?.type)},n().createElement(Y,{label:t,value:s,onChange:e=>{a(e),i(!1)},onLoad:(e,t)=>{i(e),e&&a({src:t,errorId:e.messageId})}}))},model:e=>{let{label:t,value:l,onChange:a,disabled:o}=e;const[i,s]=(0,r.useState)(!1);return n().createElement(D,{label:t,invalid:i,disabled:o},n().createElement(ee,{disabled:o,label:t,value:l,onChange:a,onError:s}))},select:e=>{const{label:t,value:l,config:{isValid:r},visible:a=!0}=e;if(!a)return null;const o=!r||r({value:l});return n().createElement(D,{label:t,invalid:!o},n().createElement(oe,e))},colorRamp:e=>{let{label:t,value:l,config:{samples:r=5,getOptions:a=(()=>[]),rampFunction:o=(e=>{let{colors:t}=e;return t})},onChange:i,...s}=e;const c=a(s);return n().createElement(D,{label:t},n().createElement(x.Z,{items:c,rampFunction:o,samples:r,value:{name:l},onChange:e=>i(e.name)}))},colorMap:e=>{let{value:t,onChange:l}=e;return n().createElement("div",{onDragStart:e=>{e.stopPropagation(),e.preventDefault()},draggable:!0},n().createElement(P.Z,{classification:t,onUpdateClasses:(e,t)=>l({classification:e,type:t})}))},channel:e=>{let{value:t,onChange:l,bands:r}=e;const{channelSelection:a}=t,o=a?a.grayChannel?"gray":"rgb":"auto",i=(r||[]).map((e=>({label:e,value:e})));if("rgb"===o)return Object.keys(a).map((e=>{const r=a[e]?.sourceChannelName,o=a[e]?.contrastEnhancement;return n().createElement(n().Fragment,null,n().createElement($,{key:e,value:r,bands:i,label:"styleeditor."+e,enhancementType:o?.enhancementType||"none",onChange:(r,n)=>"band"===r?l({contrastEnhancement:{},channelSelection:{...t.channelSelection,[e]:{...t.channelSelection[e],sourceChannelName:n}}}):"enhancementType"===r?l({contrastEnhancement:{},channelSelection:{...t.channelSelection,[e]:{...t.channelSelection[e],contrastEnhancement:{...a[e].contrastEnhancement,enhancementType:n}}}}):null}),n().createElement(D,{key:e+"-divider",divider:!0}))}));const s=void 0===a?.grayChannel?.sourceChannelName?"auto":a?.grayChannel?.sourceChannelName,c="auto"===o?t.contrastEnhancement:a?.grayChannel?.contrastEnhancement;return n().createElement($,{label:"styleeditor.grayChannel",value:s,bands:[{label:n().createElement(L.Z,{msgId:"styleeditor.channelAuto"}),value:"auto"},...i],enhancementType:c?.enhancementType||"none",onChange:(e,r)=>"band"===e?l("auto"===r?{...t,channelSelection:void 0}:{contrastEnhancement:{},channelSelection:{grayChannel:{contrastEnhancement:{},...a?.grayChannel,sourceChannelName:r}}}):"enhancementType"===e?l("auto"===o?{channelSelection:void 0,contrastEnhancement:{...t.contrastEnhancement,enhancementType:r}}:{contrastEnhancement:{},channelSelection:Object.keys(a).reduce(((e,t)=>({...e,[t]:{...a[t],contrastEnhancement:{...a[t].contrastEnhancement,enhancementType:r}}})),{})}):null})},dash:e=>{let{label:t,value:l,onChange:r,config:{options:a}}=e;return n().createElement(D,{label:t},n().createElement(O.Z,{dashArray:l,onChange:r,options:a,defaultStrokeWidth:2,isValidNewOption:e=>!!e.label&&!e.label.split(" ").find((e=>C()(parseFloat(e)))),creatable:!0}))}};function ue(e){let{properties:t,params:l,config:a,onChange:o,format:i}=e;const s=(0,r.useRef)({properties:t});return s.current={properties:t},n().createElement(n().Fragment,null,Object.keys(l).map((e=>{const{type:r,setValue:c,getValue:d,isDisabled:u,config:p,label:m,key:y,isVisible:f}=l[e]||{},g=y||e,h=de[r],b=c&&c(t[g],s.current.properties);return h&&n().createElement(h,ce({},a,{key:g,label:m||g,config:p,format:i,visible:f&&f(t[g],s.current.properties,i),disabled:u&&u(t[g],s.current.properties,a),value:I()(b)?t[g]:b,onChange:e=>o(d&&d(e,s.current.properties)||e)}))})))}const pe=ue;var me=l(423570),ye=l.n(me),fe=l(651493);const ge=(0,Z.Z)(z.Z),he=e=>{let{filterObj:t={groupFields:[{id:1,logic:"OR",index:0}]},attributes:l=[],format:r,groupLevels:a=0,onChange:o=(()=>{})}=e;const{groupFields:i,filterFields:s}=t;return n().createElement("div",{className:"ms-style-rule-filter"},n().createElement(fe.Z,{textFieldTooltipMessageId:{css:"queryform.attributefilter.tooltipTextFieldCSS","3dtiles":"queryform.attributefilter.tooltipTextField3DTiles"}[r],attributes:l,filterFields:s,groupFields:i,autocompleteEnabled:!1,groupLevels:a,withContainer:!1,listOperators:["="],stringOperators:["=","<>","like","isNull"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>"],logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"}],actions:{onAddGroupField:(e,t)=>{const l={id:(new Date).getTime(),logic:"OR",groupId:e,index:t+1};o({filterFields:s,groupFields:i?[...i,l]:[l]})},onAddFilterField:e=>{const t={rowId:(new Date).getTime(),groupId:e,attribute:null,operator:"",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};o({filterFields:s?[...s,t]:[t],groupFields:i})},onRemoveFilterField:e=>{o({filterFields:s.filter((t=>t.rowId!==e)),groupFields:i})},onUpdateFilterField:function(e,t,l,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};o({filterFields:s.map((a=>a.rowId===e?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l={...e,[t.fieldName]:t.fieldValue,type:t.fieldType,fieldOptions:{...e.fieldOptions,currentPage:void 0===t.fieldOptions.currentPage?1:t.fieldOptions.currentPage}};return"attribute"===t.fieldName?{...l,value:"string"===t.fieldType?"":null,operator:""}:"operator"===t.fieldName?{...l,value:null}:l}(a,{rowId:e,fieldName:t,fieldValue:l,fieldType:r,fieldOptions:n}):a)),groupFields:i})},onUpdateExceptionField:(e,t)=>{o({filterFields:s.map((l=>l.rowId===e?{...l,exception:t}:l)),groupFields:i})},onUpdateLogicCombo:(e,t)=>{o({filterFields:s,groupFields:i.map((l=>l.id===e?{...l,logic:t}:l))})},onRemoveGroupField:e=>{o({filterFields:s.filter((t=>t.groupId!==e)),groupFields:i.filter((t=>t.id!==e))})},onChangeCascadingValue:()=>{}}}))};function be(e){let{value:t,hide:l,attributes:r,format:a,onChange:o,placement:i="right"}=e;if(l||!r||0===r.length)return null;const s=t?.filterFields?.length>0;return n().createElement(A.Z,{placement:i,content:n().createElement(he,{filterObj:t,attributes:r,format:a,onChange:e=>o({filter:e})})},n().createElement(ge,{className:"square-button-md no-border",active:s,tooltipId:"styleeditor.openFilterBuilder"},n().createElement(h.Glyphicon,{glyph:"filter"})))}const ve=(0,j.Z)(["placeholder","noResultsText"])(V.ZP.Creatable),ke=(0,Z.Z)(z.Z);function Ee(e){let{label:t,currentZoom:l}=e;return n().createElement("span",null,t,l&&n().createElement(n().Fragment,null,"",n().createElement(h.Glyphicon,{glyph:"arrow-left"})))}function Se(e){let{label:t,value:l,options:r,isValidNewOption:a,onChange:o}=e;return n().createElement(D,{label:t},n().createElement(ve,{placeholder:"styleeditor.selectScale",noResultsText:"styleeditor.noResultScales",value:l,options:r,optionRenderer:Ee,valueRenderer:Ee,isValidNewOption:e=>{if(e.label){const t=parseFloat(e.label);return!C()(t)&&a(t)}return!1},onChange:e=>{const t=e?.value&&parseFloat(e.value);o(C()(t)?void 0:t)}}))}function Ie(e){let{value:t,zoom:l,scales:a=[],onChange:o}=e;function i(e,t){const l=e.map((e=>e.value));return t&&-1===l.indexOf(t)?[{value:t},...e].sort(((e,t)=>e.value>t.value?-1:1)):e}const[s,c]=(0,r.useState)(function(e){const l=e.map(((e,t)=>({value:e,zoom:t}))),r=[t.min,t.max].filter((e=>void 0!==e));return 0===r.length?l:r.reduce(i,l)}(a));return n().createElement("div",{className:"ms-style-rule-scale"},n().createElement(Se,{label:"styleeditor.maxScaleDenominator",value:t.max,options:s.map((e=>({value:e.value,label:"1 : "+e.value,currentZoom:void 0!==l&&l===e.zoom,disabled:t.min&&e.value<=t.min}))),isValidNewOption:e=>e>=t.min,onChange:e=>{o({...t,max:e}),c(i(s,e))}}),n().createElement(Se,{label:"styleeditor.minScaleDenominator",value:t.min,options:s.map((e=>({value:e.value,label:"1 : "+e.value,currentZoom:void 0!==l&&l===e.zoom,disabled:t.max&&e.value>=t.max}))),isValidNewOption:e=>e<=t.max,onChange:e=>{o({...t,min:e}),c(i(s,e))}}))}function Te(e){let{value:t={},scales:l=[],zoom:r,hide:a,onChange:o,placement:i="right"}=e;return a?null:n().createElement(A.Z,{placement:i,content:n().createElement(Ie,{value:t,zoom:r,scales:l,onChange:e=>o({scaleDenominator:e})})},n().createElement(ke,{className:"square-button-md no-border",tooltipId:"styleeditor.openScaleDenominator",active:void 0!==t.min||void 0!==t.max},n().createElement(h.Glyphicon,{glyph:"1-ruler"})))}const Ce=e=>{let{ruleBlock:t,symbolizerBlock:l,kind:r}=e;return"Raster"!==r?[{value:"Simple",labelId:"styleeditor.simpleStyle",onSelect:e=>{let{ruleId:t,defaultProperties:l}=e;return{ruleId:t,name:"",symbolizers:[{...l,symbolizerId:ye()()}]}}},{value:"Classification",labelId:"styleeditor.classificationStyle",onSelect:e=>{let{ruleId:l,symbolizerKind:r,defaultProperties:n}=e;return{...n,...t.Classification.defaultProperties,ruleId:l,symbolizerKind:r}}},{value:"Mark",labelId:"styleeditor.patternMarkStyle",isVisible:e=>{let{graphicKey:t}=e;return!!t},onSelect:e=>{let{ruleId:t,defaultProperties:r,graphicKey:n}=e;return{ruleId:t,name:"",symbolizers:[{...r,symbolizerId:ye()(),fill:void 0,[n]:{...l.Mark.defaultProperties}}]}}},{value:"Icon",labelId:"styleeditor.patternIconStyle",isVisible:e=>{let{graphicKey:t}=e;return!!t},onSelect:e=>{let{ruleId:t,defaultProperties:r,graphicKey:n}=e;return{ruleId:t,name:"",symbolizers:[{...r,symbolizerId:ye()(),fill:void 0,[n]:{...l.Icon.defaultProperties}}]}}}]:[{value:"Gray",labelId:"styleeditor.singleBand",onSelect:e=>{let{ruleId:t}=e;return{ruleId:t,name:"",symbolizers:[{...l.Raster.defaultProperties,symbolizerId:ye()()}]}}},{value:"RGB",labelId:"styleeditor.rgbaBands",onSelect:e=>{let{ruleId:t}=e;return{ruleId:t,name:"",symbolizers:[{...l.Raster.defaultProperties,channelSelection:{redChannel:{sourceChannelName:void 0,contrastEnhancement:{}},greenChannel:{sourceChannelName:void 0,contrastEnhancement:{}},blueChannel:{sourceChannelName:void 0,contrastEnhancement:{}}},symbolizerId:ye()()}]}}},{value:"PseudoColor",labelId:"styleeditor.pseudoColor",onSelect:e=>{let{ruleId:l}=e;return{...t.Raster.defaultProperties,ruleId:l}}}]},we=e=>{let{ruleKind:t,graphic:l,symbolizerKind:r,channelSelection:n}=e;return"Raster"===t?"PseudoColor":"Raster"===r?n?.redChannel?"RGB":"Gray":void 0!==t?t:l?.kind?l?.kind:"Simple"};function Fe(e){let{ruleKind:t,symbolizerKind:l,ruleId:r,graphic:a,channelSelection:o,hide:i,ruleBlock:s,symbolizerBlock:c,getSelected:d=we,getOptions:u=Ce,onSelect:p}=e;const m=u({ruleBlock:s,symbolizerBlock:c,kind:l}),{defaultProperties:y,params:f={}}=l?c[l]:{},g=f?.color?.config?.graphicKey,b=d({ruleKind:t,symbolizerKind:l,graphic:a,channelSelection:o});return i?null:n().createElement(h.DropdownButton,{className:"square-button-md no-border",noCaret:!0,pullRight:!0,title:n().createElement(h.Glyphicon,{glyph:"option-vertical"})},m.map((e=>!e.isVisible||e.isVisible({graphicKey:g})?n().createElement(h.MenuItem,{key:e.value,active:b===e.value,onClick:()=>{return n=e.value,a=e.onSelect({ruleId:r,ruleKind:t,symbolizerKind:l,defaultProperties:y,graphicKey:g}),n===b?null:p(a);var n,a}},n().createElement(L.Z,{msgId:e.labelId})):null)))}const xe=function(e){let{className:t,glyph:l,tools:r,children:a}=e;const o=t?" "+t:"";return n().createElement("li",{className:`ms-symbolizer${o}`},n().createElement("div",{className:"ms-symbolizer-info"},l&&n().createElement(h.Glyphicon,{glyph:l}),n().createElement("div",{className:"ms-symbolizer-tools"},r)),a)};var Oe=l(623560),Pe=l.n(Oe);const Le=function(e){let{ruleId:t,glyph:l,params:a,kind:o,symbolizerKind:i,classificationType:s="classificationVector",attributes:c=[],onUpdate:d,onReplace:u,methods:p,getColors:m=(()=>{}),ruleBlock:y={},symbolizerBlock:f={},bands:g,config:h,...b}=e;const{ramp:v,method:k,classification:E,attribute:S,intervals:I,intervalsForUnique:T=h?.intervalsForUnique||100,reverse:C,continuous:w,format:F}=b,x=(0,r.useRef)();x.current={ruleId:t,intervals:I,intervalsForUnique:T,method:k,attribute:S,reverse:C,ramp:v,continuous:w,classification:E};const O=a.reduce(((e,t)=>Pe()(t)?{...e,...t(i)}:{...e,...t}),{}),{glyph:P}=f[i]||{};return n().createElement(xe,{key:"Classification",glyph:P||l,tools:n().createElement(Fe,{ruleKind:o,symbolizerKind:i,ruleId:t,onSelect:u,ruleBlock:y,symbolizerBlock:f})},n().createElement(pe,{properties:b,format:F,config:{attributes:c,methods:p,getColors:function(){const e="custom"===v&&E.length>0&&{name:"custom",colors:E.map((e=>e.color))},t=m(void 0,void 0,5,e);return t?t.map((e=>{let{name:t,...l}=e;return{label:t?`global.colors.${t}`:void 0,name:t,...l}})):[]},bands:g,method:k,methodEdit:b?.methodEdit},params:O,onChange:e=>d({...x.current,type:s,values:e})}))};var De=l(264721),Ae=l.n(De),Ne=l(618446),Re=l.n(Ne),Ze=l(717621),ze=l.n(Ze);const We=e=>{let{key:t="color",opacityKey:l="opacity",graphicKey:r,label:n="Fill",stroke:a,pattern:o,disableAlpha:i,getGroupParams:s,getGroupConfig:c,isDisabled:d}=e;return{type:"color",label:n,config:{stroke:a,pattern:o,disableAlpha:i,getGroupParams:s,getGroupConfig:c,graphicKey:r},setValue:(e,t)=>{if(o&&t[r]?.kind)return t[r];const n=I()(t[l])?1:t[l];return ze()(e).setAlpha(n).toRgb()},getValue:e=>{if(o&&v()(e)&&e.kind)return{[r]:e,[t]:void 0,[l]:void 0};const{a:n,...a}=e||{};return{[t]:ze()({...a,a:1}).toHexString(),[l]:n,...o&&{[r]:void 0}}},isDisabled:d}},Me=e=>{let{key:t="width",label:l="Width",fallbackValue:r=1,dasharrayKey:n="dasharray",isDisabled:a}=e;return{type:"input",label:l,config:{min:0,fallbackValue:r,type:"number",maxWidth:105,uom:"px"},setValue:e=>void 0===e?r:parseFloat(e),getValue:(e,l)=>{const a=void 0===e?r:parseFloat(e),o=l[n],i=l[t];return{[t]:a,...o&&{[n]:a?o.map((e=>Math.round(e/i*a))):void 0}}},isDisabled:a}},Ve=e=>{let{key:t="dasharray",label:l="Dash array"}=e;return{type:"dash",label:l,config:{options:[{value:"0"},{value:"1 4"},{value:"1 12"},{value:"8 8"},{value:"8 16"},{value:"8 8 1 8"},{value:"8 8 1 4 1 8"}]},setValue:(e,t)=>{const l=void 0===t.width?1:t.width;return void 0!==e?e.map((e=>Math.round(e/l))):[0]},getValue:(e,l)=>{if(Re()(e,["0"]))return{[t]:void 0};const r=void 0===l.width?1:l.width,n=!(e||[]).find((e=>C()(parseFloat(e))));return{[t]:void 0!==e&&n?e.map((e=>parseFloat(e)*r)):void 0}}}},$e=e=>{let{key:t="cap",label:l="Line cap",isDisabled:r}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.lineCapButt",value:"butt"},{labelId:"styleeditor.lineCapRound",value:"round"},{labelId:"styleeditor.lineCapSquare",value:"square"}]},getValue:e=>({[t]:e}),isDisabled:r}},je=e=>{let{key:t="join",label:l="Line join",isDisabled:r}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.lineJoinBevel",value:"bevel"},{labelId:"styleeditor.lineJoinRound",value:"round"},{labelId:"styleeditor.lineJoinMiter",value:"miter"}]},getValue:e=>({[t]:e}),isDisabled:r}},Ue=e=>{let{key:t="colorMapType",label:l="Color map type",isDisabled:r}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.colorMapType.ramp",value:"ramp"},{labelId:"styleeditor.colorMapType.intervals",value:"intervals"},{labelId:"styleeditor.colorMapType.values",value:"values"}]},getValue:e=>({[t]:e}),isDisabled:r}},Be=e=>{let{key:t="radius",label:l="Radius",range:r,fallbackValue:n=1}=e;return{type:"input",label:l,config:{fallbackValue:n,type:"number",maxWidth:105,uom:"px",min:r?.min??0,max:r?.max},setValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return void 0===e?n:parseFloat(e)},getValue:e=>({[t]:void 0===e?n:parseFloat(e)})}},Ge=e=>{let{key:t="scale",label:l="Scale",min:r,max:n,fallbackValue:a,maxWidth:o,uom:i,isDisabled:s}=e;return{type:"input",label:l,config:{min:r,max:n,fallbackValue:a,type:"number",maxWidth:o,uom:i},setValue:e=>void 0===e?a:parseFloat(e),getValue:e=>({[t]:void 0===e?void 0:parseFloat(e)}),isDisabled:s}},qe=e=>{let{key:t="opacity",label:l="Opacity"}=e;return{type:"slider",label:l,config:{range:{min:0,max:1}},setValue:function(){return parseFloat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)},getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const l=e[0]&&e[0].split(" px")[0];return{[t]:parseFloat(l)}}}},_e=e=>{let{key:t="offset",label:l="",axis:r="",fallbackValue:n=0}=e;return{key:t,type:"input",label:l,config:{fallbackValue:n,type:"number",maxWidth:105,uom:"px"},setValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t="y"===r?parseFloat(e[1]):parseFloat(e[0]);return void 0===t?n:parseFloat(t)},getValue:(e,l)=>{const a=void 0===e?n:parseFloat(e),o=l[t]||[0,0];return{[t]:"y"===r?[o[0],a]:[a,o[1]]}}}},Ke=e=>{let{key:t="rotate",label:l="Rotation (deg)",fallbackValue:r=0}=e;return{type:"input",label:l,config:{fallbackValue:r,type:"number",maxWidth:105,uom:""},setValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return void 0===e?r:parseFloat(e)},getValue:e=>({[t]:void 0===e?r:parseFloat(e)})}},Ye=e=>{let{key:t="msClampToGround",label:l="Clamp to ground",isDisabled:r}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.boolTrue",value:!0},{labelId:"styleeditor.boolFalse",value:!1}]},getValue:e=>({[t]:e}),setValue:e=>!!e,isDisabled:r}},He=e=>{let{key:t="msBringToFront",label:l="Arrange",isDisabled:r}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.boolTrue",value:!0},{labelId:"styleeditor.boolFalse",value:!1}]},getValue:e=>({[t]:e}),setValue:e=>!!e,isDisabled:r}},Je=e=>{let{key:t="msClassificationType",label:l="PolygonType",isDisabled:r}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.3dTile",value:"3d"},{labelId:"styleeditor.terrain",value:"terrain"},{labelId:"styleeditor.both",value:"both"}]},getValue:e=>({[t]:e}),isDisabled:r}},Xe=e=>{let{key:t="msHeightReference",label:l="Height reference from ground",isDisabled:r}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.none",value:"none"},{labelId:"styleeditor.relative",value:"relative"},{labelId:"styleeditor.clamp",value:"clamp"}]},getValue:e=>({[t]:e,..."clamp"===e&&{msHeight:void 0}}),isDisabled:r}},Qe=e=>{let{label:t,key:l="wellKnownName"}=e;return{type:"mark",label:t,getValue:function(){return{[l]:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}}},et=e=>{let{label:t,key:l="image"}=e;return{type:"image",label:t,config:{},getValue:function(){return{[l]:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}}},tt=e=>{let{label:t,key:l="model",isDisabled:r}=e;return{type:"model",label:t,config:{},getValue:function(){return{[l]:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}},isDisabled:r}},lt=e=>{let{label:t,key:l="fontStyle"}=e;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontStyleNormal",value:"normal"},{labelId:"styleeditor.fontStyleItalic",value:"italic"}]},getValue:function(){return{[l]:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}}},rt=e=>{let{label:t,key:l="fontWeight"}=e;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontWeightNormal",value:"normal"},{labelId:"styleeditor.fontWeightBold",value:"bold"}]},getValue:function(){return{[l]:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}}},nt=e=>{let{key:t="label",label:l,isDisabled:r}=e;return{type:"toolbar",label:l,config:{options:[{labelId:"styleeditor.boolTrue",value:!0},{labelId:"styleeditor.boolFalse",value:!1}]},isDisabled:r,getValue:e=>({[t]:e})}},at=e=>{let{key:t="intervals",label:l,isDisabled:r=((e,t)=>"customInterval"===t?.method)}=e;return{type:"slider",label:l,config:{range:{min:2,max:25},format:{from:e=>Math.round(e),to:e=>Math.round(e)}},isDisabled:r,setValue:function(){return parseFloat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:2)},getValue:function(){return{[t]:parseFloat((arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])[0])}}}},ot=e=>{let{label:t,key:l="",getOptions:r=(()=>[]),selectProps:n,isValid:a,isDisabled:o,isVisible:i}=e;return{type:"select",label:t,config:{getOptions:r,selectProps:n,isValid:a},getValue:e=>({[l]:e}),isDisabled:o,isVisible:i}},it=e=>{let{label:t,key:l="",initialOptionValue:r,getSelectOptions:n=(()=>[]),isDisabled:a,isVisible:o,fallbackValue:i=0}=e;return{type:"multiInput",label:t,config:{initialOptionValue:r,getSelectOptions:n,fallbackValue:i},setValue:e=>void 0===e?{type:"initial"}:v()(e)?e:{type:"constant",value:void 0===e?i:parseFloat(e)},getValue:e=>"initial"===e?.type?{[l]:void 0}:"constant"===e?.type?{[l]:void 0===e?.value?i:parseFloat(e.value)}:{[l]:e},isDisabled:a,isVisible:o}},st=e=>{let{label:t,key:l="",getOptions:r=(()=>[])}=e;return{type:"colorRamp",label:t,config:{getOptions:r},getValue:function(){return{[l]:arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}}},ct=e=>{let{label:t,key:l=""}=e;return{type:"colorMap",label:t,getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const{classification:r,type:n}=e,a="customInterval"===t.method,o="interval"===n||a,i="color"===n||"custom"===t.ramp;return{[l]:r,...o&&{method:"customInterval",methodEdit:a?t.methodEdit:t.method},...i&&{ramp:"custom"}}}}},dt=e=>{let{label:t}=e;return{type:"channel",label:t,setValue:(e,t)=>({channelSelection:t.channelSelection,contrastEnhancement:t.contrastEnhancement}),getValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{channelSelection:e.channelSelection,contrastEnhancement:e.contrastEnhancement}}}},ut=e=>{let{label:t="styleeditor.clampToGround",isDisabled:l}=e;return{msClampToGround:Ye({label:t,isDisabled:l})}},pt="@ms-INITIAL_OPTION_VALUE",mt=e=>{let{isDisabled:t}=e;return{msHeightReference:Xe({label:"styleeditor.heightReferenceFromGround",isDisabled:t}),msHeight:it({label:"styleeditor.height",key:"msHeight",isDisabled:(e,l)=>t()||"clamp"===l?.msHeightReference,initialOptionValue:pt,getSelectOptions:e=>{let{attributes:t}=e;const l=t?.map((e=>{let{label:t,attribute:l,type:r}=e;return"number"===r?{label:t,value:l}:null})).filter((e=>!!e))||[];return[{labelId:"styleeditor.pointHeight",value:pt},...l]}}),msLeaderLineColor:We({key:"msLeaderLineColor",opacityKey:"msLeaderLineOpacity",label:"styleeditor.leaderLineColor",stroke:!0,isDisabled:t}),msLeaderLineWidth:Me({key:"msLeaderLineWidth",label:"styleeditor.leaderLineWidth",fallbackValue:0,isDisabled:t})}},yt=e=>{let{isDisabled:t}=e;return{msBringToFront:He({label:"styleeditor.msBringToFront",isDisabled:t}),...mt({isDisabled:t})}},ft=e=>{let{isDisabled:t}=e;return{msClassificationType:Je({label:"styleeditor.classificationtype",isDisabled:t})}},gt=function(){let{exactMatchGeometrySymbol:e,enable3dStyleOptions:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const l=void 0===t,r={Mark:{kind:"Mark",glyph:"1-point",glyphAdd:"1-point-add",tooltipAddId:"styleeditor.addMarkRule",supportedTypes:e?["point","vector"]:["point","linestring","polygon","vector"],params:{wellKnownName:Qe({label:"styleeditor.shape"}),color:We({key:"color",opacityKey:"fillOpacity",label:"styleeditor.fill"}),strokeColor:We({key:"strokeColor",opacityKey:"strokeOpacity",label:"styleeditor.strokeColor",stroke:!0}),strokeWidth:Me({key:"strokeWidth",label:"styleeditor.strokeWidth"}),radius:Be({key:"radius",label:"styleeditor.radius"}),rotate:Ke({label:"styleeditor.rotation"}),...!l&&yt({isDisabled:()=>!t})},defaultProperties:{kind:"Mark",wellKnownName:"Circle",color:"#dddddd",fillOpacity:1,strokeColor:"#777777",strokeOpacity:1,strokeWidth:1,radius:16,rotate:0,msBringToFront:!1,msHeightReference:"none"}},Icon:{kind:"Icon",glyph:"point",glyphAdd:"point-plus",tooltipAddId:"styleeditor.addIconRule",supportedTypes:e?["point","vector"]:["point","linestring","polygon","vector"],hideMenu:!0,params:{image:et({label:"styleeditor.image",key:"image"}),format:ot({label:"styleeditor.format",key:"format",isVisible:function(e){let{image:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"css"!==(arguments.length>2?arguments[2]:void 0)&&!v()(t)&&!["png","jpg","svg","gif","jpeg"].includes(t.split(".").pop())},getOptions:()=>B.qL}),opacity:qe({label:"styleeditor.opacity"}),size:Be({key:"size",label:"styleeditor.size"}),rotate:Ke({label:"styleeditor.rotation"}),...!l&&yt({isDisabled:()=>!t})},defaultProperties:{kind:"Icon",image:"",opacity:1,size:32,rotate:0,msBringToFront:!1,msHeightReference:"none"}},Line:{kind:"Line",glyph:"line",glyphAdd:"line-plus",tooltipAddId:"styleeditor.addLineRule",supportedTypes:e?["linestring","vector"]:["linestring","polygon","vector"],params:{color:We({label:"styleeditor.strokeColor",stroke:!0,pattern:!0,getGroupParams:e=>r[e],getGroupConfig:e=>"Mark"===e?{disableAlpha:!0}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{},graphicKey:"graphicStroke"}),width:Me({label:"styleeditor.strokeWidth",key:"width"}),dasharray:Ve({label:"styleeditor.lineStyle",key:"dasharray"}),cap:$e({label:"styleeditor.lineCap",key:"cap",isDisabled:()=>!!t}),join:je({label:"styleeditor.lineJoin",key:"join",isDisabled:()=>!!t}),...!l&&ut({label:"styleeditor.clampToGround",isDisabled:()=>!t})},defaultProperties:{kind:"Line",color:"#777777",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0}},Fill:{kind:"Fill",glyph:"polygon",glyphAdd:"polygon-plus",tooltipAddId:"styleeditor.addFillRule",supportedTypes:["polygon","vector"],params:{color:We({label:"styleeditor.fill",key:"color",opacityKey:"fillOpacity",pattern:!0,graphicKey:"graphicFill",getGroupParams:e=>r[e],getGroupConfig:e=>"Mark"===e?{}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}}),outlineColor:We({key:"outlineColor",opacityKey:"outlineOpacity",label:"styleeditor.outlineColor",stroke:!0}),outlineWidth:Me({key:"outlineWidth",label:"styleeditor.outlineWidth"}),...!l&&ut({label:"styleeditor.clampOutlineToGround",isDisabled:()=>!t}),...!l&&ft({isDisabled:(e,l)=>!l?.msClampToGround||!t})},defaultProperties:{kind:"Fill",color:"#dddddd",fillOpacity:1,outlineColor:"#777777",outlineWidth:1,msClassificationType:"both",msClampToGround:!0}},PointCloud:{kind:"Mark",glyph:"1-point",glyphAdd:"1-point-add",tooltipAddId:"styleeditor.addMarkRule",supportedTypes:["pointcloud"],hideMenu:!0,params:{color:We({key:"color",opacityKey:"fillOpacity",label:"styleeditor.fill"}),radius:Be({key:"radius",label:"styleeditor.radius",range:{min:1,max:10}})},defaultProperties:{kind:"Mark",wellKnownName:"Circle",color:"#dddddd",fillOpacity:1,radius:1}},Polyhedron:{kind:"Fill",glyph:"polygon",glyphAdd:"polygon-plus",tooltipAddId:"styleeditor.addFillRule",supportedTypes:["polyhedron"],hideMenu:!0,params:{color:We({label:"styleeditor.fill",key:"color",opacityKey:"fillOpacity",pattern:!0,graphicKey:"graphicFill",getGroupParams:e=>r[e],getGroupConfig:e=>"Mark"===e?{}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}})},defaultProperties:{kind:"Fill",color:"#dddddd",fillOpacity:1}},Model:{kind:"Model",glyph:"model",glyphAdd:"model-plus",disableAdd:()=>!t,tooltipAddId:"styleeditor.addModelRule",supportedTypes:["point","vector"],hideMenu:!0,params:{model:tt({label:"styleeditor.model",key:"model",isDisabled:()=>!t}),scale:Ge({key:"scale",label:"styleeditor.scale",fallbackValue:1,maxWidth:80,isDisabled:()=>!t}),pitch:Ge({key:"pitch",label:"styleeditor.pitch",fallbackValue:0,maxWidth:105,uom:"",isDisabled:()=>!t}),roll:Ge({key:"roll",label:"styleeditor.roll",fallbackValue:0,maxWidth:105,uom:"",isDisabled:()=>!t}),heading:Ge({key:"heading",label:"styleeditor.heading",fallbackValue:0,maxWidth:105,uom:"",isDisabled:()=>!t}),color:We({key:"color",opacityKey:"opacity",label:"styleeditor.color",isDisabled:()=>!t}),...mt({isDisabled:()=>!t})},defaultProperties:{kind:"Model",model:"",scale:1,color:"#ffffff",opacity:1,msHeightReference:"none"}},Text:{kind:"Text",glyph:"font",tooltipAddId:"styleeditor.addTextRule",supportedTypes:e?["point","vector"]:["point","linestring","polygon","vector"],params:{label:ot({key:"label",label:"styleeditor.label",selectProps:{creatable:!0},getOptions:e=>{let{attributes:t}=e;return t?.map((e=>({value:"{{"+e.attribute+"}}",label:e.attribute})))||[]}}),font:ot({key:"font",label:"styleeditor.fontFamily",selectProps:{multi:!0},getOptions:e=>{let{fonts:t}=e;return t?.map((e=>({value:e,label:e})))||[]}}),color:We({label:"styleeditor.fontColor",key:"color",disableAlpha:!0}),size:Be({label:"styleeditor.fontSize",key:"size"}),fontStyle:lt({label:"styleeditor.fontStyle",key:"fontStyle"}),fontWeight:rt({label:"styleeditor.fontWeight",key:"fontWeight"}),haloColor:We({label:"styleeditor.haloColor",key:"haloColor",stroke:!0,disableAlpha:!0}),haloWidth:Me({label:"styleeditor.haloWidth",key:"haloWidth"}),rotate:Ke({label:"styleeditor.rotation"}),offsetX:_e({label:"styleeditor.offsetX",axis:"x"}),offsetY:_e({label:"styleeditor.offsetY",axis:"y"}),...!l&&yt({isDisabled:()=>!t})},defaultProperties:{kind:"Text",color:"#333333",size:14,fontStyle:"normal",fontWeight:"normal",haloColor:"#ffffff",haloWidth:1,allowOverlap:!0,offset:[0,0],msBringToFront:!1,msHeightReference:"none"}},Raster:{kind:"Raster",glyph:"1-raster",tooltipAddId:"styleeditor.addRasterRule",supportedTypes:["raster"],params:{channel:dt({}),opacity:qe({label:"styleeditor.opacity"})},defaultProperties:{kind:"Raster",opacity:1,contrastEnhancement:{}}}},n={Classification:{kind:"Classification",glyph:"list",classificationType:"classificationVector",hideInputLabel:!0,hideFilter:!0,params:[{ramp:st({key:"ramp",label:"styleeditor.colorRamp",getOptions:e=>{let{getColors:t}=e;return t()}}),reverse:nt({key:"reverse",label:"styleeditor.reverse",isDisabled:(e,t)=>"custom"===t?.ramp||"customInterval"===t?.method}),attribute:ot({key:"attribute",label:"styleeditor.attribute",isValid:e=>{let{value:t}=e;return void 0!==t},getOptions:e=>{let{attributes:t}=e;return t?.map((e=>({value:e.attribute,label:e.attribute,disabled:e.disabled})))}}),method:ot({key:"method",label:"styleeditor.method",isDisabled:(e,t,l)=>{let{attributes:r}=l;return"string"===r?.filter((e=>{let{label:l}=e;return l===t?.attribute}))?.[0]?.type&&"customInterval"!==t?.method},getOptions:e=>{let{methods:t,method:l,methodEdit:r}=e;return[..."customInterval"===l?[{labelId:"styleeditor."+r,glyphId:"edit",value:l}]:[],...t?.map((e=>({labelId:"styleeditor."+e,value:e})))||[]]}}),intervals:at({label:"styleeditor.intervals",isDisabled:(e,t)=>Ae()(["customInterval","uniqueInterval"],t?.method)})},e=>{if(!e)return{};switch(e){case"Mark":case"Fill":return{fillOpacity:qe({key:"fillOpacity",label:"styleeditor.opacity"}),...E()(r[e]?.params,["color"])};case"Line":return{opacity:qe({key:"opacity",label:"styleeditor.opacity"}),...E()(r[e]?.params,["color"])};default:return r[e]?.params}},{classification:ct({key:"classification",rampKey:"ramp"})}],defaultProperties:{kind:"Classification",classification:[],intervals:5,method:"equalInterval",ramp:"orrd",reverse:!1}},Raster:{kind:"Raster",glyph:"1-raster",classificationType:"classificationRaster",hideInputLabel:!1,hideFilter:!0,params:[{channel:dt({}),opacity:qe({label:"styleeditor.opacity"}),ramp:st({key:"ramp",label:"styleeditor.colorRamp",getOptions:e=>{let{getColors:t}=e;return t()}}),reverse:nt({key:"reverse",label:"styleeditor.reverse",isDisabled:(e,t)=>"custom"===t?.ramp||"customInterval"===t?.method}),continuous:nt({key:"continuous",label:"styleeditor.continuous",isDisabled:(e,t)=>"custom"===t?.ramp||"customInterval"===t?.method}),colorMapType:Ue({key:"colorMapType",label:"styleeditor.colorMapType.label"}),method:ot({key:"method",label:"styleeditor.method",getOptions:e=>{let{methods:t,method:l,methodEdit:r}=e;return[..."customInterval"===l?[{labelId:"styleeditor."+r,glyphId:"edit",value:l}]:[],...t?.map((e=>({labelId:"styleeditor."+e,value:e})))||[]]}}),intervals:at({label:"styleeditor.intervals"})},{classification:ct({key:"classification",rampKey:"ramp"})}],defaultProperties:{kind:"Raster",opacity:1,classification:[],intervals:5,method:"equalInterval",reverse:!1,continuous:!0,colorMapType:"ramp",symbolizerKind:"Raster"}}};return{symbolizerBlock:r,ruleBlock:n}};var ht=l(180307),bt=l(590937);function vt(e){let{title:t,tools:l,errorId:a,msgParams:o,draggable:i,connectDragSource:s,connectDropTarget:c,isDragging:d,children:u}=e;const p=(0,r.useRef)(null);i&&(s(p.current),c(p.current));const m=d?" ms-drop-target":"";return n().createElement("li",{ref:p,className:`ms-style-rule${m}`},n().createElement("div",{className:"ms-style-rule-head"},i&&n().createElement("div",{className:"ms-style-rule-grab-handle"},n().createElement(h.Glyphicon,{glyph:"grab-handle"})),n().createElement("div",{className:"ms-style-rule-head-info"},t),n().createElement("div",{className:"ms-style-rule-head-tools"},l)),a&&n().createElement(h.Alert,{bsStyle:"danger"},n().createElement(L.Z,{msgId:a,msgParams:o})),n().createElement("ul",{className:"ms-style-rule-body"},u))}vt.propTypes={title:o().oneOfType([o().node,o().string]),tools:o().node,errorId:o().string,draggable:o().bool,connectDragSource:o().func,connectDropTarget:o().func,isDragging:o().bool},vt.defaultProps={connectDragSource:e=>e,connectDropTarget:e=>e};const kt="RULE",Et=(0,bt.GR)(kt,{hover(e,t,l){!function(e,t,l){if(!l)return null;const r=(0,ht.findDOMNode)(l);if(!r)return null;const n=t.getItem().index,a=e.index;if(n===a)return null;const{bottom:o,top:i}=r.getBoundingClientRect(),s=(o-i)/2,c=t.getClientOffset().y-i;n<a&&c<s||n>a&&c>s||(e.onSort(n,a),t.getItem().index=a)}(e,t,l)}},(e=>({connectDropTarget:e.dropTarget()})))((0,bt.Ej)(kt,{beginDrag:e=>({id:e.id,index:e.index})},((e,t)=>({connectDragSource:e.dragSource(),isDragging:t.isDragging()})))(vt));var St=l(423214);function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},It.apply(this,arguments)}const Tt=(0,Z.Z)(z.Z),Ct=(0,j.Z)("placeholder")(h.FormControl);function wt(){return n().createElement("div",{style:{position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}},n().createElement("div",null,n().createElement(h.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),n().createElement("h1",null,n().createElement(L.Z,{msgId:"styleeditor.emptyRuleEditorTitle"})),n().createElement("p",null,n().createElement(L.Z,{msgId:"styleeditor.emptyRuleEditor"}))))}const Ft=(0,r.forwardRef)(((e,t)=>{let{rules:l=[],loading:a,toolbar:o,config:i={},ruleBlock:s={},symbolizerBlock:c={},onUpdate:u=(()=>{}),onChange:p=(()=>{})}=e;const{geometryType:y,attributes:f,bands:b,scales:v,zoom:k,fonts:E,methods:S,getColors:I,classification:T,format:C,simple:w}=i,F=(0,r.useRef)();function x(e,t){let{values:l,ruleId:r,symbolizerId:n}=e;if(t){const e=F.current.rules.map((e=>e.ruleId===r?{...e,...l}:e));return p(e)}const a=F.current.rules.map((e=>e.symbolizers?{...e,symbolizers:e.symbolizers.map((t=>t.symbolizerId===n&&e.ruleId===r?{...t,...l}:t))}:e));return p(a)}function O(e){const t=[e,...F.current.rules];p(t)}function P(e){let{ruleId:t,...l}=e;const r=F.current.rules.map((e=>e.ruleId===t?{ruleId:t,...l}:e));return p(r)}function D(e,t){const l=d()(F.current.rules,((t,l)=>l===e)),r=F.current.rules.reduce(((r,n,a)=>a===e?r:a===t?e>t?[...r,l,n]:[...r,n,l]:[...r,n]),[]);return p(r)}function A(e,t){const{symbolizers:l=[]}=e;return!!d()(l,(e=>{let{kind:t}=e;return"Text"===t}))&&t>0}return F.current={rules:l},n().createElement("div",{ref:t,className:"ms-style-rules-editor"},n().createElement("div",{className:"ms-style-rules-editor-head"},n().createElement("div",{className:"ms-style-rules-editor-left"},o),n().createElement("div",{className:"ms-style-rules-editor-right"},n().createElement(m.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[...Object.keys(c).map((e=>{const t=c[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(y),tooltipId:t.tooltipAddId,disabled:!!t?.disableAdd&&t.disableAdd(),onClick:()=>O({name:"",ruleId:ye()(),symbolizers:[{...c[e].defaultProperties,symbolizerId:ye()()}]})}})),...Object.keys(s).filter((e=>s[e].add)).map((e=>{const t=s[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(y),tooltipId:t.tooltipAddId,onClick:()=>O({name:"",ruleId:ye()(),...s[e].defaultProperties})}}))]}))),n().createElement("ul",{className:"ms-style-rules-editor-body"},0===l.length&&n().createElement(wt,null),l.map(((e,t)=>{const{name:r,symbolizers:a=[],filter:o,scaleDenominator:i={},ruleId:d,kind:m,errorId:O,msgParams:N}=e,{params:R,glyph:Z,hideInputLabel:z,hideFilter:W,hideScaleDenominator:M,classificationType:V}=s[m]||{},$=!!g()(f)&&"number"===(f.find((t=>{let{label:l}=t;return l===e?.attribute}))||{})?.type;return n().createElement(Et,{key:d+(l.length>1?"_draggable":""),draggable:l.length>1,id:d,index:t,errorId:O,msgParams:N,onSort:D,title:z?n().createElement(L.Z,{msgId:`styleeditor.rule${m}`}):n().createElement(h.FormGroup,{onDragStart:e=>{e.stopPropagation(),e.preventDefault()},draggable:!0},n().createElement(Ct,{value:r,placeholder:"styleeditor.enterLegendLabelPlaceholder",onChange:e=>x({values:{name:e.target.value},ruleId:d},!0)})),tools:n().createElement(n().Fragment,null,A(e,t)&&n().createElement(St.Z,{glyph:"exclamation-mark",bsStyle:"warning",placement:"right",title:n().createElement(L.Z,{msgId:"styleeditor.warningTextOrderTitle"}),text:n().createElement(L.Z,{msgId:"styleeditor.warningTextOrder"})}),n().createElement(be,{hide:W,value:o,attributes:f,format:C,onChange:e=>x({values:e,ruleId:d},!0)}),v&&n().createElement(Te,{hide:M,value:i,scales:v,zoom:k,onChange:e=>x({values:e,ruleId:d},!0)}),n().createElement(Tt,{className:"square-button-md no-border",tooltipId:"styleeditor.removeRule",onClick:()=>function(e){const t=F.current.rules.filter((t=>t.ruleId!==e));p(t)}(d)},n().createElement(h.Glyphicon,{glyph:"trash"})))},"Classification"===m||"Raster"===m?n().createElement(Le,It({},e,{ruleBlock:s,symbolizerBlock:c,glyph:Z,classificationType:V,config:T||{},params:R,methods:S,getColors:I,bands:b,attributes:f&&f.map((t=>({...t,..."customInterval"===e.method?{disabled:$?"number"!==t.type:t.label!==e.attribute}:"uniqueInterval"!==e.method&&{disabled:"number"!==t.type}}))),onUpdate:u,onChange:e=>x({values:e,ruleId:d},!0),onReplace:P,format:C})):a.map((e=>{let{kind:t="",symbolizerId:l,...r}=e;const{params:a,glyph:o,hideMenu:i}=function(e){const t=Object.keys(c).filter((e=>c[e].supportedTypes.includes(y))).find((t=>c[t]?.kind===e));return c[t]||c[e]||{}}(t);return a&&n().createElement(xe,{key:l,defaultExpanded:!0,draggable:!0,glyph:o,tools:!w&&n().createElement(Fe,{hide:i,symbolizerKind:t,ruleBlock:s,symbolizerBlock:c,ruleId:d,onSelect:P,graphic:r.graphicFill||r.graphicStroke,channelSelection:r.channelSelection})},n().createElement(pe,{properties:r,format:C,params:a,config:{bands:b,attributes:f,fonts:E},onChange:e=>x({values:e,ruleId:d,symbolizerId:l})}))})))})),a&&n().createElement("div",{className:"ms-style-rule-overlay-loader",style:{position:"absolute",width:"100%",height:"100%",zIndex:10,transition:"0.3s all"}})))})),{symbolizerBlock:xt,ruleBlock:Ot}=gt();Ft.propTypes={rules:o().array,loading:o().bool,toolbar:o().node,config:o().object,ruleBlock:o().object,symbolizerBlock:o().object,onUpdate:o().func,onChange:o().func},Ft.defaultProps={rules:[],config:{},ruleBlock:Ot,symbolizerBlock:xt,onUpdate:()=>{},onChange:()=>{}};const Pt=Ft;var Lt=l(119950),Dt=l(21090);const At="UPDATE_STYLE",Nt="UNDO_STYLE",Rt="REDO_STYLE",Zt={[At]:(e,t)=>({...t})},zt=(0,Dt.ZP)(((e,t)=>(Zt[t.type]||p())(e,t.payload)),{limit:20,undoType:Nt,redoType:Rt,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),Wt={};function Mt(e){let{code:t,format:l,layer:a,zoom:o,scales:i,geometryType:c,fonts:u,bands:p,attributes:f,onChange:g,onError:h,defaultStyleJSON:b,config:v,loading:k,error:E,methods:S,getColors:I,styleUpdateTypes:T,debounceTime:C,styleService:w,exactMatchGeometrySymbol:F,enable3dStyleOptions:x}=e;const{symbolizerBlock:O,ruleBlock:P}=gt({exactMatchGeometrySymbol:F,enable3dStyleOptions:x}),[D,A]=(0,r.useState)(!1),[N,R]=(0,r.useReducer)(zt,{}),Z=N?.present||Wt,z=(0,r.useRef)();z.current={style:Z};const W=(0,r.useRef)(!1);(0,r.useEffect)((()=>{W.current&&null!==b||(0,Lt.getStyleParser)(l).then((e=>e&&t&&null===b?e.readStyle(t).then((e=>{R({type:At,payload:(0,B.VM)(e)}),W.current=!0})).catch((e=>h({...e,status:400}))):e&&t&&b?(W.current=!0,R({type:At,payload:b})):t&&!e?h({messageId:"styleeditor.formatNotSupported",status:400}):null))}),[t,l,b]);const M=e=>{if(A(!1),!e)return null;const t={...z.current.style,rules:e};return R({type:At,payload:t})},V=(0,r.useRef)();(0,r.useEffect)((()=>(V.current=s()((e=>{const t=e?.style?.rules,l=function(e){if(!e||0===e.length)return{messageId:"styleeditor.styleEmpty",status:400,isEmpty:!0};const t=d()(e.map((e=>{let{errorId:t}=e;return t})),(e=>e));if(t)return{messageId:t,status:400};if(d()(e,(e=>{let{kind:t,classification:l}=e;return!("Classification"!==t&&"Raster"!==t||l&&0!==l.length)})))return{messageId:"styleeditor.incompleteClassification",status:400};const l=d()(e,(e=>{let{symbolizers:t=[]}=e;return d()(t,(e=>{let{kind:t,image:l}=e;return"Icon"===t&&l?.errorId}))}));return l?{messageId:`styleeditor.${l?.symbolizers?.[0]?.image?.errorId}`,status:400}:null}(t);return l?h(l):(0,Lt.getStyleParser)(e.format).then((t=>t.writeStyle((0,B.Gg)(e.style)).then((t=>{const{parsedCode:l,errorObj:r}=(0,B.BG)(e,t);r?h(r):g(l,e.style)})).catch((e=>{h({...e,status:400})}))))}),C),()=>{V.current.cancel()})),[]),(0,r.useEffect)((()=>{V.current.cancel(),V.current({format:l,style:Z})}),[JSON.stringify(Z)]);const $=E&&(E.message||E.messageId&&n().createElement(L.Z,{msgId:E.messageId}));return n().createElement(Pt,{loading:D,toolbar:n().createElement(m.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"undo",tooltipId:"styleeditor.undoStyle",disabled:0===(N?.past?.length||0),onClick:()=>R({type:Nt})},{disabled:0===(N?.future?.length||0),tooltipId:"styleeditor.redoStyle",glyph:"redo",onClick:()=>R({type:Rt})},{visible:!!E,Element:()=>n().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},n().createElement(St.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:n().createElement(L.Z,{msgId:"styleeditor.validationErrorTitle"}),text:n().createElement(n().Fragment,null,n().createElement("p",null,n().createElement(L.Z,{msgId:"styleeditor.genericValidationError"})),$?n().createElement("p",null,n().createElement(L.Z,{msgId:"styleeditor.validationError"}),":",$):n().createElement("p",null,n().createElement(L.Z,{msgId:"styleeditor.incorrectPropertyInputError"})))}))},{visible:!(!k&&!D),Element:()=>n().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},n().createElement(y.Z,{size:18}))}]}),ruleBlock:P,symbolizerBlock:O,config:{geometryType:c,zoom:o,fonts:u,scales:i,bands:p,attributes:f,methods:S,getColors:I,format:l,...v},rules:Z?.rules&&[...Z.rules].reverse(),onChange:e=>M([...e].reverse()),onUpdate:e=>{let{values:t,...l}=e;A(!0),(e=>{let{values:t,properties:l,rules:r,layer:n,styleService:a,styleUpdateTypes:o={}}=e;return new Promise((e=>{const i=l.type&&o[l.type];return e(i?i({values:t,properties:l,rules:r,layer:n,styleService:a}):r.map((e=>e.ruleId===l.ruleId?{...e,...t,errorId:void 0}:e)))}))})({values:t,properties:l,layer:a,rules:z.current.style.rules,styleService:w,styleUpdateTypes:T}).then((e=>M(e))).catch((()=>M()))}})}Mt.propTypes={code:o().string,format:o().string,layer:o().object,zoom:o().number,scales:o().array,geometryType:o().string,fonts:o().array,bands:o().array,attributes:o().array,onChange:o().func,onError:o().func,defaultStyleJSON:o().object,config:o().object,loading:o().bool,error:o().object,methods:o().array,getColors:o().func,styleUpdateTypes:o().object,debounceTime:o().number},Mt.defaultProps={onChange:()=>{},onError:()=>{},config:{},getColors:()=>{},styleUpdateTypes:{},debounceTime:300,defaultStyleJSON:null};const Vt=Mt},900683:(e,t,l)=>{"use strict";l.d(t,{T:()=>N,Z:()=>R});var r=l(701469),n=l.n(r),a=l(513218),o=l.n(a),i=l(124852),s=l.n(i),c=l(630294),d=l(171703),u=l(22222),p=l(546243),m=l(458698),y=l(811408),f=l(804504),g=l(756435),h=l(89518),b=l(8204),v=l(28815),k=l(329923),E=l(274363),S=l(703011),I=l(904160),T=l(644825),C=l(24198),w=l(717621),F=l.n(w);const x=[{type:"color",active:e=>"atom"===e.type&&F()(e.string).isValid(),style:e=>({backgroundColor:e.string}),Widget:e=>{let{token:t,value:l,onChange:r=(()=>{})}=e;return s().createElement(C.xS,{color:{hex:l||t.string},onChange:e=>r(e.hex)})}}];function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r])}return e},O.apply(this,arguments)}const P={classificationVector:y.IW,classificationRaster:y.DG,classification:y.IW,"classification-raster":y.DG};function L(e,t){return e&&"raster"!==t?(0,T.u9)(e):[]}const D=(0,d.connect)((0,u.P1)([S.gB,S.iB,S.m2,S.p,S.aN,S.Vf,S.lC,E.up,E.Od,S.Z0],((e,t,l,r,a,o,i,s,c,d)=>({code:e,mode:(0,T.H$)(t),bands:n()(l)&&"raster"===i&&l||[],attributes:L(l,i),error:r.edit||null,loading:a,format:t,layer:o,geometryType:i,scales:s.map((e=>Math.round(e))),zoom:c.zoom,fonts:d.fonts||[],methods:("raster"===i?d?.classificationMethods?.raster:d?.classificationMethods?.vector)||m.Z.methods,styleService:{baseUrl:d?.baseUrl,isStatic:d?.isStatic}}))),{onError:p.Fe.bind(null,"edit")})(k.Z);D.defaultProps={getColors:m.Z.getColors,styleUpdateTypes:P};const A={visual:D,textarea:(0,d.connect)((0,u.P1)([S.gB,S.iB,S.m2,S.p,S.aN],((e,t,l,r,n)=>({code:e,mode:(0,T.H$)(t),hintProperties:l,error:r.edit||null,loading:n}))))(v.Z)};function N(e){let{code:t,error:l,canEdit:r,editorType:n,onUpdateMetadata:a,onChange:d,loading:u,header:p,editors:m=[],...y}=e;const[v,k]=(0,i.useState)(),E={position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"};if(!t&&!l)return s().createElement("div",{style:E},s().createElement(h.Z,{size:150}));if(!r)return s().createElement("div",{style:E},s().createElement("div",null,s().createElement(c.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),s().createElement("h1",null,s().createElement(f.Z,{msgId:"styleeditor.noPermission"}))));if(404===l?.status)return s().createElement("div",{style:E},s().createElement("div",null,s().createElement(c.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),s().createElement("h1",null,s().createElement(f.Z,{msgId:"styleeditor.styleNotFound"}))));const S=m[n]||A[n]||A.textarea;return s().createElement(g.Z,{style:{position:"relative"},header:s().createElement("div",{className:"ms-style-editor-toolbar"},s().createElement("div",{className:"ms-style-editor-toolbar-left"},p),s().createElement(b.Z,{buttons:[{className:"no-border",bsSize:"xs",disabled:u,active:"textarea"===n,textId:"visual"===n?"styleeditor.switchToTextareaEditor":"styleeditor.switchToVisualEditor",onClick:()=>u?null:"visual"===n?a({editorType:"textarea"}):k(!0)}]}))},S&&s().createElement(S,O({},y,{code:t,error:l,onChange:(e,t)=>{d(e),o()(t)&&a({styleJSON:JSON.stringify(t)})}})),v&&s().createElement("div",{className:"ms-style-editor-alert",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",padding:16,backgroundColor:"rgba(0, 0, 0, 0.6)"}},s().createElement(c.Alert,{bsStyle:"warning",style:{textAlign:"center"}},s().createElement("p",{style:{padding:8}},s().createElement(f.Z,{msgId:"styleeditor.alertForceTranslate"})),s().createElement("p",null,s().createElement(b.Z,{buttons:[{text:s().createElement(f.Z,{msgId:"styleeditor.stayInTextareaEditor"}),onClick:()=>k(!1),style:{marginRight:4}},{bsStyle:"primary",text:s().createElement(f.Z,{msgId:"styleeditor.useLatestValidStyle"}),onClick:()=>{a({editorType:"visual"}),k(!1)}}]})))))}N.defaultProps={inlineWidgets:x};const R=(0,d.connect)((0,I.y1)(S.gB,S.p,S.z_,(e=>{const t=(0,S.WW)(e);return t?.editorType}),(e=>{try{const t=(0,S.WW)(e);return JSON.parse(t?.styleJSON)}catch(e){return null}}),S.aN,((e,t,l,r,n,a)=>({code:e,error:t.edit||null,canEdit:l,editorType:r,defaultStyleJSON:n,loading:a}))),{onUpdateMetadata:p.bB,onChange:p.p2})(N)},756311:(e,t,l)=>{"use strict";l.d(t,{m2:()=>V,tM:()=>K,lC:()=>q});var r=l(124852),n=l.n(r),a=l(171703),o=l(867076),i=l(22222),s=l(403410),c=l(16075),d=l(333101),u=l(546243),p=l(804504),m=l(756435),y=l(141919),f=l(554155),g=l(715828),h=l(89518),b=l(630294),v=l(768977),k=l(486234),E=l(36549),S=l(603754),I=l(393666);const T=(0,k.Z)("filterPlaceholder")(S.Z),C=(0,E.Z)(b.Glyphicon),w=(0,y.Z)((e=>{let{items:t}=e;return 0===t.length}),{title:n().createElement(p.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(v.Z);var F=l(91175),x=l.n(F),O=l(867517);const P=e=>{let{disabled:t,selected:l,title:r,preview:a,previewSrc:o,onClick:i=(()=>{})}=e;return n().createElement("div",{className:`ms-square-card${l?" ms-selected":""}${t?" ms-disabled":""}`,onClick:t?null:()=>i()},(a||o)&&n().createElement("div",{className:"ms-preview"},a||o&&n().createElement("img",{src:o})),n().createElement("small",null,r))};var L=l(466737),D=l(283604);const A=(0,k.Z)("filterPlaceholder")(S.Z),N=(0,k.Z)("placeholder")(b.FormControl),R=(0,y.Z)((e=>{let{items:t}=e;return 0===t.length}),{title:n().createElement(p.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(v.Z),Z=e=>{let{title:t,_abstract:l}=e;const r=/^[a-zA-Z0-9\s]*$/,n=t&&null!==t.match(r);return n&&!l||n&&l&&null!==l.match(r)};var z=l(8204);var W=l(703011),M=l(644825);const V=l(900683).Z,$=(0,M.YD)(),j=(0,y.Z)((e=>{let{canEdit:t}=e;return!t}),{glyph:"exclamation-mark",title:n().createElement(p.Z,{msgId:"styleeditor.noPermission"})}),U=e=>(0,f.Z)(e,{size:150,style:{margin:"auto"}},(e=>n().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},n().createElement(h.Z,e)))),B=(0,o.compose)((0,o.defaultProps)({templates:$}),(0,a.connect)((0,i.P1)([W.Mc,W.w_,W.lC,W.z_,W.Z0,W.aN],(function(e,t,l,r){let{formats:n=[]}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{selectedStyle:e,add:t&&e,geometryType:l,canEdit:r,availableFormats:n,loading:arguments.length>5?arguments[5]:void 0}})),{onSelect:u.FU,onClose:u.cu.bind(null,!1),onSave:u.wj}),j,U((e=>{let{geometryType:t}=e;return!t})),(0,o.withState)("filterText","onFilter",""),(0,o.withState)("styleSettings","onUpdate",{}))((e=>{let{selectedStyle:t,add:l,styleSettings:r={},geometryType:a="",templates:o=[],filterText:i,availableFormats:s=["sld","css"],formFields:c=[{key:"title",placeholder:"styleeditor.titleSettingsplaceholder",title:n().createElement(p.Z,{msgId:"styleeditor.titleSettings"})},{key:"_abstract",placeholder:"styleeditor.abstractSettingsplaceholder",title:n().createElement(p.Z,{msgId:"styleeditor.abstractSettings"})}],onFilter:d=(()=>{}),onSelect:u=(()=>{}),onClose:y=(()=>{}),onSave:f=(()=>{}),onUpdate:g=(()=>{}),loading:v}=e;return n().createElement(m.Z,{header:n().createElement("div",null,n().createElement(A,{filterPlaceholder:"styleeditor.templateFilterPlaceholder",filterText:i,onFilter:d}),n().createElement("div",{className:"text-center"},n().createElement("small",null,v?n().createElement(h.Z,{size:15,style:{display:"inline-block"}}):n().createElement(p.Z,{msgId:"styleeditor.createStyleFromTemplate"}))))},n().createElement(R,{colProps:{},cardComponent:P,onItemClick:e=>{let{code:t,styleId:l,format:n}=e;u({code:t,templateId:l,format:n||"css"}),g({...r,title:x()(o.filter((e=>{let{styleId:t}=e;return t===l})).map((e=>{let{title:t}=e;return t})))})},items:o.filter((e=>{let{title:t}=e;return!i||i&&-1!==t.indexOf(i)})).filter((e=>{let{types:t,format:l}=e;return!t||x()(t.filter((e=>e===a)))&&-1!==s.indexOf(l)})).map((e=>({...e,preview:e?.preview?.config?n().createElement(I.Z,e.preview.config):e?.preview,selected:e.styleId===t,disabled:v})))}),n().createElement(L.Z,null,n().createElement(D.Z,{show:!!l,fitContent:!0,title:n().createElement(p.Z,{msgId:"styleeditor.createStyleModalTitle"}),onClose:()=>y(),buttons:[{text:n().createElement(p.Z,{msgId:"save"}),bsStyle:"primary",disabled:!Z(r),onClick:()=>f(r)}]},n().createElement(b.Form,null,n().createElement(b.FormGroup,{controlId:"styleTitle",validationState:!Z(r)&&"error"},c.map((e=>{let{title:t,placeholder:l,key:a}=e;return n().createElement("span",{key:a},n().createElement(b.ControlLabel,null,t),n().createElement(N,{type:"text",defaultValue:r[a],placeholder:l,onChange:e=>g({...r,[a]:e.target.value})}))}))),!Z(r)&&n().createElement(b.Alert,{style:{margin:0},bsStyle:"danger"},n().createElement(O.Z,{msgId:"styleeditor.titleRequired"}))))))})),G=(0,o.compose)((0,a.connect)((0,i.P1)([W.ex,W.ov],((e,t)=>{let{defaultStyle:l,enabledStyle:r,availableStyles:n}=t;return{status:e,defaultStyle:l,enabledStyle:r,availableStyles:n}})),{onSelect:d.Xy}),(0,o.withState)("filterText","onFilter",""),(0,g.Z)((e=>{let{status:t,readOnly:l}=e;return"template"===t&&!l}),(()=>n().createElement(B,null)),{maskContainerStyle:{display:"flex",position:"relative"},maskStyle:{overflowY:"auto",left:0}}))((e=>{let{showDefaultStyleIcon:t,enabledStyle:l,defaultStyle:r,availableStyles:a=[],onSelect:o,formatColors:i={sld:"#33ffaa",css:"#ffaa33"},filterText:s="",onFilter:c=(()=>{})}=e;return n().createElement(m.Z,{className:"ms-style-editor-list",header:n().createElement(T,{filterPlaceholder:"styleeditor.styleListfilterPlaceholder",filterText:s,onFilter:c})},n().createElement(w,{size:"sm",onItemClick:e=>{let{name:t}=e;return o({style:t},!0)},items:a.filter((e=>{let{name:t="",title:l="",_abstract:r="",metadata:n={}}=e;return t.toLowerCase().includes(s.toLowerCase())||n?.title?.toLowerCase().includes(s.toLowerCase())||n?.description?.toLowerCase().includes(s.toLowerCase())||l.toLowerCase().includes(s.toLowerCase())||r.toLowerCase().includes(s.toLowerCase())})).map((e=>{return{...e,title:e?.metadata?.title||e.label||e.title||e.name,description:e?.metadata?.description||e._abstract,selected:l===e.name,preview:e.format&&n().createElement(I.Z,{backgroundColor:"#333333",texts:[{text:(a=e.format,{sld:"SLD",css:"CSS",mbstyle:"MBS"}[a]||a||"").toUpperCase(),fill:i[e.format]||"#f2f2f2",style:{fontSize:70,fontWeight:"bold"}}]})||n().createElement(C,{glyph:"geoserver"}),tools:t&&r===e.name?n().createElement(C,{glyph:"star",tooltipId:"styleeditor.defaultStyle"}):null};var a}))}))})),q=(0,o.compose)((0,o.withState)("showModal","onShowModal"),(0,a.connect)((0,i.P1)([W.ex,W.Mc,W.p,W.QW,W.gB,W.aN,W.i7,W.z_,W.ov,W.Z0,W.Ed],(function(e,t,l,r,n,a,o,i,s){let{defaultStyle:c}=s,{formats:d=["sld"]}=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},u=arguments.length>10?arguments[10]:void 0;return{status:e,templateId:t,error:l,isCodeChanged:r!==n,loading:a,layerDefaultStyleName:c,selectedStyle:c===o?"":o,editEnabled:i,disableCodeEditing:-1===d.indexOf(u)}})),{onSelectStyle:u.Nf.bind(null,"template"),onEditStyle:u.Nf.bind(null,"edit"),onBack:u.Nf.bind(null,""),onReset:s.B1.bind(null,M.s1,[{}]),onAdd:u.cu.bind(null,!0),onUpdate:u.Lc,onDelete:u.WQ,onSetDefault:u.WB}))((e=>{let{status:t,buttons:l=[],templateId:r,error:a,isCodeChanged:o,showModal:i,onShowModal:s,loading:c,selectedStyle:d,layerDefaultStyleName:u,editEnabled:m,enableSetDefaultStyle:y,defaultStyles:f=["generic","point","line","polygon","raster"],onBack:g=(()=>{}),onAdd:h=(()=>{}),onReset:v=(()=>{}),onDelete:k=(()=>{}),onSelectStyle:E=(()=>{}),onEditStyle:S=(()=>{}),onUpdate:I=(()=>{}),onSetDefault:T=(()=>{}),disableCodeEditing:C}=e;return n().createElement("div",null,n().createElement(z.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",visible:!!t,tooltipId:"styleeditor.backToList",disabled:!!c,onClick:()=>{"edit"===t&&o?s({title:n().createElement(p.Z,{msgId:"styleeditor.closeWithoutSaveAlertTitle"}),message:n().createElement(b.Alert,{bsStyle:"warning",style:{margin:0}},n().createElement(p.Z,{msgId:"styleeditor.closeWithoutSaveAlert"})),buttons:[{text:n().createElement(p.Z,{msgId:"close"}),bsStyle:"primary",onClick:()=>{s(null),g(),v()}}]}):(g(),v())}},{glyph:"1-stilo",tooltipId:"styleeditor.createNewStyle",visible:!(t||!m),disabled:!!c,onClick:()=>E()},{glyph:"code",tooltipId:"styleeditor.editSelectedStyle",visible:!(t||!m),disabled:!!c||-1!==f.indexOf(d)||!d&&-1!==f.indexOf(u)||C,onClick:()=>S()},{glyph:"ok",tooltipId:"styleeditor.saveCurrentStyle",disabled:!!(a&&a.edit&&a.edit.status)||!!c||-1!==f.indexOf(d),visible:!("edit"!==t||!m),onClick:()=>I()},{glyph:"plus",tooltipId:"styleeditor.addSelectedTemplate",visible:!("template"!==t||!r||!m),disabled:!!c,onClick:()=>h()},{glyph:"trash",tooltipId:"styleeditor.deleteSelectedStyle",disabled:!!c||-1!==f.indexOf(d)||!d,visible:!(t||!m),onClick:()=>{s({title:n().createElement(p.Z,{msgId:"styleeditor.deleteStyleAlertTitle"}),message:n().createElement(b.Alert,{bsStyle:"warning",style:{margin:0}},n().createElement(p.Z,{msgId:"styleeditor.deleteStyleAlert"})),buttons:[{text:n().createElement(p.Z,{msgId:"styleeditor.delete"}),bsStyle:"primary",onClick:()=>{s(null),k(d)}}]})}},{glyph:"star",tooltipId:"styleeditor.setDefaultStyle",disabled:!!c||-1!==f.indexOf(d)||!d,visible:!(!y||t||!m),onClick:()=>T()},...t?[]:l]}),n().createElement(L.Z,null,n().createElement(D.Z,{show:i,fitContent:!0,title:i&&i.title,onClose:()=>s(null),buttons:i&&i.buttons},i&&i.message)))})),_=(0,o.compose)((0,a.connect)((0,i.P1)([W.Vf],(e=>({layer:e}))),{onInit:c.k}),(0,o.lifecycle)({UNSAFE_componentWillMount(){this.props.onInit&&this.props.layer&&this.props.onInit(this.props.layer)}}),U((e=>{let{layer:t={}}=e;return t&&t.capabilitiesLoading})))((()=>n().createElement(m.Z,{className:"ms-style-editor-container",footer:n().createElement("div",{style:{height:25}})},n().createElement(G,{readOnly:!0})))),K=(0,o.branch)((e=>{let{readOnly:t}=e;return t}),(()=>_))(G)},703011:(e,t,l)=>{"use strict";l.d(t,{gc:()=>m,Mc:()=>y,ex:()=>f,p:()=>g,aN:()=>h,iB:()=>b,j5:()=>v,gB:()=>k,QW:()=>E,w_:()=>S,ji:()=>I,Z0:()=>T,z_:()=>C,Vf:()=>w,lC:()=>F,m2:()=>x,i7:()=>O,Ed:()=>P,ov:()=>L,WW:()=>D});var r=l(227361),n=l.n(r),a=l(91175),o=l.n(a),i=l(545578),s=l.n(i),c=(l(313311),l(747037)),d=l.n(c),u=l(612912),p=l(644825);const m=e=>n()(e,"styleeditor.temporaryId"),y=e=>n()(e,"styleeditor.templateId"),f=e=>n()(e,"styleeditor.status"),g=e=>n()(e,"styleeditor.error")||{},h=e=>n()(e,"styleeditor.loading"),b=e=>n()(e,"styleeditor.format")||"css",v=e=>n()(e,"styleeditor.languageVersion")||{},k=e=>n()(e,"styleeditor.code"),E=e=>n()(e,"styleeditor.initialCode")||"",S=e=>n()(e,"styleeditor.addStyle")||"",I=e=>n()(e,"styleeditor.enabled"),T=e=>n()(e,"styleeditor.service")||{},C=e=>n()(e,"styleeditor.canEdit"),w=e=>{const t=(0,u.jN)(e);return{...(0,u.Iz)(e)||{},...t&&t.options||{}}},F=e=>{const t=w(e),{geometryType:l="vector"}=(0,p.Py)(t);return l},x=e=>{const t=w(e),{properties:l={}}=(0,p.Py)(t);return l},O=e=>{const t=w(e);return t.style||t.availableStyles&&t.availableStyles[0]&&t.availableStyles[0].name},P=e=>{const{availableStyles:t=[]}=w(e)||{},l=O(e);return o()(t.filter((e=>{let{name:t}=e;return t===l})).map((e=>{let{format:t}=e;return t})))},L=e=>{const t=w(e),l=t.availableStyles||[],{name:r}=o()(l)||{},n=t.style||t&&!t.style&&r;return{availableStyles:s()(l.map((e=>{const t=e&&e.title&&d()(e.title)&&e.title.split(p.I$),l=t&&t[0]||e.name;return{...e,label:l}})),"name"),defaultStyle:r,enabledStyle:n}},D=e=>e?.styleeditor?.metadata},644825:(e,t,l)=>{"use strict";l.d(t,{I$:()=>V,s1:()=>$,q9:()=>B,Vi:()=>G,nK:()=>q,Py:()=>_,H$:()=>K,uW:()=>Y,YD:()=>H,$N:()=>J,U_:()=>X,Gg:()=>ne,VM:()=>ae,ZF:()=>oe,qL:()=>ie,BG:()=>se,co:()=>ce,u9:()=>de,g5:()=>ue,wc:()=>pe,uo:()=>me,Yt:()=>ye});var r=l(91175),n=l.n(r),a=l(227361),o=l.n(a),i=l(701469),s=l.n(i),c=l(747037),d=l.n(c),u=l(385564),p=l.n(u),m=l(414293),y=l.n(m),f=l(441609),g=l.n(f),h=l(957557),b=l.n(h),v=l(114176),k=l.n(v),E=l(352353),S=l.n(E),I=l(436968),T=l.n(I),C=l(984596),w=l.n(C),F=l(513218),x=l.n(F),O=l(281763),P=l.n(O),L=l(423570),D=l.n(L),A=l(472500),N=l.n(A),R=l(403595),Z=l(119950),z=l(505055),W=l.n(z);const M=new(W().Builder),V="___",$="styleeditor",j={},U={css:"geocss",sld:"xml","3dtiles":"application/json",geostyler:"application/json"},B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.localType&&e.localType.toLowerCase()||"";return-1!==t.indexOf("polygon")||-1!==t.indexOf("surface")?"polygon":-1!==t.indexOf("linestring")?"linestring":-1!==t.indexOf("point")?"point":"vector"},G=()=>`${D()()}_ms_${Date.now().toString()}`,q=e=>{let{title:t=""}=e;return`${t.toLowerCase().replace(/\s/g,"_")}${V}${D()()}`},_=function(){let{describeLayer:e={},describeFeatureType:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const l=e?.owsType||null,r=o()(t,"featureTypes[0].properties")||null,a=r&&n()(r.filter((e=>{let{type:t,localType:l}=e;return t&&t.includes("gml")&&l}))),i=("WCS"===l?"raster":a&&"WFS"===l&&B(a))||null;return{geometryType:i,properties:"raster"===i?e.bands:r&&r.reduce(((e,t)=>{let{name:l,type:r={},localType:n}=t;return{...e,[l]:{localType:n,prefix:r.replace(`:${n}`,"")}}}),{}),owsType:l}},K=e=>U[e]||e,Y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(j.isSameOrigin)return j.isSameOrigin(e,t);if(!t.baseUrl||!e.url)return!1;const l=[t.baseUrl,...t.availableUrls||[]].map((e=>{const t=N().parse(e);return`${t.protocol}//${t.host}`})),r=N().parse(e.url),n=`${r.protocol}//${r.host}`;return-1!==l.indexOf(n)},H=()=>{if(j.getStyleTemplates){const e=j.getStyleTemplates();return[...s()(e)?e:[],...R.baseTemplates]}return[...R.customTemplates,...R.baseTemplates]},J=e=>{const t=d()(e)&&e.split(":")||[];return{workspace:t[1]&&t[0],name:t[1]||t[0]}},X=e=>{let{name:t,workspace:l}=e;return`${l&&l.name&&`${l.name}:`||""}${t}`},Q=(e,t)=>{if(!(e&&e.filterFields&&e.groupFields&&t))return null;const l=[...e.filterFields.filter((e=>e.groupId===t.id)),...e.groupFields.filter((e=>e.groupId===t.id))],r={OR:"||",AND:"&&",like:"*=","=":"==","<>":"!=",isNull:"=="},n=l.map((t=>{if(void 0!==t.rowId){const{operator:e,attribute:l,value:n}=t;return e&&l&&!y()(n)?[r[e]||e,l,"isNull"===e?null:n]:null}return Q(e,t)})).filter((e=>e)),{logic:a}=t;return 0===n.length?null:[r[a],...n]},ee=e=>{const t=e?.groupFields?.find((e=>{let{groupId:t}=e;return!t}));return t&&Q(e,t)},te=function(e){let{index:t=0,groupId:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};if(!e)return null;const n={"||":"OR","&&":"AND","*=":"like","==":"=","!=":"<>"},[a,...o]=e,i=s()(a),c=i?a[0]:a,d=i?a.filter(((e,t)=>0!==t)):o;if("||"===c||"&&"===c){const e=D()();return r("groupField",{id:e,index:t,logic:n[c]}),te(o,{index:t+1,groupId:e},r)}return c?(r("filterField",{attribute:d[0],groupId:l,operator:n[c]||c,rowId:D()(),type:isNaN(parseFloat(d[1]))?"string":"number",value:d[1]}),te(o,{index:t,groupId:l},r)):null},le=e=>{let t=[],l=[];return te(e,void 0,((e,r)=>{"groupField"===e&&t.push(r),"filterField"===e&&l.push(r)})),{groupFields:t,filterFields:l}};function re(e){const t=k()(e,S());return Object.keys(t).reduce(((e,l)=>{switch(l){case"haloColor":case"haloWidth":return"Text"===t.kind&&0===t.haloWidth?e:{...e,[l]:t[l]};case"outlineWidth":case"outlineColor":case"outlineOpacity":return"Fill"===t.kind&&0===t.outlineWidth?e:{...e,[l]:t[l]};case"strokeWidth":case"strokeColor":case"strokeOpacity":return"Mark"===t.kind&&0===t.strokeWidth?e:{...e,[l]:t[l]};case"graphicFill":case"graphicStroke":return{...e,[l]:re(t[l])};default:return{...e,[l]:t[l]}}}),{})}function ne(e){return e&&e.rules?{...e,rules:p()(e.rules.map((e=>{if("Classification"===e.kind)return(e.classification||[]).map(((t,l)=>{const r=l===e.classification.length-1?"<=":"<",n=!y()(t.min),a=!y()(t.max),o=!y()(t.unique),i=o?["==",e.attribute,t.unique]:[],s=n?[[">=",e.attribute,t.min]]:[],c=a?[[r,e.attribute,t.max]]:[],d=o&&t.unique,u=n&&">= "+t.min,p=a&&r+" "+t.max;return{name:d||(u&&p?u+" and "+p:u||p),filter:g()(i)?g()(s[0])&&g()(c[0])?void 0:["&&",...s,...c]:i,...e.scaleDenominator&&{scaleDenominator:e.scaleDenominator},symbolizers:[re({...b()(e,["ruleId","classification","intervals","intervalsForUnique","method","ramp","reverse","attribute","symbolizerKind"]),kind:e.symbolizerKind||"Fill",color:t.color})]}}));if("Raster"===e.kind){const t=e.classification&&e.classification.length>0&&{colorMapEntries:(e.classification||[]).map((e=>({label:e.label,quantity:e.quantity,color:e.color,opacity:e.opacity}))),type:e.colorMapType};return{name:e.name||"",...e.scaleDenominator&&{scaleDenominator:e.scaleDenominator},symbolizers:[re({...b()(e,["ruleId","classification","intervals","method","ramp","reverse","continuous","symbolizerKind","name","colorMapType"]),kind:"Raster",...t&&{colorMap:t}})]}}const t=ee(e.filter);return{...e,filter:t,symbolizers:(e?.symbolizers||[]).map((e=>re(e)))}})))}:e}function ae(e){return{...e,rules:e.rules.map((e=>({...e,ruleId:D()(),filter:e.filter&&le(e.filter),symbolizers:e.symbolizers&&e.symbolizers.map((e=>({...e,symbolizerId:D()()})))||[]})))}}function oe(e){return new Promise(((t,l)=>{e||l({messageId:"imageSrcEmpty",isBase64:!1});let r=!1;if(0===e.indexOf("data:image")){const t=e.split("base64,");r=function(e){try{return window.atob(e),!0}catch(e){return!1}}(t[t.length-1]),r||l({messageId:"imageSrcInvalidBase64",isBase64:r})}const n=new Image;n.onload=()=>{t({src:e,isBase64:r})},n.onerror=()=>{l({messageId:r?"imageSrcInvalidBase64":"imageSrcLoadError",isBase64:r})},n.src=e}))}const ie=[{label:"image/png",value:"image/png"},{label:"image/jpeg",value:"image/jpeg"},{label:"image/gif",value:"image/gif"},{label:"image/svg+xml",value:"image/svg+xml"}],se=(e,t)=>{let l=t;"sld"===e.format&&W().parseString(t,{explicitArray:!1},((t,r)=>{const n="StyledLayerDescriptor.NamedLayer.UserStyle.FeatureTypeStyle.Rule";let a=w()(o()(r,n,[]));a=p()(a.map(((t,l)=>{const{baseGraphicPath:r,imgFormat:n}=((e,t)=>{const{kind:l,...r}=e[t]?.symbolizers?.[0]||{};switch(l){case"Icon":return{baseGraphicPath:"PointSymbolizer",imgFormat:r?.format};case"Line":return{baseGraphicPath:"LineSymbolizer.Stroke.GraphicStroke",imgFormat:r?.graphicStroke?.format};case"Fill":return{baseGraphicPath:"PolygonSymbolizer.Fill.GraphicFill",imgFormat:r?.graphicFill?.format};default:return{}}})(e.style?.rules||[],l),a=`${r}.Graphic.ExternalGraphic`,i=o()(t,a),s=`${a}.Format`,c=o()(t,s);return i&&!c&&g()(n)?null:i?c?t:T()(t,s,n):t})));const i=a.some((e=>null===e));l=i?"":M.buildObject(T()(r,n,a))}));const r=!!g()(l)&&{messageId:"styleeditor.imageFormatEmpty",status:400};return{parsedCode:l,errorObj:r}};function ce(){let{metadata:e={},format:t,code:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.e(2568).then(l.t.bind(l,402568,23)).then((l=>{const n=l.default,{msStyleJSON:a,msMD5Hash:o}=e;if(o&&r)return n(r)!==o;if(!a)return Promise.resolve(!1);let i;try{i=ne(JSON.parse(a))}catch(e){return Promise.resolve(!0)}return(0,Z.getStyleParser)(t).then((e=>e.writeStyle(i).then((e=>n(r)!==n(e)))))}))}function de(e){const t=["string"],l=["integer","long","double","float","bigdecimal","decimal","number","int"];return Object.keys(e).filter((r=>-1!==[...t,...l].indexOf(e[r].localType.toLowerCase()))).map((t=>{const{localType:r}=e[t];return{attribute:t,label:t,type:-1!==l.indexOf(r.toLowerCase())?"number":"string"}}))}function ue(e){return e?.properties?"3dtiles"===e?.type?Object.keys(e.properties||{}).map((t=>{const{minimum:l,maximum:r,type:n}=e.properties[t],a=P()(l)||P()(r)?"number":"string";return{attribute:t,label:t,type:n||a}})):"wfs"===e?.type?de(e.properties):"vector"===e?.type?Object.keys(e.properties||{}).filter((t=>P()(e.properties[t])||d()(e.properties[t]))).map((t=>({attribute:t,label:t,type:P()(e.properties[t])?"number":"string"}))):null:null}function pe(e){return"3dtiles"===e.type?"pnts"===e?.format?"pointcloud":"polyhedron":e?.geometryType||"vector"}function me(e){return"3dtiles"===e.type?{format:"3dtiles",body:{},metadata:{editorType:"visual"}}:{format:"geostyler",body:{},metadata:{editorType:"visual"}}}const ye={"3dtiles":(e,t)=>{const{defines:l={},meta:r,...n}=e,a=[{key:"color",type:"string"},{key:"pointSize",type:"number"}].find((e=>{let{key:t,type:l}=e;if("string"===l&&n[t]&&!d()(n[t])&&!x()(n[t]))return!0;if("number"===l&&n[t]&&!d()(n[t])&&!P()(n[t])&&!x()(n[t]))return!0;if(x()(n[t])){if(0===(n[t]?.conditions?.length||0))return!0;if(n[t].conditions.find((e=>{let[t,l]=e;return!l||!t})))return!0}return!1}));if(a)return{messageId:"styleeditor.invalidProperty",messageParams:a};const o=[...Object.keys(t?.properties||{}),...Object.keys(l),"POSITION","POSITION_ABSOLUTE","COLOR","NORMAL"].map((e=>`\${${e}}`)),i=JSON.stringify(n).match(/\${(.*?)}/g);if(i){const e=i.find((e=>!o.includes(e)));if(e)return{messageId:"styleeditor.notSupportedVariable",messageParams:{key:e}}}return!1}}},403595:(e,t,l)=>{const r=l(423570),n=[{types:["point","linestring","polygon","vector"],title:"Base CSS",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol(square);\n\t:mark { fill: #ff0000; };\n}\n\n* {\n\tstroke: #999999;\n}",preview:{config:{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["point","linestring","polygon","vector"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:{config:{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["raster"],title:"Base CSS",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\traster-channels: auto;\n}",preview:{config:{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["raster"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<RasterSymbolizer>\n\t\t\t\t\t\t<Opacity>1.0</Opacity>\n\t\t\t\t\t\t</RasterSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:{config:{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]}}}].map((e=>({...e,styleId:r()}))),a=[{types:["linestring","vector"],title:"Line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #999999;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#999999"}]}}},{types:["linestring","vector"],title:"Dashed line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #333333;\n\tstroke-width: 0.75;\n\tstroke-dasharray: 6 2;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#333333",strokeWidth:4,strokeDasharray:"20 4"}]}}},{types:["linestring","vector"],title:"Section line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #330033;\n\tstroke-width: 1;\n\tstroke-dasharray: 10 4 1 4;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#330033",strokeWidth:4,strokeDasharray:"20 10 4 10"}]}}},{types:["linestring","vector"],title:"Simple railway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('shape://vertline'), #000000;\n    :stroke {\n        stroke: #000000;\n        size: 8;\n    };\n}\n",preview:{config:{type:"linestring",paths:[{stroke:"#333333",strokeWidth:2,strokeLinejoin:"round"},{stroke:"#333333",strokeWidth:16,strokeDasharray:"2 20",strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Railway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #777777, #ffffff;\n\tstroke-width: 4, 2;\n\tstroke-dasharray: 1 0, 10 10;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#777777",strokeWidth:8,strokeLinejoin:"round"},{stroke:"#ffffff",strokeWidth:6,strokeDasharray:"20 20",strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Waterway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #8bbceb, #bbddff;\n\tstroke-width: 10, 8;\n\tstroke-linejoin: round;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#8bbceb",strokeWidth:14,strokeLinejoin:"round"},{stroke:"#bbddff",strokeWidth:12,strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Red road",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #ff5539, #ffffff;\n\tstroke-width: 8, 5;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#ff5539",strokeWidth:14},{stroke:"#ffffff",strokeWidth:7}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('circle');\n    stroke-dasharray: 8 20;\n    :stroke {\n        size: 8;\n        fill: #ddd;\n        stroke: #777;\n        stroke-width: 0.5;\n    };\n}\n",types:["linestring","vector"],title:"Stroke Pattern",format:"css",preview:{config:{type:"linestring",paths:[{type:"point",transform:"translate(-0, -55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    label: 'Label';\n    label-anchor: 0.5 0.5;\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n}\n",types:["linestring","vector"],title:"Label",format:"css",preview:{config:{type:"linestring",paths:[{stroke:"#333",strokeWidth:4}],texts:[{text:"Label",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n}\n",types:["polygon","vector"],title:"Fill",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Border",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-dasharray: 10 5;\n    stroke-width: 2;\n    stroke-opacity: 0.5;\n}\n",types:["polygon","vector"],title:"Dashed Border",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4,strokeDasharray:"20 10",strokeOpacity:.5}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Simple",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd",stroke:"#333",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol('shape://slash');\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n",types:["polygon","vector"],title:"Line Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"url(#line)"}],patterns:[{id:"line",icon:{d:"M0.0 1.0 L1.0 0.0",stroke:"#000",strokeWidth:.05}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol('shape://dot');\n    :fill {\n        size: 8;\n        stroke: #000000;\n        stroke-width: 4;\n    };\n}\n",types:["polygon","vector"],title:"Dot Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"url(#poly_dot)"}],patterns:[{id:"poly_dot",icon:{d:"M0.5 0.5 L0.5 0.52Z",stroke:"#000",strokeLinecap:"round",strokeWidth:.2}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    mark: symbol('circle');\n    :mark {\n        size: 16;\n        stroke: #333;\n        stroke-width: 2;\n        fill: #ddd;\n    };\n}\n\n* {\n    stroke: #333333;\n    stroke-width: 0.5;\n}\n",types:["polygon","vector"],title:"Marker",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333"},{type:"point",d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#333",fill:"#ddd",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd, symbol('cross');\n    :fill {\n        size: 20;\n        stroke: #333;\n        stroke-width: 1;\n        fill: #f2f2f2;\n    };\n}\n",types:["polygon","vector"],title:"Fill Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd"},{fill:"url(#poly_square)"}],patterns:[{id:"poly_square",icon:{d:"M0.1 0.1 L0.9 0.1 L0.9 0.9 L0.1 0.9Z",stroke:"#333",strokeLinecap:"round",strokeWidth:.05,fill:"#f2f2f2"}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    label: 'Label';\n    label-anchor: 0.5 0.5;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    stroke: #474747;\n    fill: symbol('shape://slash');\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n",types:["polygon","vector"],title:"Label and Fill",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#000",strokeWidth:2},{fill:"url(#line)"}],texts:[{text:"Label",style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}},{types:["point","vector"],title:"Square",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('square');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Circle",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('circle');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Triangle",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('triangle');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Star",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('star');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Cross",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('cross');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"X",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('x');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://vertline');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Plus",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://plus');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Times",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://times');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Open arrow",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://oarrow');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Closed arrow",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://carrow');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    label: 'Label';\n    label-anchor: 0.5 2;\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    mark: symbol('circle');\n    :mark {\n        size: 7;\n        stroke: #0d0d0d;\n        stroke-width: 0.7;\n    };\n}\n",types:["polygon","point","vector"],title:"Label and Marker",format:"css",preview:{config:{type:"polygon",paths:[{type:"point",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#0d0d0d",fill:"transparent",strokeWidth:2}],texts:[{text:"Label",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}}].map((e=>({...e,styleId:r()})));e.exports={baseTemplates:n,customTemplates:a}}}]);