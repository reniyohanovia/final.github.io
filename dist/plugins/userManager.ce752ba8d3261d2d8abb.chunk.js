(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[3124],{457654:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>re});var s=r(92742),n=r.n(s),o=r(727418),a=r.n(o),i=r(45697),l=r.n(i),u=r(124852),p=r.n(u),c=r(630294),d=r(171703),m=r(331325),h=r(804504),g=r(778081),y=r(16246),b=r(161538),v=r(23888);function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(354033);class E extends p().Component{constructor(){super(...arguments),f(this,"renderStatus",(()=>p().createElement("div",{key:"status",className:"user-status",style:{position:"absolute",bottom:0,left:"10px",margin:"10px 10px 0 10px"}},p().createElement("div",null,p().createElement("strong",null,p().createElement(h.Z,{msgId:"users.statusTitle"}))),this.props.user.enabled?p().createElement(c.Glyphicon,{glyph:"ok-sign"}):p().createElement(c.Glyphicon,{glyph:"minus-sign"})))),f(this,"renderGroups",(()=>p().createElement("div",{key:"groups",className:"groups-container",style:this.props.innerItemStyle},p().createElement("div",null,p().createElement("strong",null,p().createElement(h.Z,{msgId:"users.groupTitle"}))),p().createElement("div",{className:"groups-list"},this.props.user&&this.props.user.groups?this.props.user.groups.filter((function(){let{groupName:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e})).map((function(){let{id:e,groupName:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p().createElement("div",{className:"group-item",key:"group-"+e},t)})):null)))),f(this,"renderRole",(()=>p().createElement("div",{key:"role",className:"role-containter",style:this.props.innerItemStyle},p().createElement("div",null,p().createElement("strong",null,p().createElement(h.Z,{msgId:"users.roleTitle"}))),this.props.user.role))),f(this,"renderAvatar",(()=>p().createElement("div",{key:"avatar",className:"avatar-containter",style:this.props.avatarStyle},p().createElement(v.Z,{bsStyle:"primary",type:"button",className:"square-button"},p().createElement(c.Glyphicon,{glyph:"user"}))))),f(this,"renderName",(()=>p().createElement("div",{key:"name",style:this.props.nameStyle},this.props.user.name))),f(this,"renderHeader",(()=>p().createElement("div",{style:this.props.headerStyle},this.props.user.name)))}render(){return p().createElement(b.Z,{className:"user-thumb",style:this.props.style,titleStyle:this.props.titleStyle,header:this.renderHeader(),actions:this.props.actions},p().createElement("div",{className:"user-data-container"},this.renderAvatar(),p().createElement("div",{className:"user-card-info-container"},this.renderName(),p().createElement("div",{className:"user-card-rolegroups-container"},this.renderRole(),this.renderGroups()))),this.renderStatus())}}f(E,"propTypes",{style:l().object,user:l().object,titleStyle:l().object,headerStyle:l().object,innerItemStyle:l().object,avatarStyle:l().object,nameStyle:l().object,actions:l().array}),f(E,"defaultProps",{style:{position:"relative",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"repeat-x"},titleStyle:{display:"flex"},headerStyle:{flexGrow:1,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",width:0},innerItemStyle:{},avatarStyle:{margin:"10px"},nameStyle:{borderBottom:"1px solid #ddd",fontSize:18,fontWeight:"bold",overflow:"auto",wordWrap:"break-word",minHeight:"1.5em"}});const S=E;var w=r(630998),C=r.n(w);function P(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class x extends p().Component{constructor(){super(...arguments),P(this,"renderError",(()=>this.props.deleteError?p().createElement(c.Alert,{bsStyle:"danger"},p().createElement(h.Z,{msgId:"users.errorDelete"}),this.props.deleteError.statusText):null)),P(this,"renderConfirmButtonContent",(()=>"deleting"===this.props.deleteStatus?p().createElement(h.Z,{msgId:"users.deleting"}):p().createElement(h.Z,{msgId:"users.delete"})))}render(){return this.props.user?p().createElement(y.Z,{show:!!this.props.user,onClose:()=>this.props.deleteUser(this.props.deleteId,"cancelled"),onConfirm:()=>{this.props.deleteUser(this.props.deleteId,"delete")},confirmButtonContent:this.renderConfirmButtonContent(),confirmButtonDisabled:"deleting"===this.props.deleteStatus},p().createElement("div",null,p().createElement(h.Z,{msgId:"users.confirmDeleteUser"})),p().createElement("div",{style:{margin:"10px 0"}},p().createElement(S,{user:this.props.user})),p().createElement("div",null,this.renderError())):null}}P(x,"propTypes",{user:l().object,deleteUser:l().func,deleteId:l().number,deleteError:l().object,deleteStatus:l().string}),P(x,"defaultProps",{deleteUser:()=>{}});const U=(0,d.connect)((e=>{let t=e&&e.users;if(!t)return{};let r=t&&t.users,s=t.deletingUser&&t.deletingUser.id;if(r&&s){return{user:r[C()(r,(e=>e.id===s))],deleteId:s,deleteError:t.deletingUser.error,deleteStatus:t.deletingUser.status}}return{deleteId:s}}),{deleteUser:m.h8})(x);var k=r(12838),T=r(36549),I=r(590504),N=r(743129);function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Z extends p().Component{constructor(){super(...arguments),j(this,"onChange",(e=>{null!==e&&this.props.onUserGroupsChange("groups",e.map((e=>{let t=C()(this.props.groups,(t=>t.id===e.value));return t>=0?this.props.groups[t]:null})).filter((e=>e)))})),j(this,"getDefaultGroups",(()=>this.props.groups.filter((e=>"everyone"===e.groupName)))),j(this,"getOptions",(()=>this.props.groups.map((e=>({label:e.groupName,value:e.id,clearableValue:"everyone"!==e.groupName}))))),j(this,"renderGroupsSelector",(()=>p().createElement(N.ZP,{key:"groupSelector",clearable:!1,isLoading:0===this.props.groups.length,name:"user-groups-selector",multi:!0,value:(this.props.user&&this.props.user.groups?this.props.user.groups:this.getDefaultGroups()).map((e=>e.id)),options:this.getOptions(),onChange:this.onChange,style:{marginTop:"10px"}})))}render(){return this.props.groups?p().createElement("div",{style:{marginTop:"10px"},key:"groups-page"},p().createElement("span",null,p().createElement(h.Z,{msgId:"users.selectedGroups"})),this.renderGroupsSelector()):null}}j(Z,"propTypes",{groups:l().array,onUserGroupsChange:l().func,user:l().object}),j(Z,"defaultProps",{groups:[],onUserGroupsChange:()=>{},user:{}});const G=Z;var F=r(472986),O=r.n(F),A=r(984596),M=r.n(A),R=r(94841),B=(r(380623),r(797456));function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},z.apply(this,arguments)}function D(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const V=(0,T.Z)(c.Glyphicon);class L extends p().Component{constructor(){super(...arguments),D(this,"state",{key:1}),D(this,"getAttributes",(()=>this.props.user?.attribute||[])),D(this,"getAttributeValue",(e=>{let t=this.getAttributes();if(t){let r=C()(t,(t=>t.name===e));return t[r]&&t[r].value}return null})),D(this,"getPwStyle",(()=>{if(!this.props.user||!this.props.user.newPassword)return null;let e=this.props.user.newPassword;return this.isMainPasswordValid(e).valid?"success":"error"})),D(this,"getPwValidationMeta",(()=>{if(!this.props.user||!this.props.user.newPassword)return{valid:!0,message:"user.passwordMessage",args:null};let e=this.props.user.newPassword;return this.isMainPasswordValid(e)})),D(this,"renderPasswordFields",(()=>{const e=this.getPwValidationMeta(),t=e.message,r=e.args;return p().createElement("div",null,p().createElement(c.FormGroup,{validationState:this.getPwStyle()},p().createElement(c.ControlLabel,null,p().createElement(h.Z,{msgId:"user.password"})," ",p().createElement("span",{style:{fontWeight:"bold"}},"*"),p().createElement(V,{tooltipId:t,args:r,tooltipPosition:"right",glyph:"info-sign",style:{position:"relative",marginLeft:"10px",display:"inline-block",width:24},helpText:"Password must contain at least 6 characters"})),p().createElement(c.FormControl,{ref:"newPassword",inputRef:e=>{this.newPasswordField=e},key:"newPassword",type:"password",name:"newPassword",autoComplete:"new-password",style:this.props.inputStyle,onChange:this.handleChange})),p().createElement(c.FormGroup,{validationState:this.isValidPassword()?"success":"error"},p().createElement(c.ControlLabel,null,p().createElement(h.Z,{msgId:"user.retypePwd"})," ",p().createElement("span",{style:{fontWeight:"bold"}},"*")),p().createElement(c.FormControl,{ref:"confirmPassword",inputRef:e=>{this.confirmPasswordField=e},key:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",style:this.props.inputStyle,onChange:this.handleChange})))})),D(this,"renderGeneral",(()=>p().createElement("div",{style:{clear:"both",marginTop:"10px"}},p().createElement(c.FormGroup,null,p().createElement(c.ControlLabel,null,p().createElement(h.Z,{msgId:"user.username"})," ",p().createElement("span",{style:{fontWeight:"bold"}},"*")),p().createElement(c.FormControl,{ref:"name",key:"name",type:"text",name:"name",readOnly:this.props.user&&this.props.user.id,style:this.props.inputStyle,onChange:this.handleChange,value:this.props.user&&this.props.user.name||""})),this.props.hidePasswordFields?null:this.renderPasswordFields(),p().createElement("select",{name:"role",style:this.props.inputStyle,onChange:this.handleChange,value:this.props.user&&this.props.user.role||""},p().createElement("option",{value:"ADMIN"},"ADMIN"),p().createElement("option",{value:"USER"},"USER")),p().createElement(c.FormGroup,null,p().createElement(c.ControlLabel,{style:{float:"left",marginRight:"10px"}},p().createElement(h.Z,{msgId:"users.enabled"})),p().createElement(c.Checkbox,{defaultChecked:this.props.user&&void 0!==this.props.user.enabled&&this.props.user.enabled,type:"checkbox",key:"enabled"+(this.props.user?this.props.user.enabled:"missing"),name:"enabled",onClick:e=>{this.props.onChange("enabled",!!e.target.checked)}})),p().createElement("div",{style:{fontStyle:"italic"}},p().createElement(h.Z,{msgId:"users.requiredFiedsMessage"}))))),D(this,"renderAttributes",(()=>{const e=this.getAttributes();return p().createElement(p().Fragment,null,this.props.attributeFields.map((t=>{let{name:r,title:s,controlType:n,...o}=t;const a=this.getAttributeValue(r),i=B.ZP[n??"string"];return p().createElement("div",{style:{marginTop:"10px"}},p().createElement("label",{key:"member-label",className:"control-label"},s??r),p().createElement(i,z({name:"attribute."+r},o,{value:a,onChange:t=>{const s=e.filter((e=>{return!(t=r,e=>{let{name:r}=e;return t===r})(e);var t})).concat(M()(t).map((e=>({name:r,value:e}))));this.props.onChange("attribute",s)}})))})))})),D(this,"renderSaveButtonContent",(()=>{let e=this.props.user&&this.props.user.status,t=this.props.user&&this.props.user.id?p().createElement(h.Z,{key:"text",msgId:"users.saveUser"}):p().createElement(h.Z,{key:"text",msgId:"users.createUser"}),r={error:t,success:t,modified:t,save:p().createElement(h.Z,{key:"text",msgId:"users.saveUser"}),saving:p().createElement(h.Z,{key:"text",msgId:"users.savingUser"}),saved:p().createElement(h.Z,{key:"text",msgId:"users.userSaved"}),creating:p().createElement(h.Z,{key:"text",msgId:"users.creatingUser"}),created:p().createElement(h.Z,{key:"text",msgId:"users.userCreated"})}[e]||t;return[this.isSaving()?p().createElement(O(),{key:"saving-spinner",spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null,r]})),D(this,"renderButtons",(()=>{let e=p().createElement(R.C,{status:this.props.user&&this.props.user.status,onClick:this.close});return[p().createElement(v.Z,{key:"save",bsSize:this.props.buttonSize,bsStyle:this.isSaved()?"success":"primary",onClick:()=>this.props.onSave(this.props.user),disabled:!this.isValid()||this.isSaving()},this.renderSaveButtonContent()),e]})),D(this,"renderGroups",(()=>p().createElement(G,{onUserGroupsChange:this.props.onChange,user:this.props.user,groups:this.props.groups}))),D(this,"renderError",(()=>{if(this.props.user&&"error"===this.props.user.status){let e=this.props.user&&this.props.user.lastError;return p().createElement(c.Alert,{key:"error",bsStyle:"warning"},p().createElement(h.Z,{msgId:"users.errorSaving"}),e&&e.statusText)}return null})),D(this,"close",(()=>{this.newPasswordField&&(this.newPasswordField.value=""),this.confirmPasswordField&&(this.confirmPasswordField.value=""),this.props.onClose()})),D(this,"isMainPasswordValid",(e=>{const t={valid:!0,message:"user.passwordMessage",args:null};let r=e||this.props.user.newPassword||"";return""===r&&this.props.user&&this.props.user.id?t:r.length<this.props.minPasswordSize?{valid:!1,message:"user.passwordMinlenght",args:this.props.minPasswordSize}:t})),D(this,"isSaving",(()=>this.props.user&&"saving"===this.props.user.status)),D(this,"isSaved",(()=>this.props.user&&("saved"===this.props.user.status||"created"===this.props.user.status))),D(this,"isValid",(()=>{let e=this.props.user;return e&&e.name&&"modified"===e.status&&this.isValidPassword()})),D(this,"isValidPassword",(()=>{let e=this.props.user;return e&&this.isMainPasswordValid(e.newPassword).valid&&e.confirmPassword===e.newPassword})),D(this,"handleChange",(e=>{this.props.onChange(e.target.name,e.target.value)}))}render(){return this.props.show?p().createElement(I.Z,{modal:!0,draggable:!1,maskLoading:this.props.user&&("loading"===this.props.user.status||"saving"===this.props.user.status),id:"mapstore-user-dialog",className:"user-edit-dialog",style:this.props.style},p().createElement("span",{role:"header"},p().createElement("span",{className:"user-panel-title"},this.props.user&&this.props.user.name||p().createElement(h.Z,{msgId:"users.newUser"})),p().createElement("button",{onClick:this.close,className:"login-panel-close close"},this.props.closeGlyph?p().createElement(c.Glyphicon,{glyph:this.props.closeGlyph}):p().createElement("span",null,p().createElement(c.Glyphicon,{glyph:"1-close"})))),p().createElement("div",{role:"body"},p().createElement(c.Tabs,{justified:!0,defaultActiveKey:1,onSelect:e=>{this.setState({key:e})},key:"tab-panel",id:"userDetails-tabs"},p().createElement(c.Tab,{eventKey:1,title:p().createElement(V,{tooltipId:"user.generalInformation",glyph:"user",style:{display:"block",padding:8}})},this.renderGeneral()),p().createElement(c.Tab,{eventKey:2,title:p().createElement(V,{tooltipId:"user.attributes",glyph:"info-sign",style:{display:"block",padding:8}})},this.renderAttributes()),p().createElement(c.Tab,{eventKey:3,title:p().createElement(V,{tooltipId:"groups",glyph:"1-group",style:{display:"block",padding:8}})},this.renderGroups()))),p().createElement("div",{role:"footer"},this.renderError(),this.renderButtons())):null}}D(L,"propTypes",{user:l().object,groups:l().array,groupsStatus:l().string,show:l().bool,onClose:l().func,onChange:l().func,onSave:l().func,modal:l().bool,closeGlyph:l().string,style:l().object,buttonSize:l().string,inputStyle:l().object,attributeFields:l().array,minPasswordSize:l().number,hidePasswordFields:l().bool,buttonTooltip:l().oneOfType([l().string,l().element])}),D(L,"defaultProps",{user:{},onClose:()=>{},onChange:()=>{},onSave:()=>{},options:{},useModal:!0,closeGlyph:"",style:{},buttonSize:"small",includeCloseButton:!0,attributeFields:[{name:"email"},{name:"company"},{name:"notes",controlType:"text"}],inputStyle:{height:"32px",width:"260px",marginTop:"3px",marginBottom:"20px",padding:"5px",border:"1px solid #078AA3"},minPasswordSize:6,hidePasswordFields:!1});const W=L,K=(0,d.connect)((e=>{const t=e&&e.users;return{modal:!0,show:t&&!!t.currentUser,user:t&&t.currentUser,groups:t&&t.groups,hidePasswordFields:t&&t.currentUser&&e.security&&e.security.user&&e.security.user.id===t.currentUser.id}}),(e=>(0,k.DE)({onChange:m.Sh.bind(null),onClose:m.uz.bind(null,null),onSave:m.JR.bind(null)},e)))(W);var H=r(719648);function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},q.apply(this,arguments)}function J(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Q extends p().Component{constructor(){super(...arguments),J(this,"renderLoading",(()=>this.props.loading?p().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},p().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},p().createElement(h.Z,{msgId:"loading"}),p().createElement(O(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null)),J(this,"renderUsers",(e=>e.map((e=>{let t=[{onClick:()=>{this.props.onEdit(e)},glyph:"wrench",tooltip:(0,H.S$)(this.context.messages,"users.editUser")}];return e&&"GUEST"===e.role?t=[]:e.id!==this.props.myUserId&&t.push({onClick:()=>{this.props.onDelete(e&&e.id)},glyph:"remove-circle",tooltip:(0,H.S$)(this.context.messages,"users.deleteUser")}),p().createElement(c.Col,q({key:"user-"+e.id},this.props.colProps),p().createElement(S,{user:e,actions:t}))}))))}componentDidMount(){this.props.loadUsers()}render(){return p().createElement(c.Grid,{style:{position:"relative"},fluid:this.props.fluid},this.renderLoading(),p().createElement(c.Row,{key:"users"},this.renderUsers(this.props.users||[])),this.props.bottom)}}J(Q,"propTypes",{loadUsers:l().func,onEdit:l().func,onDelete:l().func,myUserId:l().number,fluid:l().bool,users:l().array,loading:l().bool,bottom:l().node,colProps:l().object}),J(Q,"contextTypes",{messages:l().object}),J(Q,"defaultProps",{loadUsers:()=>{},onEdit:()=>{},onDelete:()=>{},fluid:!0,colProps:{xs:12,sm:6,md:4,lg:3,style:{marginBottom:"20px"}}});const $=Q;var X=r(706558);const Y=(0,d.connect)((e=>{if(!e.users)return{};let{start:t,limit:r,users:s,status:n,totalCount:o,searchText:a}=e.users,i=0;return s&&o&&(i=Math.ceil(t/r)),{page:i,pageSize:r,items:s,total:o,searchText:a,loading:"loading"===n}}),{onSelect:m.Rf},((e,t)=>({...e,onSelect:r=>{let s=e.pageSize*r,n=e.pageSize;t.onSelect(e.searchText,{params:{start:s,limit:n}})}})))(X.Z),_=(0,d.connect)((e=>{const t=e&&e.users;return{users:t&&t.users,loading:t&&"loading"===t.status,stateProps:t&&t.stateProps,start:t&&t.start,limit:t&&t.limit,myUserId:e&&e.security&&e.security.user&&e.security.user.id}}),(e=>(0,k.DE)({loadUsers:m.Rf,onEdit:m.uz,onDelete:m.h8},e)),((e,t,r)=>a()({},e,t,r,{bottom:p().createElement(Y,null),loadUsers:()=>{t.loadUsers(e&&e.searchText,{params:{start:e&&e.start||0,limit:e&&e.limit||12}})}})),{pure:!1})($);function ee(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class te extends p().Component{constructor(){super(...arguments),ee(this,"onNew",(()=>{this.props.onNewUser()}))}render(){return p().createElement("div",null,p().createElement(g.Z,{className:this.props.className,splitTools:this.props.splitTools,isSearchClickable:this.props.isSearchClickable,hideOnBlur:this.props.hideOnBlur,placeholderMsgId:this.props.placeholderMsgId,onSearch:this.props.onSearch,onSearchReset:this.props.onSearchReset,onSearchTextChange:this.props.onSearchTextChange,typeAhead:this.props.typeAhead,searchText:this.props.searchText}),p().createElement(c.Grid,{style:{marginBottom:"10px"},fluid:!0},p().createElement("h1",{className:"usermanager-title"},p().createElement(h.Z,{msgId:"users.users"})),p().createElement(v.Z,{style:{marginRight:"10px"},bsStyle:"success",onClick:this.onNew},"Â ",p().createElement("span",null,p().createElement(c.Glyphicon,{glyph:"1-user-add"}),p().createElement(h.Z,{msgId:"users.newUser"})))),p().createElement(_,null),p().createElement(K,{attributeFields:this.props.attributeFields}),p().createElement(U,null))}}ee(te,"propTypes",{attributeFields:l().array,onNewUser:l().func,splitTools:l().bool,isSearchClickable:l().bool,className:l().string,hideOnBlur:l().bool,placeholderMsgId:l().string,typeAhead:l().bool,searchText:l().string,onSearch:l().func,onSearchReset:l().func,onSearchTextChange:l().func,start:l().number,limit:l().number}),ee(te,"defaultProps",{className:"user-search",hideOnBlur:!1,isSearchClickable:!0,splitTools:!1,placeholderMsgId:"users.searchUsers",typeAhead:!1,searchText:"",start:0,limit:20,onSearch:()=>{},onSearchReset:()=>{},onSearchTextChange:()=>{},onNewUser:()=>{}});const re={UserManagerPlugin:a()((0,d.connect)((e=>{let t=e&&e.users;return{start:t&&t.start,limit:t&&t.limit,searchText:t&&t.searchText&&n()(t.searchText,"*")||""}}),{onNewUser:m.uz.bind(null,{role:"USER",enabled:!0}),onSearchTextChange:m.uc,onSearch:m.Rf},((e,t,r)=>({...e,...t,...r,onSearchReset:r=>{let s=e.limit,n=r&&""!==r?"*"+r+"*":"*";t.onSearch(n,{params:{start:0,limit:s}})},onSearch:r=>{let s=e.limit,n=r&&""!==r?"*"+r+"*":"*";t.onSearch(n,{params:{start:0,limit:s}})}})))(te),{hide:!0,Manager:{id:"usermanager",name:"usermanager",position:1,priority:1,title:p().createElement(h.Z,{msgId:"users.manageUsers"}),glyph:"1-user-mod"}}),reducers:{users:r(272692).Z}}},272692:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(331325),n=r(956039),o=r(727418),a=r.n(o);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{start:0,limit:12},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.Zd:return a()({},e,{searchText:t.searchText,status:t.status,users:"loading"===t.status?e.users:t.users,start:t.start,limit:t.limit,totalCount:"loading"===t.status?e.totalCount:t.totalCount});case s.XS:return a()({},e,{searchText:t.text});case s.Kt:{let r=t.status?{status:t.status,...t.user}:t.user;return e.currentUser&&t.user&&e.currentUser.id===t.user.id?a()({},e,{currentUser:a()({},e.currentUser,{status:t.status,...t.user})}):"loading"!==t.status&&"new"!==t.status&&t.status?e:a()({},e,{currentUser:r})}case s.Fu:{let r=t.key,s=e.currentUser;return s=a()({},s,{[r]:t.newValue}),a()({},e,{currentUser:a()({},{...s,status:"modified"})})}case s.QN:{let r=e.currentUser;return a()({},e,{currentUser:a()({},{...r,...t.user,status:t.status,lastError:t.error})})}case s._x:return"deleted"===t.status||"cancelled"===t.status?a()({},e,{deletingUser:null}):a()({},e,{deletingUser:{id:t.id,status:t.status,error:t.error}});case s.BJ:return a()({},e,{groups:t.groups,groupsStatus:t.status,groupsError:t.error});case n.W6:return t.status===n.Ym?a()({},e,{groups:null,groupsStatus:null,groupsError:null}):e;case n.Nw:return t.status===n.TQ?a()({},e,{groups:null,groupsStatus:null,groupsError:null}):e;default:return e}}}}]);