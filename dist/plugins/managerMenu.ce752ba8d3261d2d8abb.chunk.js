(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[9772],{301698:(e,t,n)=>{"use strict";n.d(t,{i:()=>r});const o="MANAGER_ITEM_SELECTED";function r(e){return{type:o,toolId:e}}},956611:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var o=n(747037),r=n.n(o),s=n(45697),l=n.n(s),i=n(124852),a=n.n(i),p=n(630294),c=n(719648);function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends a().Component{constructor(){super(...arguments),m(this,"onMouseOver",(()=>{const e=r()(this.props.helpText)?this.props.helpText:(0,c.S$)(this.context.messages,this.props.helpText.props.msgId);this.props.changeHelpText(e),this.props.changeHelpwinVisibility(!0)}))}render(){return a().createElement(p.Badge,{id:this.props.id,onMouseOver:this.onMouseOver,className:(this.props.isVisible?"":"hidden ")+(this.props.className?this.props.className:"")},"?")}}m(u,"propTypes",{id:l().string,helpText:l().oneOfType([l().string,l().element]),isVisible:l().bool,changeHelpText:l().func,changeHelpwinVisibility:l().func,className:l().string}),m(u,"contextTypes",{messages:l().object}),m(u,"defaultProps",{helpText:"",isVisible:!1});const g=u},638510:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var o=n(353131),r=n.n(o),s=n(727418),l=n.n(s),i=n(45697),a=n.n(i),p=n(124852),c=n.n(p),m=n(630294),u=n(171703),g=n(12838),h=n(687753),y=n(723813),d=n(956611),b=n(804504),f=n(401811),v=n(23888);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},S.apply(this,arguments)}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const C=(0,u.connect)((e=>({isVisible:e.controls&&e.controls.help&&e.controls.help.enabled})),{changeHelpText:y.n2,changeHelpwinVisibility:y.SA})(d.Z);class x extends c().Component{constructor(){super(...arguments),T(this,"getToolConfig",(e=>e.tool?{}:this.props.toolCfg)),T(this,"getTool",(e=>{if(e.tool)return!0===e.tool?e.plugin:e.tool;let t=()=>({});const n={};return e.exclusive?(t=t=>({active:t.controls&&t.controls[this.props.stateSelector]&&t.controls[this.props.stateSelector].active===e.name}),n[this.props.eventSelector]=h.Xg.bind(null,this.props.stateSelector,"active",e.name,!0)):e.toggle?(t=t=>({bsStyle:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]?this.props.activeStyle:this.props.toolStyle,active:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]||!1}),n[this.props.eventSelector]=h.Xi.bind(null,e.toggleControl||e.name,e.toggleProperty||null)):e.action&&(n[this.props.eventSelector]=r()(e.action,this.context),t=e.selector||t),(0,u.connect)(t,n,((e,t,n)=>this.mergeHandlers({...n,...e},t)))(this.props.tool)})),T(this,"renderTool",((e,t)=>{if(e.element)return e.element;const n=e.help?c().createElement(C,{className:"mapstore-helpbadge",helpText:e.help}):c().createElement("span",null),o=e.tooltip?c().createElement(b.Z,{msgId:e.tooltip}):null,r=this.getTool(e),s=this.getToolConfig(e),l=e.childTools||[];return this.addTooltip(c().createElement(r,S({},s,{pluginCfg:e.cfg,tooltip:o,style:e.style,btnSize:this.props.toolSize,bsStyle:this.props.toolStyle,help:n,key:e.name||"tool"+t,mapType:this.props.mapType},e.cfg,{items:e.items||[]}),e.cfg&&e.cfg.glyph?c().createElement(m.Glyphicon,{glyph:e.cfg.glyph}):e.icon,n," ",e.text,l.length>0&&c().createElement(x,S({},e.innerProps,{mapType:this.props.mapType,tools:l,panels:e.childPanels}))),e)})),T(this,"renderTools",(()=>this.props.tools.map(this.renderTool))),T(this,"renderPanels",(()=>this.props.panels.filter((e=>!e.panel.loadPlugin)).map((e=>{const t=e.panel,n=c().createElement(t,S({key:e.name,mapType:this.props.mapType},e.cfg,e.props||{},{items:e.items||[]})),o=e.title?c().createElement(b.Z,{msgId:e.title}):null;return e.wrap?c().createElement(m.Collapse,{key:"mapToolBar-item-collapse-"+e.name,in:this.props.activePanel===e.name},c().createElement(m.Panel,{header:o,style:this.props.panelStyle,className:this.props.panelClassName},n)):n})))),T(this,"mergeHandlers",((e,t)=>Object.keys(t).reduce(((n,o)=>l()(n,{[o]:e[o]?(0,g.qC)(e[o],t[o]):t[o]})),e))),T(this,"addTooltip",((e,t)=>{if(t.tooltip){let n=c().createElement(m.Tooltip,{id:this.props.id+"-"+t.name+"-tooltip"},c().createElement(b.Z,{msgId:t.tooltip}));return c().createElement(f.Z,{key:this.props.id+"-"+t.name+"-overlay",rootClose:!0,placement:"left",overlay:n},e)}return e}))}render(){const e=this.props.container;return c().createElement("span",{id:this.props.id,style:this.props.containerWrapperStyle},c().createElement(e,{id:this.props.id+"-container",style:this.props.style,className:this.props.className},this.renderTools()),this.renderPanels())}}T(x,"propTypes",{id:a().string.isRequired,container:a().func,containerWrapperStyle:a().object,tool:a().oneOfType([a().object,a().func]),className:a().string,style:a().object,tools:a().array,panels:a().array,mapType:a().string,toolStyle:a().string,activeStyle:a().string,toolSize:a().string,stateSelector:a().string.isRequired,eventSelector:a().string,panelStyle:a().object,panelClassName:a().string,activePanel:a().string,toolCfg:a().object}),T(x,"contextTypes",{messages:a().object,router:a().object}),T(x,"defaultProps",{container:m.Panel,className:"tools-container",style:{},toolStyle:"default",activeStyle:"primary",tools:[],panels:[],tool:v.Z,mapType:"leaflet",eventSelector:"onClick",panelStyle:{},panelClassName:"tools-container-panel",toolSize:null,toolCfg:{}});const E=x},286969:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var o=n(124852),r=n.n(o),s=n(45697),l=n.n(s),i=n(171703),a=n(727418),p=n.n(a);const c=e=>t=>t.localConfig&&t.localConfig.plugins&&!!t.localConfig.plugins[e];var m=n(36549),u=n(630294),g=n(638510),h=n(488400),y=n(301698);function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(28604);const b=(0,m.Z)(u.DropdownButton),f=(0,i.connect)((()=>({noCaret:!0,pullRight:!0,bsStyle:"primary",title:r().createElement(u.Glyphicon,{glyph:"1-menu-manage"}),tooltipId:"manager.managerMenu",tooltipPosition:"bottom"})),{})(b);class v extends r().Component{constructor(){super(...arguments),d(this,"getTools",(()=>[{element:r().createElement("span",{key:"burger-menu-title"},this.props.title)},...this.props.entries.filter((e=>this.props.enableRulesManager||"/rules-manager"!==e.path)).filter((e=>this.props.enableImporter||"/importer"!==e.path)).filter((e=>this.props.enableContextManager||"/context-manager"!==e.path)).sort(((e,t)=>e.position-t.position)).map((e=>({action:t=>(t.router.history.push(e.path),this.props.itemSelected(e.id),{type:"@@router/LOCATION_CHANGE",payload:{action:t.router.history.action,isFirstRendering:!1,location:t.router.history.location}}),text:e.msgId?r().createElement(h.Z,{msgId:e.msgId}):e.text,cfg:{...e}})))]))}render(){return"ADMIN"===this.props.role?r().createElement(g.Z,{id:this.props.id,className:"square-button",container:f,mapType:this.props.mapType,toolStyle:"primary",activeStyle:"default",stateSelector:"burgermenu",eventSelector:"onSelect",tool:u.MenuItem,tools:this.getTools(),panelStyle:this.props.panelStyle,panelClassName:this.props.panelClassName}):null}}d(v,"propTypes",{id:l().string,dispatch:l().func,role:l().string,entries:l().array,title:l().node,onItemClick:l().func,itemSelected:l().func,controls:l().object,mapType:l().string,panelStyle:l().object,panelClassName:l().string,enableRulesManager:l().bool,enableImporter:l().bool,enableContextManager:l().bool}),d(v,"contextTypes",{messages:l().object,router:l().object}),d(v,"defaultProps",{id:"mapstore-manager-menu",entries:[{msgId:"users.title",glyph:"1-group-mod",path:"/manager/usermanager"},{msgId:"contextManager.title",glyph:"wrench",path:"/context-manager"},{msgId:"rulesmanager.menutitle",glyph:"admin-geofence",path:"/rules-manager"},{msgId:"importer.title",glyph:"upload",path:"/importer"}],role:"",onItemClick:()=>{},itemSelected:()=>{},title:r().createElement(u.MenuItem,{header:!0},"Manager"),controls:[],mapType:"leaflet",panelStyle:{minWidth:"300px",right:"52px",zIndex:100,position:"absolute",overflow:"auto"},panelClassName:"toolbar-panel",enableContextManager:!1});const S={ManagerMenuPlugin:p()((0,i.connect)((e=>({enableRulesManager:c("rulesmanager")(e),enableImporter:c("importer")(e),controls:e.controls,role:e.security&&e.security.user&&e.security.user.role})),{itemSelected:y.i})(v),{OmniBar:{name:"managermenu",position:1,tool:!0,priority:1}}),reducers:{}}},665840:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(923645),r=n.n(o)()((function(e){return e[1]}));r.push([e.id,".ms2 #mapstore-burger-menu {\n    position: absolute;\n    right: 0;\n    top: 0;\n}\n\n.ms2 .burger-menu-submenu {\n    display: none;\n    position: absolute;\n    left: -160px;\n    top: 0;\n    width: 160px;\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.175);\n}\n\n.ms2 .burger-menu-submenu li a {\n    display: block;\n    padding: 10px 15px;\n}\n\n.ms2 .burger-menu-submenu li a:hover {\n    text-decoration: none;\n}\n\n.ms2 #mapstore-burger-menu .dropdown-menu>li>a:hover>span>.burger-menu-submenu,\n.ms2 .burger-menu-submenu>li>a:hover>span>.burger-menu-submenu {\n    display: block;\n}\n\n.ms2 .burger-menu-submenu span {\n    overflow: hidden;\n}\n\n.ms2 #mapstore-navbar #mapstore-burger-menu {\n    position: relative;\n    float: right;\n    left: 0;\n}\n",""]);const s=r},28604:(e,t,n)=>{"use strict";var o=n(893379),r=n.n(o),s=n(665840);r()(s.Z,{insert:"head",singleton:!1}),s.Z.locals}}]);