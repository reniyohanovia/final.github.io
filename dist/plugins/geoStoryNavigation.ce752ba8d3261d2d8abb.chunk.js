(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[227],{346731:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var o=n(124852),s=n.n(o),r=n(8204),a=n(24703),l=n(267152),i=n(959956),c=n(513218),m=n.n(c);const u=e=>{let{settings:t,scrollTo:n=(()=>{}),navigableItems:o=[],currentPage:c={},totalItems:u=1,currentPosition:d=0,router:g,buttons:p=[]}=e;const h=t?.theme?.general,{fontFamily:v,borderColor:b,color:y,backgroundColor:E}=m()(h)&&h||{},{isTitleEnabled:f,isLogoEnabled:C,isNavbarEnabled:P}=t||{},I=p.length>0,k=g&&g.pathname&&g.search&&"true"===(0,i.vl)(g.search).showHome&&g.pathname.includes("/geostory/shared"),N=P&&o?.length>0,S=f||C||N||I||k;return s().createElement("div",{className:"ms-geostory-navigation-bar",style:{color:y,backgroundColor:E,...b&&{borderBottom:`1px solid ${b}`},fontFamily:v}},s().createElement("div",{className:"progress-bar",key:"progress-bar",style:{backgroundColor:b}},s().createElement("div",{className:"progress-percent",style:{width:(d+1)/u*100+"%",backgroundColor:y}})),S&&s().createElement("div",{className:"ms-geostory-navigation-tools"},s().createElement("div",{className:"ms-geostory-navigation-toolbar"},s().createElement(r.Z,{buttons:p}),k&&s().createElement(l.Z,{bsStyle:"default",className:"square-button-md no-border",tooltipPosition:"right",renderUnsavedMapChangesDialog:!1})),s().createElement("div",{className:"ms-geostory-navigation-elements"},N?s().createElement("div",{className:"ms-geostory-navigation-navigable-items"},s().createElement(a.Z,{items:o,currentPage:c,scrollTo:n,getItemStyle:e=>e?{color:E,backgroundColor:y}:{outlineColor:y,borderColor:y}})):null,s().createElement("div",{className:"ms-geostory-navigation-metadata"},f&&s().createElement("div",{className:"ms-geostory-navigation-title",style:{fontSize:t.storyTitleFontSize||"14px"}},t.storyTitle),C&&s().createElement("div",{className:"ms-geostory-navigation-logo"},s().createElement("img",{src:t.thumbnail&&(t.thumbnail.data||t.thumbnail.url)||"",height:32}))))))}},24703:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var o=n(124852),s=n.n(o),r=n(630294),a=n(23279),l=n.n(a),i=n(276614),c=n(580628),m=n(400043),u=n(23888);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d.apply(this,arguments)}const g=e=>{let{tabindex:t,text:n,selected:o,style:r}=e;return s().createElement(u.Z,{tabindex:t,className:(o?"active":"btn-tray")+" btn-xs btn-default",style:r},n)},p=(0,c.Z)((e=>{let{currentPage:t,items:n,scrollTo:a=(()=>{}),width:c,height:p,deltaSwipeSize:h=200,transition:v=300,updateTimeDebounceTime:b=500,getItemStyle:y=(()=>({}))}=e;const{isStartControlActive:E,isEndControlActive:f,containerPropsHandlers:C,contentPropsHandlers:P,itemPropsHandlers:I,moveToDeltaSize:k,moveItemInViewById:N}=(0,i.Z)({direction:"horizontal",width:c,height:p,transition:v,deltaScroll:h}),S=t&&t.columns&&t.sectionId&&t.columns[t.sectionId]||t&&t.sectionId,Z=(e,n,o)=>o===m.ID.CAROUSEL?t&&t.sectionId===e:n===e,T=(0,o.useRef)(null);return(0,o.useEffect)((()=>(T.current=l()((e=>{N(e,{margin:32})}),b),()=>{T.current&&(T.current.cancel(),T.current=null)})),[]),(0,o.useEffect)((()=>{T.current&&(T.current.cancel(),T.current(S))}),[S]),s().createElement("div",d({},C(),{className:"ms-horizontal-menu"}),s().createElement("div",P(),n.map((e=>{let{title:n,id:o,type:r}=e;const l=I({id:o,onClick:()=>{t&&t.sectionId!==o&&a(o)}});return s().createElement("div",d({},l,{className:"ms-menu-item"}),s().createElement(g,{tabindex:"-1",id:o,text:n||"title",selected:Z(o,S,r),style:y(Z(o,S,r))}))}))),E&&s().createElement(u.Z,{className:"square-button-md no-border",style:{position:"absolute"},onClick:()=>k(h)},s().createElement(r.Glyphicon,{glyph:"chevron-left"})),f&&s().createElement(u.Z,{className:"square-button-md no-border",style:{position:"absolute",right:0},onClick:()=>k(-h)},s().createElement(r.Glyphicon,{glyph:"chevron-right"})))}))},267152:(e,t,n)=>{"use strict";n.d(t,{D:()=>E,Z:()=>C});var o=n(124852),s=n.n(o),r=n(23888),a=n(45697),l=n.n(a),i=n(630294),c=n(401811),m=n(804504),u=n(283604),d=n(227361),g=n.n(d),p=n(478718),h=n.n(p),v=n(234228);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},b.apply(this,arguments)}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=()=>{const e=v.ZP.getConfigProp("miscSettings");return g()(e,["homePath"],"/")};class f extends s().Component{constructor(){super(...arguments),y(this,"checkUnsavedChanges",(()=>{this.props.renderUnsavedMapChangesDialog?this.props.onCheckMapChanges(this.goHome):(this.props.onCloseUnsavedDialog(),this.goHome())})),y(this,"goHome",(()=>{this.context.router.history.push(E())}))}render(){const{tooltipPosition:e,hidden:t,...n}=this.props;let o=s().createElement(i.Tooltip,{id:"toolbar-home-button"},s().createElement(m.Z,{msgId:"gohome"}));return!t&&s().createElement(s().Fragment,null,s().createElement(c.Z,{overlay:o,placement:e},s().createElement(r.Z,b({id:"home-button",className:"square-button",bsStyle:this.props.bsStyle,onClick:this.checkUnsavedChanges,tooltip:o},h()(n,["disabled","active","block","componentClass","href","children","icon","bsStyle","className"])),s().createElement(i.Glyphicon,{glyph:this.props.icon}))),s().createElement(u.Z,{ref:"unsavedMapModal",show:this.props.displayUnsavedDialog||!1,onClose:this.props.onCloseUnsavedDialog,title:s().createElement(m.Z,{msgId:"resources.maps.unsavedMapConfirmTitle"}),buttons:[{bsStyle:"primary",text:s().createElement(m.Z,{msgId:"resources.maps.unsavedMapConfirmButtonText"}),onClick:this.goHome},{text:s().createElement(m.Z,{msgId:"resources.maps.unsavedMapCancelButtonText"}),onClick:this.props.onCloseUnsavedDialog}],fitContent:!0},s().createElement("div",{className:"ms-detail-body"},s().createElement(m.Z,{msgId:"resources.maps.unsavedMapConfirmMessage"}))))}}y(f,"propTypes",{icon:l().string,onCheckMapChanges:l().func,onCloseUnsavedDialog:l().func,displayUnsavedDialog:l().bool,renderUnsavedMapChangesDialog:l().bool,tooltipPosition:l().string,bsStyle:l().string,hidden:l().bool}),y(f,"contextTypes",{router:l().object,messages:l().object}),y(f,"defaultProps",{icon:"home",onCheckMapChanges:()=>{},onCloseUnsavedDialog:()=>{},renderUnsavedMapChangesDialog:!0,tooltipPosition:"left",bsStyle:"primary",hidden:!1});const C=f},351980:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var o=n(124852),s=n.n(o),r=n(171703),a=n(22222),l=n(152543),i=n(400043),c=n(796205),m=n(243023),u=n(468181),d=n(346731);const g=(0,l.rx)("GeoStoryNavigation",{component:(0,r.connect)((0,a.zB)({mode:c.eK,settings:c.TQ,currentPage:c.PR,currentPosition:c.u5,totalItems:c.CK,navigableItems:(0,c.w)({includeAlways:!1}),pathname:m.F,search:m.y}))((e=>{let{mode:t=i.nl.VIEW,currentPage:n,currentPosition:o,totalItems:r,settings:a,navigableItems:l=[],pathname:c,search:m,items:u=[]}=e;const g=u.filter((e=>{let{tool:t}=e;return t})).map((e=>{let{tool:t}=e;return{Element:t}}));return t===i.nl.VIEW?s().createElement("div",{key:"geostory-navigation",className:"ms-geostory-navigation",style:{width:"100%",position:"relative"}},s().createElement(d.Z,{settings:a,currentPage:n,currentPosition:o,totalItems:r,scrollTo:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth"};(0,i.M1)(e,t)},navigableItems:l,router:{pathname:c,search:m},buttons:g})):null})),reducers:{geostory:u.Z}})}}]);