(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[5795],{495020:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>O});var i=o(124852),s=o.n(i),n=o(45697),r=o.n(n),l=o(171703),d=o(22222),a=o(867076),g=o(152543),c=o(274363),u=o(952273),p=o(492838),h=o(725211),f=o(748928),w=o(906351),m=o(424707),W=o(350126);function b(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const v=(0,a.compose)((0,l.connect)((0,d.P1)(c.J9,u.E5,u.p,u.Jb,u.h9,(e=>(0,W.ic)(e,{right:!0})),(e=>e.browser&&e.browser.mobile),u.zm,((e,t,o,i,s,n,r,l)=>({id:e,widgets:t,layouts:o,maximized:i,dependencies:s,mapLayout:n,isMobileAgent:r,dropdownWidgets:l}))),{editWidget:p.uT,updateWidgetProperty:p.Ij,exportCSV:p.sD,toggleCollapse:p.f,toggleCollapseAll:p.Ff,toggleMaximize:p.Pt,exportImage:p.Rb,deleteWidget:p.E9,onLayoutChange:p.c_}),(0,a.compose)((0,w.Gv)({debounceTime:20,closest:!0,querySelector:".fill"}),(0,w.ZY)({overrideWidthProvider:!1}),(0,a.withProps)((e=>{let{isMobileAgent:t,width:o,mapLayout:i,singleWidgetLayoutBreakpoint:s=1024}=e;const n=i?.right??0,r=t||o<=s,l=r?0:500;return{backgroundSelectorOffset:r?t?40:60:0,isSingleWidgetLayout:r,viewWidth:o-(n+55+l),rightOffset:n,leftOffset:l,singleWidgetLayoutBreakpoint:s}})),(0,a.withProps)((function(){let{width:e,height:t,maximized:o,leftOffset:i,viewWidth:s,isSingleWidgetLayout:n,singleWidgetLayoutMaxHeight:r=300,singleWidgetLayoutMinHeight:l=200,backgroundSelectorOffset:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=n?(t-d-120)/2:t-d-120,g=n?1:4,c=n?a>r?r:a<l?l:r:Math.floor(a/g-20),u=o?.widget?{width:"100%",height:"100%",marginTop:0,bottom:"auto",top:0,left:0,zIndex:1330}:{},p=o?.widget?{width:e,useDefaultWidthProvider:!1,rowHeight:t-50,breakpoints:{xxs:0},cols:{xxs:1}}:{};return{rowHeight:c,className:"on-map",breakpoints:n?{xxs:0}:{md:0},cols:{md:6,xxs:1},...e?{width:s-1}:{},useDefaultWidthProvider:!1,style:{left:i+"px",bottom:65+d,height:n?c:Math.floor((t-100)/(c+10))*(c+10),width:s+"px",position:"absolute",zIndex:50,...u},...p}}))),(0,a.compose)((0,a.defaultProps)({toolsOptions:{showPin:"user.role===ADMIN",seeHidden:"user.role===ADMIN",showHide:!1,showCollapse:!0,showMaximize:!0}}),(0,h.Z)("toolsOptions",{asObject:!0}),(0,a.compose)((0,l.connect)((0,d.P1)(u.Xu,(e=>({tray:e})))),(0,a.withPropsOnChange)(["toolsOptions","tray"],(e=>{let{toolsOptions:t,tray:o}=e;return{toolsOptions:t?{...t,showCollapse:t.showCollapse&&o}:t}}))),(0,a.withPropsOnChange)(["widgets","toolsOptions"],(e=>{let{widgets:t=[],toolsOptions:o={}}=e;return{widgets:t.filter((e=>{let{hide:t}=e;return!t||o.seeHidden}))}})),(0,a.compose)((0,a.withState)("activeWidget","setActiveWidget",!1),(0,a.withHandlers)({toggleCollapse:e=>t=>{const o=e.widgets?.find((t=>t.id===e.activeWidget?.id));e.isSingleWidgetLayout&&o?e.toggleCollapseAll():e.toggleCollapse(t)}}),(0,a.withPropsOnChange)(["dropdownWidgets","toolsOptions"],(e=>{let{dropdownWidgets:t=[],toolsOptions:o={}}=e;return{dropdownWidgets:t.filter((e=>{let{hide:t}=e;return!t||o.seeHidden}))}})),(0,a.withPropsOnChange)(["widgets","isSingleWidgetLayout","id"],(e=>{let{widgets:t,isSingleWidgetLayout:o,activeWidget:i,setActiveWidget:s}=e;t.length&&o&&!i&&s(t[0])})),(0,a.withPropsOnChange)(["activeWidget","isSingleWidgetLayout","widgets"],(e=>{let{activeWidget:t,dropdownWidgets:o,isSingleWidgetLayout:i,widgets:s,toolsOptions:n,layouts:r,setActiveWidget:l}=e;if(t&&i&&s.length){const e={...t,options:{activeWidget:t,dropdownWidgets:o,...t.options??{},singleWidget:!0,setActiveWidget:l}};return{canEdit:!1,toolsOptions:{...n,showPin:!1},layouts:{...r,xxs:[...r.xxs.map((e=>({...e,h:1,w:1,x:0,y:0})))]},widgets:[e]}}return!1})))))(m.Z);class y extends s().Component{render(){return this.props.enabled?s().createElement(v,this.props):null}}b(y,"propTypes",{enabled:r().bool}),b(y,"defaultProps",{enabled:!0});const P=(0,f.Z)(y),O=(0,g.rx)("WidgetsPlugin",{component:P,containers:{TOC:{doNotHide:!0,name:"Widgets"}},reducers:{widgets:o(890827).Z},epics:o(660834).ZP})},748928:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});var i=o(22222),s=o(171703),n=o(350126),r=o(101092);const l=(0,s.connect)((0,i.P1)(n.Jz,n.VM,r.c0,((e,t,o)=>({enabled:!e&&!t&&!o}))))},725211:(e,t,o)=>{"use strict";o.d(t,{Z:()=>b});var i=o(867076),s=o(171703),n=o(22222),r=o(274363),l=o(510644),d=o(227361),a=o.n(d),g=o(984596),c=o.n(g),u=o(66604),p=o.n(u),h=o(747037),f=o.n(h),w=o(701469),m=o.n(w);const W=e=>{let{accessInfo:t,postProcessValue:o,reduceFun:i}=e;return e=>{let s=c()(e),n=i;return s.length>1&&"__OR__"===s[0]&&(n=(e,t)=>e||t,s=s.slice(1)),s.map((e=>{let s=e;if(m()(s))return W({accessInfo:t,postProcessValue:o,reduceFun:i})(s);let n=!1;s&&f()(s)&&s.startsWith("!")&&(n=!0,s=s.substr(1));const r=e=>n?!e:e,l=f()(s)&&s.split(":");if(l&&l[0]){const e=l[0].split(/\!\=\=?/),i=l[0].split(/\=\=?\=?/);return e.length>1?r(o(a()(t,e[0]),s)!==e[1]):i.length>1?r(o(a()(t,i[0]),s)===i[1]):r(o(a()(t,l[0]),s))}return s})).reduce(n||((e,t)=>e&&t))}},b=function(){return(0,i.compose)((0,s.connect)((0,n.P1)(r.J9,r._H,l.np,((e,t,o)=>({accessInfo:{mapId:e,mapInfo:t,user:o}})))),function(e){let{asObject:t=!1,postProcessValue:o=(e=>e),reduceFun:s,accessInfo:n="accessInfo"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.withPropsOnChange)([e,n],(function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t?{[e]:p()(i[e],W({accessInfo:i[n],postProcessValue:o,reduceFun:s}))}:{[e]:W({accessInfo:i[n],postProcessValue:o,reduceFun:s})(i[e])}}))}(...arguments))}}}]);