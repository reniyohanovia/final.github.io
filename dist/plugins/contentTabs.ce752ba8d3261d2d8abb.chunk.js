(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[3655],{956611:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(747037),s=n.n(o),r=n(45697),l=n.n(r),i=n(124852),a=n.n(i),p=n(630294),c=n(719648);function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends a().Component{constructor(){super(...arguments),m(this,"onMouseOver",(()=>{const e=s()(this.props.helpText)?this.props.helpText:(0,c.S$)(this.context.messages,this.props.helpText.props.msgId);this.props.changeHelpText(e),this.props.changeHelpwinVisibility(!0)}))}render(){return a().createElement(p.Badge,{id:this.props.id,onMouseOver:this.onMouseOver,className:(this.props.isVisible?"":"hidden ")+(this.props.className?this.props.className:"")},"?")}}m(u,"propTypes",{id:l().string,helpText:l().oneOfType([l().string,l().element]),isVisible:l().bool,changeHelpText:l().func,changeHelpwinVisibility:l().func,className:l().string}),m(u,"contextTypes",{messages:l().object}),m(u,"defaultProps",{helpText:"",isVisible:!1});const d=u},12824:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Z});var o=n(727418),s=n.n(o),r=n(45697),l=n.n(r),i=n(124852),a=n.n(i),p=n(630294),c=n(171703),m=n(22222),u=n(930363),d=n(804504),h=n(49977),y=n.n(h),g=n(3674),b=n.n(g),f=n(630998),v=n.n(f),T=n(291966),S=n.n(T),E=n(371714),C=n(933468),P=n(237490),j=n(372492);const x={updateMapsDashboardTabs:(e,t)=>{let{getState:n=(()=>{})}=t;return e.ofType(E.qy).switchMap((()=>y().Observable.forkJoin(e.ofType(E.IL).take(1),e.ofType(C.tv).take(1),e.ofType(P.En).take(1),e.ofType(j.gx).take(1)).switchMap((e=>{const t={maps:e[0].maps,dashboards:e[1],geostories:e[2]},{contenttabs:o={}}=n()||{},{selected:s,hiddenTabs:r={}}=o;if(t[s]&&0===t[s].totalCount){const e=b()(t).filter((e=>(t[e]||{}).totalCount>0&&!r[e]))[0];if(e)return y().Observable.of((0,u.NS)(e))}return y().Observable.empty()}))))},updateSelectedOnHiddenTabs:(e,t)=>e.ofType(u.QH).switchMap((()=>{const e=t.getState(),{selected:n,hiddenTabs:o={}}=e.contenttabs,s=b()(o).filter((e=>!!o[e]));return v()(s,(e=>e===n))>-1?y().Observable.of((0,u.NS)(S()(["dashboards","geostories","maps","contexts"],s)[0])):y().Observable.empty()}))};var N=n(638510);function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const w=(0,m.P1)((e=>e&&e.contenttabs&&e.contenttabs.selected),(e=>e&&e.contenttabs&&e.contenttabs.hiddenTabs),((e,t)=>({selected:e,hiddenTabs:t}))),O=e=>{let{item:t={},index:n}=e;return a().createElement("span",null,t.title||`Tab ${n}`)};class H extends a().Component{constructor(){super(...arguments),k(this,"handleSelect",(()=>{}))}render(){return a().createElement(p.Grid,{id:this.props.id},a().createElement(p.Row,null,a().createElement(p.Col,null,a().createElement("h2",null,a().createElement(d.Z,{msgId:"resources.contents.title"})),a().createElement(N.Z,{id:"content-tabs-container",style:this.props.style,className:this.props.className,toolCfg:{title:""},container:e=>a().createElement("div",e,a().createElement("div",{style:{marginTop:"10px"}},a().createElement(p.Nav,{bsStyle:"tabs",activeKey:"1",onSelect:e=>this.props.onSelect(e)},[...this.props.items].filter((e=>!this.props.hiddenTabs[e.name])).sort(((e,t)=>e.position-t.position)).map(((e,t)=>{let{TitleComponent:n=O,...o}=e;return a().createElement(p.NavItem,{key:o.key||t,active:(o.key||t)===this.props.selected,eventKey:o.key||t},a().createElement(n,{index:t,item:o}))})))),e.children),toolStyle:"primary",stateSelector:"contentTabs",activeStyle:"default",tools:[...this.props.items].sort(((e,t)=>e.position-t.position)).filter(((e,t)=>{let{key:n}=e;return(n||t)===this.props.selected})),panels:[]}))))}}k(H,"propTypes",{selected:l().oneOfType([l().number,l().string]),className:l().string,style:l().object,items:l().array,hiddenTabs:l().object,id:l().string,onSelect:l().func}),k(H,"defaultProps",{selected:0,items:[],hiddenTabs:{},className:"content-tabs",style:{},id:"content-tabs",onSelect:()=>{}});const Z={ContentTabsPlugin:s()((0,c.connect)(w,{onSelect:u.NS})(H),{NavMenu:{position:2,label:a().createElement(d.Z,{msgId:"resources.contents.title"}),linkId:"#content-tabs",glyph:"dashboard"}}),reducers:{contenttabs:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selected:"maps"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.Qp:return{...e,selected:t.id||"maps"};case u.QH:return{...e,hiddenTabs:{...e.hiddenTabs||{},...t.tabs}};default:return e}}},epics:x}},638510:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var o=n(353131),s=n.n(o),r=n(727418),l=n.n(r),i=n(45697),a=n.n(i),p=n(124852),c=n.n(p),m=n(630294),u=n(171703),d=n(12838),h=n(687753),y=n(723813),g=n(956611),b=n(804504),f=n(401811),v=n(23888);function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},T.apply(this,arguments)}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=(0,u.connect)((e=>({isVisible:e.controls&&e.controls.help&&e.controls.help.enabled})),{changeHelpText:y.n2,changeHelpwinVisibility:y.SA})(g.Z);class C extends c().Component{constructor(){super(...arguments),S(this,"getToolConfig",(e=>e.tool?{}:this.props.toolCfg)),S(this,"getTool",(e=>{if(e.tool)return!0===e.tool?e.plugin:e.tool;let t=()=>({});const n={};return e.exclusive?(t=t=>({active:t.controls&&t.controls[this.props.stateSelector]&&t.controls[this.props.stateSelector].active===e.name}),n[this.props.eventSelector]=h.Xg.bind(null,this.props.stateSelector,"active",e.name,!0)):e.toggle?(t=t=>({bsStyle:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]?this.props.activeStyle:this.props.toolStyle,active:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]||!1}),n[this.props.eventSelector]=h.Xi.bind(null,e.toggleControl||e.name,e.toggleProperty||null)):e.action&&(n[this.props.eventSelector]=s()(e.action,this.context),t=e.selector||t),(0,u.connect)(t,n,((e,t,n)=>this.mergeHandlers({...n,...e},t)))(this.props.tool)})),S(this,"renderTool",((e,t)=>{if(e.element)return e.element;const n=e.help?c().createElement(E,{className:"mapstore-helpbadge",helpText:e.help}):c().createElement("span",null),o=e.tooltip?c().createElement(b.Z,{msgId:e.tooltip}):null,s=this.getTool(e),r=this.getToolConfig(e),l=e.childTools||[];return this.addTooltip(c().createElement(s,T({},r,{pluginCfg:e.cfg,tooltip:o,style:e.style,btnSize:this.props.toolSize,bsStyle:this.props.toolStyle,help:n,key:e.name||"tool"+t,mapType:this.props.mapType},e.cfg,{items:e.items||[]}),e.cfg&&e.cfg.glyph?c().createElement(m.Glyphicon,{glyph:e.cfg.glyph}):e.icon,n," ",e.text,l.length>0&&c().createElement(C,T({},e.innerProps,{mapType:this.props.mapType,tools:l,panels:e.childPanels}))),e)})),S(this,"renderTools",(()=>this.props.tools.map(this.renderTool))),S(this,"renderPanels",(()=>this.props.panels.filter((e=>!e.panel.loadPlugin)).map((e=>{const t=e.panel,n=c().createElement(t,T({key:e.name,mapType:this.props.mapType},e.cfg,e.props||{},{items:e.items||[]})),o=e.title?c().createElement(b.Z,{msgId:e.title}):null;return e.wrap?c().createElement(m.Collapse,{key:"mapToolBar-item-collapse-"+e.name,in:this.props.activePanel===e.name},c().createElement(m.Panel,{header:o,style:this.props.panelStyle,className:this.props.panelClassName},n)):n})))),S(this,"mergeHandlers",((e,t)=>Object.keys(t).reduce(((n,o)=>l()(n,{[o]:e[o]?(0,d.qC)(e[o],t[o]):t[o]})),e))),S(this,"addTooltip",((e,t)=>{if(t.tooltip){let n=c().createElement(m.Tooltip,{id:this.props.id+"-"+t.name+"-tooltip"},c().createElement(b.Z,{msgId:t.tooltip}));return c().createElement(f.Z,{key:this.props.id+"-"+t.name+"-overlay",rootClose:!0,placement:"left",overlay:n},e)}return e}))}render(){const e=this.props.container;return c().createElement("span",{id:this.props.id,style:this.props.containerWrapperStyle},c().createElement(e,{id:this.props.id+"-container",style:this.props.style,className:this.props.className},this.renderTools()),this.renderPanels())}}S(C,"propTypes",{id:a().string.isRequired,container:a().func,containerWrapperStyle:a().object,tool:a().oneOfType([a().object,a().func]),className:a().string,style:a().object,tools:a().array,panels:a().array,mapType:a().string,toolStyle:a().string,activeStyle:a().string,toolSize:a().string,stateSelector:a().string.isRequired,eventSelector:a().string,panelStyle:a().object,panelClassName:a().string,activePanel:a().string,toolCfg:a().object}),S(C,"contextTypes",{messages:a().object,router:a().object}),S(C,"defaultProps",{container:m.Panel,className:"tools-container",style:{},toolStyle:"default",activeStyle:"primary",tools:[],panels:[],tool:v.Z,mapType:"leaflet",eventSelector:"onClick",panelStyle:{},panelClassName:"tools-container-panel",toolSize:null,toolCfg:{}});const P=C}}]);