(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[9392],{403410:(e,t,o)=>{"use strict";o.d(t,{hn:()=>n,yg:()=>r,vD:()=>i,jJ:()=>a,oy:()=>s,W:()=>p,B1:()=>l,fU:()=>c,cY:()=>d});const n="ADDITIONALLAYER:ADD_ADDITIONAL_LAYERS",r="ADDITIONALLAYER:REMOVE_ADDITIONAL_LAYER",i="ADDITIONALLAYER:REMOVE_ALL_ADDITIONAL_LAYERS",a="ADDITIONALLAYER:UPDATE_ADDITIONAL_LAYER",s="ADDITIONALLAYER:UPDATE_OPTIONS_BY_OWNER",p=function(e,t){return{type:a,id:e,owner:t,actionType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"override",options:arguments.length>3?arguments[3]:void 0}},l=(e,t)=>({type:s,owner:e,options:t}),c=function(){let{id:e,owner:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:r,id:e,owner:t}},d=e=>({type:i,owner:e})},483058:(e,t,o)=>{"use strict";o.d(t,{fy:()=>n,gd:()=>r,zZ:()=>i,ZR:()=>a});const n="BOX_END",r="CHANGE_BOX_SELECTION_STATUS";function i(e){return{type:n,boxEndInfo:e}}function a(e){return{type:r,status:e}}},253816:(e,t,o)=>{"use strict";o.d(t,{F2:()=>n,fu:()=>r,NF:()=>i,WP:()=>a,_E:()=>s});const n="HIGHLIGHT_STATUS",r="UPDATE_HIGHLIGHTED",i="HIGHLIGHT:SET_HIGHLIGHT_FEATURES_PATH";function a(e){return{type:i,featuresPath:e}}function s(e,t){return{type:r,features:e,status:t}}},387869:(e,t,o)=>{"use strict";o.d(t,{Z:()=>y});var n=o(49977),r=o.n(n),i=o(91175),a=o.n(i),s=o(757660),p=o(687753),l=o(926854),c=o(546952),d=o(333101),u=o(612912),m=o(4143),g=o(943650),h=o(399790);const y={accessMetadataExplorer:e=>e.ofType(s.xT).switchMap((()=>r().Observable.of((0,p.Xg)("metadataexplorer","enabled",!0),(0,s.vw)(!1),(0,c.Dw)("default_map_backgrounds")))),addBackgroundPropertiesEpic:e=>e.ofType(s.oQ).switchMap((e=>{let{modalParams:t}=e;const o=r().Observable.of((0,s.$c)({...t,loading:!1}));return t.layer&&"wms"===t.layer.type?r().Observable.of((0,s.$c)({...t,loading:!0})).concat((0,g.kB)(t.layer).switchMap((e=>r().Observable.of((0,s.$c)({...t,loading:!1,capabilities:(0,h.IA)(e)})))).catch((()=>o))):o})),backgroundsListInit:e=>e.ofType(l.ok).switchMap((e=>{let{config:t}=e;const o=t.map&&t.map.backgrounds||[],n=(t.map&&t.map.layers||[]).filter((e=>"background"===e.group)),i=o.filter((e=>!!e.thumbnail)).map((e=>(0,d.He)(e.id,{thumbURL:(e=>{const t=atob(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0];let n=new ArrayBuffer(t.length),r=new Uint8Array(n);for(let e=0;e<t.length;++e)r[e]=t.charCodeAt(e);return URL.createObjectURL(new Blob([n],{type:o}))})(e.thumbnail)}))),p=a()(n.filter((e=>e.visibility)));return r().Observable.of(...i.concat((0,s.M3)(o)),...p?[(0,s.ke)(p.id)]:[])})),setCurrentBackgroundLayerEpic:(e,t)=>e.ofType(s.Wv).switchMap((e=>{let{layerId:o}=e;const n=t.getState(),i=(0,u.CA)(n,o);return r().Observable.of(...i&&"background"===i.group?[(0,p.Xg)("backgroundSelector","tempLayer",i),(0,p.Xg)("backgroundSelector","currentLayer",i)]:[])})),backgroundAddedEpic:(e,t)=>e.ofType(s.gC).mergeMap((e=>{let{layerId:o}=e;const n=t.getState(),i=(0,u.CA)(n,o);return i?r().Observable.of((0,d.He)(i.id,{visibility:!0}),(0,s.ke)(i.id),(0,s.V3)()):r().Observable.empty()})),backgroundEditedEpic:(e,t)=>e.ofType(s.dG).mergeMap((e=>{let{layerId:o}=e;const n=t.getState();return(0,u.CA)(n,o)?r().Observable.of((0,s.V3)()):r().Observable.empty()})),backgroundRemovedEpic:(e,t)=>e.ofType(s.H_).mergeMap((e=>{let{backgroundId:o}=e;const n=t.getState(),i=(0,u.CA)(n,o),p=(0,m.TP)(n)||[],l=(0,u.DP)(n)||{},c=o===l.id?a()(p.filter((e=>e.id!==o&&!e.invalid))):l;return i?r().Observable.of((0,d.ZF)(o,"layers"),(0,d.He)(c.id,{visibility:!0}),(0,s.ke)(c.id)):r().Observable.empty()})),syncSelectedBackgroundEpic:e=>e.ofType(s.K2).take(1).switchMap((t=>{let{id:o}=t;return e.ofType(d.oE).filter((e=>{let{layer:t}=e;return t.id===o})).switchMap((()=>r().Observable.of((0,s.pW)(o)))).takeUntil(e.ofType(s.gC))}))}},882150:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>Re});var n=o(45697),r=o.n(n),i=o(124852),a=o.n(i),s=o(152543);var p=o(472986),l=o.n(p),c=o(893379),d=o.n(c),u=o(92623);d()(u.Z,{insert:"head",singleton:!1}),u.Z.locals;var m=o(804504),g=o(234228),h=o(859518),y=o(747037),f=o.n(y),b=o(274363),E=o(101092),v=o(612912),T=o(227361),w=o.n(T),L=o(22222),O=o(351546);const C=e=>w()(e,e&&e.featuregrid&&e.featuregrid.open&&e.featuregrid.showFilteredObject?"query.filterObj.spatialField":"emptyObject"),S=e=>C(e)&&C(e).geometry,x=(0,L.P1)([e=>S(e)&&S(e).coordinates||[],e=>S(e)&&S(e).type||"Polygon",e=>S(e)&&S(e).id||"spatial_object",e=>S(e)&&S(e).projection||"EPSG:3857"],((e,t,o,n)=>{let r={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:t,coordinates:e},style:{fillColor:"#FFFFFF",fillOpacity:"0.2",color:"#ffcc33"},id:o}]};return e.length>0&&t?(0,O.reprojectGeoJson)(r,n,"EPSG:4326").features:[]})),M=(0,L.P1)([x,e=>w()(e,e&&e.highlight&&e.highlight.featuresPath||"highlight.emptyFeatures")||[]],((e,t)=>[...t,...e]));var P=o(510644),A=o(707366),k=o(665529),I=o(904160),N=o(618446),D=o.n(N);const _=(0,I.oz)(D())(b.pb,b.Od,E.$v,v.Hi,M,(e=>e.mapInitialConfig&&e.mapInitialConfig.loadingError&&e.mapInitialConfig.loadingError.data),P.y8,b.zT,E.m6,k.wk,k.c3,A.KV,((e,t,o,n,r,i,a,s,p,l,c,d)=>({projectionDefs:e,map:t,mapType:o,layers:n,features:r,loadingError:i,securityToken:a,elevationEnabled:s,shouldLoadFont:p,isLocalizedLayerStylesEnabled:l,localizedLayerStylesName:c,currentLocaleLanguage:d})));var F=o(171703),j=o(630294);const Z=(0,L.P1)(b.Od,E.$v,E.c0,((e,t,o)=>({map:e,mapType:t,isCesium:o}))),R={updateConfigAction:h.aN},H=(0,F.connect)(Z,R)((e=>{let{map:t,mapType:o,isCesium:n,updateConfigAction:r,mapOptions:i}=e;const s={...i&&i[o]||g.ZP.getConfigProp("defaultMapOptions")&&g.ZP.getConfigProp("defaultMapOptions")[o]||{},...t?.mapOptions},p=(e,t)=>{r({[t]:!e[t]})};return n?a().createElement("form",null,a().createElement(j.FormGroup,null,a().createElement(j.ControlLabel,null,a().createElement(m.Z,{msgId:"map.settings.title"}))),a().createElement(j.Checkbox,{checked:s.showSkyAtmosphere,onChange:()=>p(s,"showSkyAtmosphere")},a().createElement(m.Z,{msgId:"map.settings.skyAtmosphere"})),a().createElement(j.Checkbox,{checked:s.showGroundAtmosphere,onChange:()=>p(s,"showGroundAtmosphere")},a().createElement(m.Z,{msgId:"map.settings.groundAtmosphere"})),a().createElement(j.Checkbox,{checked:s.enableFog,onChange:()=>p(s,"enableFog")},a().createElement(m.Z,{msgId:"map.settings.fog"})),a().createElement(j.Checkbox,{checked:s.depthTestAgainstTerrain,onChange:()=>p(s,"depthTestAgainstTerrain")},a().createElement(m.Z,{msgId:"map.settings.depthTest"}))):null}));var z=o(146619),G=o(815179),V=o(296252),B=o(727418),U=o.n(B);const W={drawStatus:null,drawOwner:null,drawMethod:null,options:{},features:[],tempFeatures:[],snapping:!1,snappingIsLoading:!1,snappingLayer:!1},Y={edge:!0,vertex:!0,pixelTolerance:10,strategy:"bbox"};var X=o(483058);const K={status:null};var $=o(253816);const J={status:"disabled",layer:"featureselector",features:[],highlighted:0,featuresPath:"highlight.emptyFeatures",emptyFeatures:[]};var q=o(962565),Q=o(403410),ee=o(91175),te=o.n(ee),oe=o(535937),ne=o.n(oe),re=o(406557),ie=o.n(re),ae=o(513218),se=o.n(ae),pe=o(701469),le=o.n(pe);var ce=o(49977),de=o.n(ce),ue=o(333101),me=o(926854),ge=o(412961),he=o(350126),ye=o(687753),fe=o(399790),be=o(835516),Ee=o(504518),ve=o(917450),Te=o(66604),we=o.n(Te);const Le={checkMapPermissions:(e,t)=>{let{getState:o=(()=>{})}=t;return e.ofType(ge.XP).filter((()=>(0,b.J9)(o()))).map((()=>{const e=(0,b.J9)(o());return(0,me.I6)(e)}))},handleCreationLayerError:(e,t)=>e.ofType(h.TF).delay(500).switchMap((e=>{const o=(0,E.$v)(t.getState()),n=(0,v.CA)(t.getState(),e.options.id);return n&&(0,fe.yJ)(n,o)?de().Observable.from([(0,ue.He)(e.options.id,{invalid:!0})]):de().Observable.empty()})),handleCreationBackgroundError:(e,t)=>e.ofType(h.TF).delay(500).filter((e=>{const o=(0,v.x)(t.getState());return o&&e.options.id===o.id&&"background"===e.options.group})).switchMap((e=>{const o=(0,E.$v)(t.getState()),n=te()((0,v.pV)(t.getState()).filter((t=>(0,fe.yJ)(t,o)&&t.id!==e.options.id)));return n?de().Observable.from([(0,ue.He)(n.id,{visibility:!0}),(0,ye.Xg)("backgroundSelector","currentLayer",n),(0,ye.Xg)("backgroundSelector","tempLayer",n),(0,Ee.Kp)({title:"warning",message:"notification.backgroundLayerNotSupported",action:{label:"close"},position:"tc"})]):de().Observable.of((0,Ee.Kp)({title:"warning",message:"notification.noBackgroundLayerSupported",action:{label:"close"},position:"tc"}))})),resetMapOnInit:e=>e.ofType(h.Ec).switchMap((()=>de().Observable.of((0,Q.cY)(),(0,ye.fV)(),(0,ue.nN)(),(0,ve.XP)()))),resetLimitsOnInit:(e,t)=>e.ofType(me.ok,h.Li).switchMap((()=>{const e=(0,b.A0)(t.getState()),o=(0,b.zj)(t.getState()),n=(0,b.S)(t.getState());return de().Observable.of((0,h.BV)({restrictedExtent:o,crs:e,minZoom:n}))})),zoomToExtentEpic:(e,t)=>{let{getState:o=(()=>{})}=t;return e.ofType(h.Qy).switchMap((e=>{const t=(e=>{if(le()(e))return e.map((e=>"string"==typeof e||e instanceof String?Number(e):e));if(se()(e)){const t=we()(e,(e=>"string"==typeof e||e instanceof String?Number(e):e));return[t.minx,t.miny,t.maxx,t.maxy]}return null})(e.extent);if(!t)return de().Observable.empty();const n=be.default.getHook(be.default.ZOOM_TO_EXTENT_HOOK),r=(0,he.CF)(o());if(n){const{crs:o,maxZoom:i,options:a={}}=e;return n(t,{crs:o,padding:r,maxZoom:i,...a}),de().Observable.empty()}return((e,t)=>{let o=0,{extent:n=[]}=e,r=O.default.reprojectBbox(n,e.crs,t.bbox&&t.bbox.crs||"EPSG:4326");if(r){let i=O.default.reproject(be.default.getCenterForExtent(n,e.crs),e.crs,"EPSG:4326");if("EPSG:4326"===e.crs&&n&&n[0]<=-180&&n[1]<=-90&&n[2]>=180&&n[3]>=90)o=1;else{let r=O.default.reprojectBbox(n,e.crs,t.projection||"EPSG:4326");o=be.default.getZoomForExtent(r,t.size,0,21,null)}e.maxZoom&&o>e.maxZoom&&(o=e.maxZoom);let a={minx:r[0],miny:r[1],maxx:r[2],maxy:r[3]},s={...t.bbox,bounds:a};return de().Observable.of((0,h.o6)(i,o,s,t.size,e.mapStateSource,t.projection,t.viewerOptions))}return de().Observable.empty()})({...e,extent:t},(0,b.Od)(o()))}))}};var Oe=o(387305);function Ce(e){return{type:"CHANGE_SELECTION_STATE",geomType:e.geomType,point:e.point,line:e.line,polygon:e.polygon}}var Se=o(308602);const xe=()=>a().createElement("span",null);var Me=o(117931),Pe=o(738839),Ae=o(867517),ke=o(23888);const Ie=function(e){let{show:t,error:o,onReload:n}=e;return t?a().createElement("div",{className:"ms-map-error-panel",style:{position:"absolute",width:"100%",height:"100%",color:"#ffffff",background:"rgba(0, 0, 0, 0.75)",zIndex:100,top:0,left:0,display:"flex",alignItems:"center",justifyContent:"center"}},a().createElement("div",{style:{maxWidth:500}},a().createElement("h1",null,a().createElement(Ae.Z,{msgId:"map.renderingErrorTitle"})),a().createElement("p",null,a().createElement(Ae.Z,{msgId:"map.renderingErrorMessage"})),o?.message&&a().createElement(j.Alert,{bsStyle:"danger"},a().createElement("small",null,o.message)),n&&a().createElement(ke.Z,{bsStyle:"primary",onClick:()=>n()},a().createElement(m.Z,{msgId:"map.reloadMap"})))):null};var Ne=o(23939),De=o(387869),_e=o(964091);function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},Fe.apply(this,arguments)}function je(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class Ze extends a().Component{constructor(){super(...arguments),je(this,"state",{canRender:!0}),je(this,"getHighlightLayer",((e,t,o)=>{const n=this.state.plugins;return a().createElement(n.Layer,{type:"vector",srs:e,position:t,key:"highlight",options:{name:"highlight"},env:o},this.props.features.map((t=>a().createElement(n.Feature,{msId:t.id,key:t.id,crs:e,type:t.type,style:t.style||null,geometry:t.geometry}))))})),je(this,"getTool",(e=>f()(e)?{name:e,impl:this.state.plugins.tools[e]}:e[this.props.mapType]||e)),je(this,"getConfigMapOptions",(()=>this.props.mapOptions&&this.props.mapOptions[this.props.mapType]||g.ZP.getConfigProp("defaultMapOptions")&&g.ZP.getConfigProp("defaultMapOptions")[this.props.mapType]||{})),je(this,"renderLayers",(()=>{const e=this.props.map.projection||"EPSG:3857",t=[];this.props.isLocalizedLayerStylesEnabled&&t.push({name:this.props.localizedLayerStylesName,value:this.props.currentLocaleLanguage});const o=this.state.plugins;return[...this.props.layers,...this.props.additionalLayers].filter(this.filterLayer).map(((n,r)=>a().createElement(o.Layer,{type:n.type,srs:e,position:r,key:n.id||n.name,options:n,securityToken:this.props.securityToken,env:t},this.renderLayerContent(n,e)))).concat(this.props.features&&this.props.features.length&&this.getHighlightLayer(e,this.props.layers.length,t)||[])})),je(this,"renderLayerContent",((e,t)=>{const o=this.state.plugins;return e.features?e.features.filter((0,Pe.createFeatureFilter)(e.filterObj)).map((n=>a().createElement(o.Feature,{key:n.id,msId:n.id,type:n.type,crs:t,geometry:n.geometry,features:n.features,featuresCrs:e.featuresCrs||"EPSG:4326",layerStyle:e.style,style:n.style||e.style||null,properties:n.properties}))):null})),je(this,"renderSupportTools",(()=>{const e=this.props.items.filter((e=>{let{Tool:t}=e;return!!t})).map((e=>{let{Tool:t,name:o,cfg:n}=e;return a().createElement(t,Fe({},n,{key:o,mapType:this.props.mapType}))}));return this.props.tools.map((e=>{const t=this.getTool(e),o=this.props.toolsOptions[t.name]&&this.props.toolsOptions[t.name][this.props.mapType]||this.props.toolsOptions[t.name]||{};return a().createElement(t.impl,Fe({key:t.name},o))})).concat(e)})),je(this,"filterLayer",(e=>!e.useForElevation||"cesium"===this.props.mapType||this.props.elevationEnabled)),je(this,"updatePlugins",(e=>{this.currentMapType=e.mapType,e.onLoadingMapPlugins(!0),this.setState({plugins:void 0}),((e,t)=>Promise.all([o(657606)("./"+e+"/index"),o(188455)("./"+e+"/plugins/index")]).then((o=>{let[n]=o;const r=n.default,i=(0,F.connect)((e=>({projectionDefs:(0,b.pb)(e),mousePosition:(0,b.x9)(e)})),U()({},{onMapViewChanges:h.o6,onClick:h.FP,onMouseMove:h.ou,onLayerLoading:ue.Yz,onLayerLoad:ue.kI,onLayerError:ue.XG,onWarning:Ee.Kp,onMouseOut:h.NE},t),((e,t,o)=>U()({},o,e,U()({},t,{onMouseMove:e.mousePosition?t.onMouseMove:()=>{}}))))(r.LMap),a=(0,F.connect)((e=>({...e.draw??{},snappingLayerInstance:(0,Se.lM)(e)})),{onChangeDrawingStatus:V.Yf,onEndDrawing:V.fo,onGeometryChanged:V.Vw,onSelectFeatures:V.KD,onDrawingFeatures:V.uj,onDrawStopped:V.lo,setCurrentStyle:V.PY,toggleSnappingIsLoading:V.sc})(r.DrawSupport||xe),s=(0,F.connect)((0,L.P1)((e=>(e=>e&&e.box&&e.box.status)(e)),(e=>({status:e}))),{onBoxEnd:X.zZ})(r.BoxSelectionSupport||xe),p=(0,F.connect)((e=>e.highlight||{}),{updateHighlighted:$._E})(r.HighlightFeatureSupport||xe),l=(0,F.connect)((e=>({selection:e.selection||{}})),{changeSelectionState:Ce})(r.SelectionSupport||xe),c=(0,F.connect)(null,{onWarning:Ee.Kp})(r.Layer||xe),d=[],u=(0,F.connect)((0,L.P1)((e=>e.mapPopups&&e.mapPopups.popups||d),(e=>({popups:e}))),{onPopupClose:Oe.hC})(r.PopupSupport||xe);return{Map:i,Layer:c,Feature:r.Feature||xe,tools:{overview:r.Overview||xe,scalebar:r.ScaleBar||xe,draw:a,highlight:p,selection:l,popup:u,box:s},mapType:e}})))(e.mapType,e.actions).then((t=>{this._isMounted&&t.mapType===this.currentMapType&&(this.setState({plugins:t}),e.onLoadingMapPlugins(!1,e.mapType),e.onMapTypeLoaded(!0,e.mapType))}))}))}UNSAFE_componentWillMount(){const{shouldLoadFont:e,fonts:t}=this.props;e&&t&&(this.setState({canRender:!1}),Promise.all(t.map((e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((o,n)=>{!function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=n;if({NODE_ENV:"production"}.isTest){const e={},t=t=>(e[t]=e[t]||{rootCount:0,iframesCreated:!1,timedOut:!1,fontLoaded:!1,requiredExtraTimeout:!1},e[t]);window.reporter=window.reporter||{modifyRootCount(e,o){t(e).rootCount+=o},iframesCreated(e){t(e).iframesCreated=!0},timedOut(e){t(e).timedOut=!0},fontLoaded(e){t(e).fontLoaded=!0},requiredExtraTimeout(e){t(e).requiredExtraTimeout=!0},getTests:()=>e}}o.timeoutAfter&&setTimeout((()=>{r&&({NODE_ENV:"production"}.isTest&&window.reporter.modifyRootCount(a,-1),document.body.removeChild(r),r=0,o.onTimeout&&({NODE_ENV:"production"}.isTest&&window.reporter.timedOut(a),o.onTimeout()))}),o.timeoutAfter),i=()=>{r&&r.firstChild.clientWidth===r.lastChild.clientWidth&&({NODE_ENV:"production"}.isTest&&window.reporter.modifyRootCount(a,-1),document.body.removeChild(r),r=0,{NODE_ENV:"production"}.isTest&&window.reporter.fontLoaded(a),t())},{NODE_ENV:"production"}.isTest&&window.reporter.modifyRootCount(a,1),{NODE_ENV:"production"}.isLegacy||i(document.body.appendChild(r=document.createElement("div")).innerHTML='<div style="position:fixed;white-space:pre;bottom:999%;right:999%;font:999px '+(o.generic?"":"'")+n+(o.generic?"":"'")+',serif">'+(o.sampleText||" ")+'</div><div style="position:fixed;white-space:pre;bottom:999%;right:999%;font:999px '+(o.generic?"":"'")+n+(o.generic?"":"'")+',monospace">'+(o.sampleText||" ")+"</div>"),{NODE_ENV:"production"}.isLegacy&&i(document.body.appendChild(r=document.createElement("div")).innerHTML='<table style=position:absolute;bottom:999%;right:999%;width:auto><tr><td style=position:relative><tr><td style="font:999px monospace;white-space:pre">.<span style="font:999px '+(o.generic?"":"'")+n+(o.generic?"":"'")+',serif">'+(o.sampleText||" ")+'</span>.</table><table style=position:absolute;bottom:999%;right:999%;width:auto><tr><td style=position:relative><tr><td style="font:999px monospace;white-space:pre">.<span style="font:999px '+(o.generic?"":"'")+n+(o.generic?"":"'")+',monospace">'+(o.sampleText||" ")+"</span>.</table>"),r&&({NODE_ENV:"production"}.isTest&&window.reporter.iframesCreated(a),{NODE_ENV:"production"}.isLegacy||(r.firstChild.appendChild(n=document.createElement("iframe")).style.width="999%",n.contentWindow.onresize=i,r.lastChild.appendChild(n=document.createElement("iframe")).style.width="999%",n.contentWindow.onresize=i),{NODE_ENV:"production"}.isLegacy&&(r.firstChild.firstChild.firstChild.firstChild.appendChild(n=document.createElement("iframe")).style.cssText="position:absolute;bottom:999%;right:999%;width:999%",n.attachEvent?n.contentWindow.attachEvent("onresize",i):n.contentWindow.onresize=i,r.lastChild.firstChild.firstChild.firstChild.appendChild(n=document.createElement("iframe")).style.cssText="position:absolute;bottom:999%;right:999%;width:999%",n.attachEvent?n.contentWindow.attachEvent("onresize",i):n.contentWindow.onresize=i),{NODE_ENV:"production"}.isTest||(n=setTimeout(i)),{NODE_ENV:"production"}.isTest&&(n=setTimeout((function(){r&&(window.reporter.requiredExtraTimeout(a),i())}))))}(e,o,{timeoutAfter:t.timeoutAfter,onTimeout:n,sampleText:t.sampleText,generic:t.generic})}))}(e,{timeoutAfter:5e3}).catch((e=>{console.warn("Fonts loading check for map style responded slowly or with an error. Fonts in map may not be rendered correctly. This is not necessarily an issue.",e)}))))).then((()=>{this.setState({canRender:!0})}))),this.updatePlugins(this.props),this._isMounted=!0}UNSAFE_componentWillReceiveProps(e){e.mapType===this.props.mapType&&e.actions===this.props.actions||this.updatePlugins(e)}componentWillUnmount(){this._isMounted=!1}render(){if(this.props.map&&this.state.canRender&&this.state.plugins){const{mapOptions:e={}}=this.props.map;return a().createElement(this.state.plugins.Map,Fe({id:"map"},this.props.options,{projectionDefs:this.props.projectionDefs},this.props.map,{mapOptions:{...this.getConfigMapOptions(),...e},zoomControl:this.props.zoomControl,onResolutionsChange:this.props.onResolutionsChange,errorPanel:Ie}),this.renderLayers(),this.renderSupportTools())}return this.props.loadingError?a().createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"mapErrorMessage"},a().createElement(m.Z,{msgId:"map.loadingerror"}),":",this.props.loadingError):a().createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"mapLoadingMessage"},this.props.loadingSpinner?a().createElement(l(),{spinnerName:"circle",overrideSpinnerClassName:"spinner"}):null,a().createElement(m.Z,{msgId:this.props.mapLoadingMessage}))}}je(Ze,"propTypes",{mapType:r().string,map:r().object,layers:r().array,additionalLayers:r().array,zoomControl:r().bool,mapLoadingMessage:r().string,loadingSpinner:r().bool,loadingError:r().string,tools:r().array,fonts:r().array,options:r().object,mapOptions:r().object,projectionDefs:r().array,toolsOptions:r().object,onResolutionsChange:r().func,actions:r().object,features:r().array,securityToken:r().string,shouldLoadFont:r().bool,elevationEnabled:r().bool,isLocalizedLayerStylesEnabled:r().bool,localizedLayerStylesName:r().string,currentLocaleLanguage:r().string,items:r().array,onLoadingMapPlugins:r().func,onMapTypeLoaded:r().func}),je(Ze,"defaultProps",{mapType:"leaflet",actions:{},zoomControl:!1,mapLoadingMessage:"map.loading",loadingSpinner:!0,tools:["scalebar","draw","highlight","popup","box"],options:{},mapOptions:{},fonts:["FontAwesome"],toolsOptions:{measurement:{},locate:{},scalebar:{leaflet:{position:"bottomright"}},overview:{overviewOpt:{position:"bottomright",collapsedWidth:25,collapsedHeight:25,zoomLevelOffset:-5,toggleDisplay:!0},layers:[{type:"osm"}]}},securityToken:"",additionalLayers:[],shouldLoadFont:!1,elevationEnabled:!1,onResolutionsChange:()=>{},items:[],onLoadingMapPlugins:()=>{},onMapTypeLoaded:()=>{}});const Re=(0,s.rx)("Map",{component:(0,s.$j)(_,{onResolutionsChange:h.SO,onMapTypeLoaded:h.Mk})((0,Me.Z)(Ze)),reducers:{map:z.Z,layers:G.Z,draw:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V.hZ:return U()({},e,{drawStatus:t.status,drawOwner:t.owner,drawMethod:t.method,options:t.options,features:t.features,style:t.style});case V.kD:return U()({},e,{currentStyle:t.currentStyle});case V.DI:return U()({},e,{tempFeatures:t.features});case V.IC:return U()({},e,{tempFeatures:[]});case V.G_:return{...e,snapping:!e.snapping};case V.uB:return{...e,snappingLayer:t.snappingLayer,snappingIsLoading:!1};case V.Rh:return{...e,snappingIsLoading:!e.snappingIsLoading};case V.vU:return{...e,snapConfig:{...{...Y,...t.pluginCfg?.snapConfig||{}},...e?.snapConfig??{},...t.prop&&void 0!==t.value?{[t.prop]:t.value}:{}}};default:return e}},box:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;return t.type===X.gd?U()({},e,{status:t.status}):e},highlight:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $.NF:return U()({},e,{featuresPath:t.featuresPath||"highlight.emptyFeatures"});case $.F2:return{...e,status:t.status};case $.fu:return{...e,highlighted:t.features.length,features:t.features,status:t.status||e.status};default:return e}},maptype:q.Z,additionallayers:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q.jJ:{const o=ne()({id:t.id,owner:t.owner,actionType:t.actionType,options:t.options},ie()),n=te()(e.filter((e=>{let{id:t}=e;return t===o.id})));return n?e.map((e=>e.id===o.id?{...n,...o}:{...e})):[...e,o]}case Q.hn:return e.concat(t.layers);case Q.oy:{const{options:o,owner:n}=t;return e.map(((e,t)=>e.owner===n?{...e,options:se()(o)&&o[e.id]||le()(o)&&o[t]||{}}:{...e}))}case Q.yg:{const{id:o,owner:n}=t;return n?e.filter((e=>e.owner!==n)):e.filter((e=>e.id!==o))}case Q.vD:return t.owner?e.filter((e=>e.owner!==t.owner)):[];default:return e}}},epics:{...Le,...De.Z,...(0,Ne.Z)(_e.Z)},containers:{Settings:()=>({tool:a().createElement(H,null),position:2})}})},308602:(e,t,o)=>{"use strict";o.d(t,{lM:()=>u,jP:()=>m,Qp:()=>g,l:()=>h,$N:()=>y});var n=o(227361),r=o.n(n),i=o(513218),a=o.n(i),s=o(612912),p=o(820709),l=o(904160),c=o(399790),d=o(707366);const u=e=>!!e?.draw?.snappingLayer&&((0,s.CA)(e,e.draw.snappingLayer)??(0,s.iv)(e,e.draw.snappingLayer)),m=e=>r()(e,"draw.snapping",!1),g=e=>r()(e,"draw.snappingIsLoading",!1),h=e=>r()(e,"draw.snapConfig",!1),y=(0,l.oz)(((e,t)=>e===t||a()(e)&&a()(t)&&e?.id===t?.id&&e?.title===t?.title))([s.l2,s.KL,p.Li,u,h,d.Pz],(function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;const a=n?.id,s=o?.id,p=t.filter((e=>(r?.additionalLayers??[]).includes(e.id))).map((e=>e.options)).concat(e);return(s?[{value:s,label:(0,c.in)(o,i),active:s===a}]:[]).concat(p.map((e=>!(e.id===s||!["wms","wfs","vector"].includes(e?.type)||"wms"===e?.type&&"wfs"!==e?.search?.type||"background"===e.group||!e.visibility)&&{value:e.id,label:(0,c.in)(e,i),active:e.id===a})).filter(Boolean))}))},92623:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});var n=o(923645),r=o.n(n)()((function(e){return e[1]}));r.push([e.id,".ms2 .mapErrorMessage {\n    font-size: 16px;\n    color: red;\n}\n",""]);const i=r},188455:(e,t,o)=>{var n={"./cesium/plugins/index":[570531,9,6212,949,5792,531,5578],"./leaflet/plugins/index":[72183,7,5243,1263,2183],"./openlayers/plugins/index":[532454,9,317,5604,5986,302,9141,2454,3715,8728]};function r(e){if(!o.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return Promise.all(t.slice(2).map(o.e)).then((()=>o.t(r,16|t[1])))}r.keys=()=>Object.keys(n),r.id=188455,e.exports=r},657606:(e,t,o)=>{var n={"./cesium/index":[134748,6212,949,9692,8401,8826],"./leaflet/index":[692621,5243,2201,5831,320,5085,4175],"./openlayers/index":[148103,1704,317,8471,302,8256,2682,9141,7849,6053,1260,3715,8678,8103]};function r(e){if(!o.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return Promise.all(t.slice(1).map(o.e)).then((()=>o(r)))}r.keys=()=>Object.keys(n),r.id=657606,e.exports=r}}]);