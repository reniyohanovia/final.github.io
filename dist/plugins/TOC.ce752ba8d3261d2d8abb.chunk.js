(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[2362],{16075:(e,t,o)=>{"use strict";o.d(t,{H:()=>f,k:()=>L});var r=o(333101),a=o(467763),s=o(487758),i=o(470509),l=o.n(i),n=o(472500),p=o.n(n),c=o(727418),d=o.n(c),u=o(505055),m=o.n(u);const h={describeCoverage:function(e,t){const o=p().parse(e,!0),r=p().format(d()({},o,{query:d()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},o.query)}));return l().get(r).then((e=>{let t;return m().parseString(e.data,{explicitArray:!1},((e,o)=>{t=o})),t}))}};var y=o(399790),g=o(227361),T=o.n(g),v=o(988594);function f(e,t,o){return i=>a.ZP.describeLayer(e,t.name,o).then((o=>o&&"WFS"===o.owsType?s.v$(e,o.name).then((e=>(o.geometryType=(0,v.mI)(e),i((0,r.tV)(t.id,"id",{describeLayer:o,describeFeatureType:e}))))).catch((()=>i((0,r.tV)(t.id,"id",{describeLayer:o||{error:"no describe feature found"}})))):(o&&"WCS"===o.owsType&&h.describeCoverage(e,o.name).then((e=>{let a=T()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");o.bands=a&&"string"==typeof a?["1"]:a.map(((e,t)=>t+1+"")),i((0,r.tV)(t.id,"id",{describeLayer:o,describeCoverage:e}))})).catch((()=>i((0,r.tV)(t.id,"id",{describeLayer:o||{error:"no describe coverage found"}})))),i((0,r.tV)(t.id,"id",{describeLayer:o||{error:"no describe Layer found"}}))))).catch((e=>i((0,r.tV)(t.id,"id",{describeLayer:{error:e.status}}))))}function L(e,t){const o=(0,y.Fh)(e);return s=>(s((0,r.tV)(e.id,"id",{capabilitiesLoading:!0})),a.ZP.getCapabilities(o,t).then((t=>{const o=a.ZP.parseLayerCapabilities(t,e);s(o?(0,r.tV)(e.id,"id",(0,y.IA)(o)):(0,r.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((t=>{s((0,r.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))})))}},289496:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const Bootstrap=__webpack_require__(630294),Message=__webpack_require__(804504).Z,React=__webpack_require__(124852),RenderTemplate=function(comp,props){let model=props.model;return eval(comp)},__WEBPACK_DEFAULT_EXPORT__=RenderTemplate},977873:(module,__unused_webpack_exports,__webpack_require__)=>{function _defineProperty(e,t,o){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}const React=__webpack_require__(124852),PropTypes=__webpack_require__(45697),isEqual=__webpack_require__(618446),{parseTemplate}=__webpack_require__(348660);class Template extends React.Component{constructor(){super(...arguments),_defineProperty(this,"renderContent",(()=>{let model=this.props.model,props=this.props;return eval(this.comp)})),_defineProperty(this,"parseTemplate",(e=>{parseTemplate(e,((e,t)=>{t?this.props.onError(t.message):(this.comp=e,this.forceUpdate())}))}))}UNSAFE_componentWillMount(){this.parseTemplate(this.props.template)}UNSAFE_componentWillReceiveProps(e){e.template!==this.props.template&&(this.comp=null,this.parseTemplate(e.template))}shouldComponentUpdate(e){return!isEqual(e,this.props)}render(){if(this.comp){let e=this.props.renderContent?this.props.renderContent(this.comp,this.props):this.renderContent();return React.isValidElement(e)?e:null}return null}}_defineProperty(Template,"propTypes",{template:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),model:PropTypes.object,renderContent:PropTypes.func,onError:PropTypes.func}),_defineProperty(Template,"defaultProps",{template:"",model:{},onError:()=>{}}),module.exports=Template},446937:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>Be});var r=o(45697),a=o.n(r),s=o(124852),i=o.n(s),l=o(171703),n=o(867076),p=o(630294),c=o(333101),d=o(564864),u=o(16075),m=o(859518),h=o(504518),y=o(612912),g=o(744448),T=o(274363),v=o(707366),f=o(119008),L=o(975872),b=o(510644),E=o(665529),x=o(399790),w=o(835516),A=o(719648),S=o(804504),R=o(727418),G=o.n(R),C=o(829626),P=o.n(C),D=o(513218),O=o.n(D),Z=o(91175),_=o.n(Z),M=o(313311),I=o.n(M),N=o(59854),k=o.n(N),F=o(687753),j=o(492838),B=o(546952),Y=o(134479),U=o(101092),q=o(904160),W=o(618446),H=o.n(W),V=o(888307),Q=o(603754);function z(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class $ extends i().Component{constructor(){super(...arguments),z(this,"renderTitle",(()=>i().createElement(p.Row,null,i().createElement(p.Col,{xs:12,className:"mapstore-toc-head-title-container text-center no-border"},i().createElement("div",{className:"mapstore-toc-head-title",title:this.props.title},i().createElement(p.Glyphicon,{glyph:"1-map"}),"  ",this.props.title))))),z(this,"renderFilter",(()=>i().createElement(p.Row,null,i().createElement(p.Col,{xs:12,className:"text-center"},i().createElement(Q.Z,{onFocus:this.props.onClear,filterPlaceholder:this.props.filterPlaceholder,tooltipClear:this.props.filterTooltipClear,filterText:this.props.filterText,onFilter:this.props.onFilter}))))),z(this,"renderTools",(()=>i().createElement(p.Row,null,i().createElement(p.Col,{xs:12,className:"text-center"},this.props.toolbar))))}render(){const e=[this.props.showTools,this.props.showFilter,this.props.showTitle].filter((e=>e)),t=e.length>0?" toc-head-sections-"+e.length:" toc-head-sections";return i().createElement("div",{className:"mapstore-toc-head"+t},i().createElement(p.Grid,{fluid:!0},this.props.showTitle?this.renderTitle():null,this.props.showFilter?this.renderFilter():null,this.props.showTools?this.renderTools():null))}}z($,"propTypes",{title:a().string,filterText:a().string,filterPlaceholder:a().oneOfType([a().object,a().string]),showTitle:a().bool,showFilter:a().oneOfType([a().bool,a().number]),showTools:a().bool,toolbar:a().object,onFilter:a().func,onClear:a().func,filterTooltipClear:a().oneOfType([a().object,a().string])}),z($,"defaultProps",{title:"",filterText:"",filterPlaceholder:"Filter",showTitle:!0,showFilter:!0,showTools:!0,toolbar:null,onFilter:()=>{},onClear:()=>{},filterTooltipClear:"Clear"});const K=$;var J=o(159398),X=o(401811),ee=o(913460),te=o(893379),oe=o.n(te),re=o(505386);oe()(re.Z,{insert:"head",singleton:!1}),re.Z.locals;var ae=o(701469),se=o.n(ae),ie=o(747037),le=o.n(ie),ne=o(977873),pe=o.n(ne),ce=o(590504),de=o(466737),ue=o(289496),me=o(3674),he=o.n(me),ye=o(473071),ge=o(959956),Te=o(23888);function ve(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class fe extends i().Component{constructor(e){var t;super(e),t=this,ve(this,"renderMetadata",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a=(e,o)=>i().createElement("div",{style:{display:"flex",flexDirection:"row"}},e,i().createElement(Te.Z,{style:{margin:"4px 0 0 4px"},className:"square-button-md no-border",onClick:()=>((e,o)=>{t.setState({collapsed:{...t.state.collapsed,[e]:o}})})(o,!t.state.collapsed[o])},i().createElement(p.Glyphicon,{glyph:t.state.collapsed[o]?"plus":"minus"}))),s=he()(e).filter((e=>"references"!==e)).map((o=>{const s=e[o],l=`${r}.${o}`;let n;const p=`toc.layerMetadata.${o}`,c=(0,A.S$)(t.context.messages,p)===p?i().createElement(S.Z,{msgId:"toc.layerMetadata.defaultPropName",msgParams:{propName:o}}):i().createElement(S.Z,{msgId:p}),d=e=>i().createElement("tr",null,i().createElement("td",null,c),i().createElement("td",null,e));if(se()(s))if(s.length){const e=`toc.layerMetadata.itemTitles.${o}`,r=(0,A.S$)(t.context.messages,e),p=r===e?(0,A.S$)(t.context.messages,"toc.layerMetadata.itemTitles.default"):r,m=s.map(((e,o)=>{const r=`${l}@item_${o}`;return O()(e)?t.renderMetadata(e,s.length>1?a(i().createElement("h4",null,`${p} #${o+1}`),r):null,r):i().createElement("li",{key:o},e)}));n=O()(s[0])?(u=i().createElement("div",null,a(i().createElement("h4",null,c),l),t.state.collapsed[l]?null:i().createElement("div",null,m)),i().createElement("tr",null,i().createElement("td",{colSpan:"2"},u))):d(i().createElement("ul",null,m))}else n=null;else if(le()(s)){const e=(0,ye.v)(s),t=(0,ge.K2)(s);n=d(e||t?i().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t?s:`mailto:${s}`},s):s)}var u;return n})).filter((e=>!!e));return i().createElement("div",{style:r?{padding:"8px"}:{}},o,t.state.collapsed[r]?null:i().createElement(p.Table,null,i().createElement("tbody",null,s)))})),this.state={collapsed:{}}}renderEmpty(){return i().createElement("div",null,i().createElement(S.Z,{msgId:"toc.layerMetadata.emptyMetadata"}))}render(){const e=this.props.model;return he()(e).length?i().createElement("div",{style:{maxHeight:"400px",overflow:"auto"},id:e.identifier},this.renderMetadata(e)):this.renderEmpty()}}ve(fe,"propTypes",{model:a().object}),ve(fe,"contextTypes",{messages:a().object}),ve(fe,"defaultProps",{model:{}});const Le=fe;function be(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class Ee extends i().Component{constructor(){super(...arguments),be(this,"onDelete",(()=>{this.props.hideLayerMetadata()})),be(this,"onClose",(()=>{this.props.hideLayerMetadata()})),be(this,"getTemplate",(()=>{const e=this.props.metadataTemplate||Le;if(se()(e)||le()(e)){const t=se()(e)?e.join("\n"):e;return i().createElement(pe(),{model:this.props.layerMetadata.metadataRecord,template:t,renderContent:ue.Z})}const t=e;return i().createElement(t,{model:this.props.layerMetadata.metadataRecord})})),be(this,"renderBodyTemplate",(()=>this.props.layerMetadata.maskLoading?null:this.getTemplate()))}render(){const e=i().createElement("span",{role:"footer"});return this.props.layerMetadata.expanded?i().createElement(de.Z,null,i().createElement(ce.Z,{maskLoading:this.props.layerMetadata.maskLoading,id:this.props.id,style:this.props.panelStyle,className:this.props.panelClassName},i().createElement("span",{role:"header"},i().createElement("span",{className:"layer-settings-metadata-panel-title"},this.props.layerMetadataPanelTitle),i().createElement("button",{onClick:this.onClose,className:"layer-settings-metadata-panel-close close"},this.props.closeGlyph?i().createElement(p.Glyphicon,{glyph:this.props.closeGlyph}):i().createElement("span",null,"×"))),i().createElement("div",{role:"body",style:{minWidth:"500px"}},this.renderBodyTemplate()),e)):null}}be(Ee,"propTypes",{id:a().string,layerMetadata:a().object,metadataTemplate:a().oneOfType([a().string,a().array,a().object,a().func]),hideLayerMetadata:a().func,closeGlyph:a().string,panelStyle:a().object,panelClassName:a().string,maskLoading:a().bool,layerMetadataPanelTitle:a().oneOfType([a().string,a().object])}),be(Ee,"defaultProps",{id:"mapstore-layer-settings-metadata",layerMetadata:{expanded:!1},metadataTemplate:null,closeGlyph:"1-close",panelStyle:{},panelClassName:"toolbar-panel portal-dialog",maskLoading:!0,layerMetadataPanelTitle:""});const xe=Ee;function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},we.apply(this,arguments)}function Ae(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class Se extends i().Component{constructor(){super(...arguments),Ae(this,"state",{showDeleteDialog:!1}),Ae(this,"isNestedGroup",(()=>{const e=this.props.selectedGroups.map((e=>e.id.split(".")));return _()(e.reduce(((e,t)=>e[0]===t[0]?t:[!1]),e[0]))})),Ae(this,"isLoading",(()=>_()(this.props.selectedLayers.filter((e=>e.loading))))),Ae(this,"getStatus",(()=>{const{selectedLayers:e,selectedGroups:t}=this.props,o=this.isNestedGroup();let r=0===e.length&0===t.length?"DESELECT":"";return r=1===e.length&0===t.length?"LAYER":r,r=o?"GROUP":r,r=e.length>1&0===t.length?"LAYERS":r,r=t.length>1&&!o?"GROUPS":r,r=this.props.selectedLayers.length>0&&this.props.selectedLayers.filter((e=>"Error"===e.loadingError)).length===this.props.selectedLayers.length?`${r}_LOAD_ERROR`:r,r})),Ae(this,"getSelectedGroup",(()=>this.props.selectedGroups.length>0&&this.props.selectedGroups[this.props.selectedGroups.length-1])),Ae(this,"getSelectedNodeDepth",(()=>"DESELECT"===this.getStatus()?0:this.getSelectedGroup().id.split(".").length+1)),Ae(this,"addLayer",(()=>{const e=this.getSelectedGroup();this.props.onToolsActions.onAddLayer(e&&e.id)})),Ae(this,"addGroup",(()=>{const e=this.getSelectedGroup();this.props.onToolsActions.onAddGroup(e&&e.id)})),Ae(this,"browseData",(()=>{this.props.onToolsActions.onBrowseData({url:this.props.selectedLayers[0].search.url||this.props.selectedLayers[0].url,name:this.props.selectedLayers[0].name,id:this.props.selectedLayers[0].id})})),Ae(this,"download",(()=>{this.props.onToolsActions.onDownload({url:this.props.selectedLayers[0].search?.url||this.props.selectedLayers[0].url,name:this.props.selectedLayers[0].name,id:this.props.selectedLayers[0].id})})),Ae(this,"checkBbox",(()=>{const e=this.props.selectedLayers.filter((e=>e.bbox)).map((e=>e.bbox)),t=e.length>0?e.reduce(((e,t)=>e.crs===t.crs?e:{crs:"differentCRS"})):{crs:"differentCRS"};return!!_()(e)&&"differentCRS"!==t.crs&&t.crs})),Ae(this,"zoomTo",(()=>{const e=this.props.selectedLayers.filter((e=>e.bbox)).map((e=>e.bbox)),t=e.length>1?e.reduce(((e,t)=>({bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs})),e[0]):e[0];this.props.onToolsActions.onZoom(t.bounds,t.crs)})),Ae(this,"showSettings",(e=>{this.props.settings.expanded?this.props.onToolsActions.onHideSettings():"LAYER"===e||"LAYER_LOAD_ERROR"===e?this.props.onToolsActions.onSettings(this.props.selectedLayers[0].id,"layers",{opacity:parseFloat(void 0!==this.props.selectedLayers[0].opacity?this.props.selectedLayers[0].opacity:1)}):"GROUP"===e&&this.props.onToolsActions.onSettings(this.props.selectedGroups[this.props.selectedGroups.length-1].id,"groups",{})})),Ae(this,"showMetadata",(()=>{this.props.layerMetadata.expanded?this.props.onToolsActions.onHideLayerMetadata():this.props.onToolsActions.onGetMetadataRecord(this.props.options.metadataOptions)})),Ae(this,"removeNodes",(()=>{this.props.selectedLayers.forEach((e=>{this.props.onToolsActions.onRemove(e.id,"layers")})),this.props.selectedGroups.forEach((e=>{this.props.onToolsActions.onRemove(e.id,"groups")})),this.props.onToolsActions.onClear(),this.closeDeleteDialog()})),Ae(this,"reload",(()=>{this.props.selectedLayers.forEach((e=>{this.props.onToolsActions.onShow(e.id,{visibility:!0}),this.props.onToolsActions.onReload(e.id)}))})),Ae(this,"closeDeleteDialog",(()=>{this.setState({showDeleteDialog:!1})})),Ae(this,"displayDeleteDialog",(()=>{this.setState({showDeleteDialog:!0})}))}render(){const e=this.getStatus(),t=this.checkBbox(),o=t&&J.default.defs(t),r=i().createElement(xe,{key:"toollayermetadatamodal",layerMetadata:this.props.layerMetadata,metadataTemplate:this.props.metadataTemplate,hideLayerMetadata:this.props.onToolsActions.onHideLayerMetadata,layerMetadataPanelTitle:this.props.text.layerMetadataPanelTitle});return this.props.activateTool.activateToolsContainer?i().createElement(p.ButtonGroup,null,this.props.activateTool.activateLayerInfoTool&&"DESELECT"===e?i().createElement(X.Z,{key:"layerInfo",placement:"top",overlay:i().createElement(p.Tooltip,{id:"toc-tooltip-layerInfo"},this.props.text.layerInfoTooltip)},i().createElement(Te.Z,{key:"layerInfo",bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onLayerInfo},i().createElement(p.Glyphicon,{glyph:"layer-info"}))):null,!this.props.activateTool.activateAddLayer||"DESELECT"!==e&&"GROUP"!==e?null:i().createElement(X.Z,{key:"addLayer",placement:"top",overlay:i().createElement(p.Tooltip,{id:"toc-tooltip-addLayer"},"GROUP"===e?this.props.text.addLayerToGroupTooltip:this.props.text.addLayerTooltip)},i().createElement(Te.Z,{key:"addLayer",bsStyle:"primary",className:"square-button-md",onClick:this.addLayer},i().createElement(p.Glyphicon,{glyph:"add-layer"}))),this.props.activateTool.activateAddGroup&&("DESELECT"===e||"GROUP"===e)&&this.getSelectedNodeDepth()<=this.props.maxDepth?i().createElement(X.Z,{key:"addGroup",placement:"top",overlay:i().createElement(p.Tooltip,{id:"toc-tooltip-addGroup"},"GROUP"===e?this.props.text.addSubGroupTooltip:this.props.text.addGroupTooltip)},i().createElement(Te.Z,{key:"addGroup",bsStyle:"primary",className:"square-button-md",onClick:this.addGroup},i().createElement(p.Glyphicon,{glyph:"add-folder"}))):null,this.props.activateTool.activateZoomTool&&("LAYER"===e||"GROUP"===e||"LAYERS"===e||"GROUPS"===e)&&t?i().createElement(X.Z,{key:"zoomTo",placement:"top",overlay:i().createElement(p.Tooltip,{id:"toc-tooltip-zoomTo"},o?this.props.text.zoomToTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"]:i().createElement(S.Z,{msgId:"toc.epsgNotSupported",msgParams:{epsg:t||" "}}))},i().createElement(Te.Z,{bsStyle:"primary",className:"square-button-md",style:o?{opacity:1,cursor:"pointer"}:{opacity:.5,cursor:"default"},onClick:o?this.zoomTo:()=>{}},i().createElement(p.Glyphicon,{glyph:"zoom-to"}))):null,!this.props.activateTool.activateSettingsTool||"LAYER"!==e&&"GROUP"!==e&&"LAYER_LOAD_ERROR"!==e||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(X.Z,{key:"settings",placement:"top",overlay:i().createElement(p.Tooltip,{id:"toc-tooltip-settings"},this.props.text.settingsTooltip["LAYER_LOAD_ERROR"===e?"LAYER":e])},i().createElement(Te.Z,{active:this.props.settings.expanded,bsStyle:this.props.settings.expanded?"success":"primary",className:"square-button-md",onClick:()=>{this.showSettings(e)}},i().createElement(p.Glyphicon,{glyph:"wrench"}))),!this.props.activateTool.activateLayerFilterTool||"LAYER"!==e&&"LAYER_LOAD_ERROR"!==e||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(X.Z,{key:"queryPanel",placement:"top",overlay:i().createElement(p.Tooltip,{id:"toc-tooltip-layerFilter"},this.props.text.layerFilterTooltip)},i().createElement(Te.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onQueryBuilder},i().createElement(p.Glyphicon,{glyph:"filter-layer"}))),!this.props.activateTool.activateQueryTool||"LAYER"!==e||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(X.Z,{key:"featuresGrid",placement:"top",overlay:i().createElement(p.Tooltip,{id:"toc-tooltip-featuresGrid"},this.props.text.featuresGridTooltip)},i().createElement(Te.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.browseData},i().createElement(p.Glyphicon,{glyph:"features-grid"}))),(!this.props.activateTool.activateRemoveLayer||"LAYER"!==e&&"LAYERS"!==e&&"LAYER_LOAD_ERROR"!==e&&"LAYERS_LOAD_ERROR"!==e)&&(!this.props.activateTool.activateRemoveGroup||"GROUP"!==e&&"GROUPS"!==e&&"GROUP_LOAD_ERROR"!==e&&"GROUPS_LOAD_ERROR"!==e)||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(X.Z,{key:"removeNode",placement:"top",overlay:i().createElement(p.Tooltip,{id:"toc-tooltip-trash"},this.props.selectedGroups.length?this.props.text.trashTooltip.GROUP:this.props.text.trashTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},i().createElement(Te.Z,{active:this.state.showDeleteDialog,bsStyle:this.props.settings.showDeleteDialog?"success":"primary",className:"square-button-md",onClick:this.displayDeleteDialog},i().createElement(p.Glyphicon,{glyph:"trash"}))),!this.isLoading()&&"LAYER_LOAD_ERROR"===e||"LAYERS_LOAD_ERROR"===e?i().createElement(X.Z,{key:"reload",placement:"top",overlay:i().createElement(p.Tooltip,{id:"toc-tooltip-reload"},this.props.text.reloadTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},i().createElement(Te.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.reload},i().createElement(p.Glyphicon,{glyph:"refresh"}))):null,!this.props.activateTool.activateWidgetTool||"LAYER"!==e||1!==this.props.selectedLayers.length||!this.props.selectedLayers[0].search||"vector"===this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(X.Z,{key:"widgets",placement:"top",overlay:i().createElement(p.Tooltip,{id:"toc-tooltip-widgets"},this.props.text.createWidgetTooltip)},i().createElement(Te.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onNewWidget},i().createElement(p.Glyphicon,{glyph:"stats"}))),!this.props.activateTool.activateDownloadTool||"LAYER"!==e||"wms"!==this.props.selectedLayers[0].type&&!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded?null:i().createElement(X.Z,{key:"downloadTool",placement:"top",overlay:i().createElement(p.Tooltip,{id:"toc-tooltip-downloadTool"},this.props.text.downloadToolTooltip)},i().createElement(Te.Z,{bsStyle:this.props.layerdownload.expanded?"success":"primary",className:"square-button-md",onClick:this.download},i().createElement(p.Glyphicon,{glyph:"download"}))),!this.props.activateTool.activateMetedataTool||"LAYER"!==e||this.props.settings.expanded||this.props.layerdownload.expanded?null:i().createElement(X.Z,{key:"layerMetadata",placement:"top",overlay:i().createElement(p.Tooltip,{id:"legend-tooltip-metadata"},this.props.text.layerMetadataTooltip)},i().createElement(Te.Z,{key:"layer-metadata",bsStyle:this.props.layerMetadata.expanded?"success":"primary",className:"square-button-md",onClick:()=>this.showMetadata()},i().createElement(p.Glyphicon,{glyph:"info-sign"}))),this.props.items.filter((t=>{let{selector:o=(()=>!0)}=t;return o({...this.props,status:e})})).map((t=>{let{Component:o}=t;return i().createElement(o,we({},this.props,{status:e}))})),i().createElement(ee.Z,{ref:"removelayer",options:{animation:!1,className:"modal-fixed"},show:this.state.showDeleteDialog,onHide:this.closeDeleteDialog,onClose:this.closeDeleteDialog,onConfirm:this.removeNodes,titleText:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupText:this.props.text.confirmDeleteText,confirmText:this.props.text.confirmDeleteConfirmText,cancelText:this.props.text.confirmDeleteCancelText,body:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupMessage:this.props.text.confirmDeleteMessage}),r):null}}Ae(Se,"propTypes",{groups:a().array,items:a().array,layers:a().array,selectedLayers:a().array,generalInfoFormat:a().string,selectedGroups:a().array,onToolsActions:a().object,text:a().object,activateTool:a().object,options:a().object,style:a().object,settings:a().object,layerMetadata:a().object,layerdownload:a().object,maxDepth:a().number,metadataTemplate:a().oneOfType([a().string,a().array,a().object,a().func])}),Ae(Se,"defaultProps",{groups:[],items:[],layers:[],selectedLayers:[],selectedGroups:[],onToolsActions:{onZoom:()=>{},onNewWidget:()=>{},onBrowseData:()=>{},onQueryBuilder:()=>{},onUpdate:()=>{},onRemove:()=>{},onClear:()=>{},onSettings:()=>{},onUpdateSettings:()=>{},onRetrieveLayerData:()=>{},onHideSettings:()=>{},onReload:()=>{},onAddLayer:()=>{},onAddGroup:()=>{},onDownload:()=>{},onGetMetadataRecord:()=>{},onHideLayerMetadata:()=>{},onShow:()=>{},onLayerInfo:()=>{}},maxDepth:3,text:{settingsText:"",opacityText:"",elevationText:"",saveText:"",closeText:"",confirmDeleteText:"",confirmDeleteMessage:"",confirmDeleteConfirmText:"",confirmDeleteCancelText:"",createWidgetTooltip:"",addLayerTooltip:"",addLayerToGroupTooltip:"",addGroupTooltip:"",addSubGroupTooltip:"",zoomToTooltip:{LAYER:"",LAYERS:""},settingsTooltip:{LAYER:"",GROUP:""},featuresGridTooltip:"",downloadToolTooltip:"",trashTooltip:{LAYER:"",LAYERS:"",GROUP:""},reloadTooltip:{LAYER:"",LAYERS:""},layerMetadataTooltip:"",layerMetadataPanelTitle:"",layerFilter:"",layerInfoTooltip:""},activateTool:{activateToolsContainer:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateZoomTool:!0,activateQueryTool:!0,activateDownloadTool:!0,activateSettingsTool:!0,activateAddLayer:!0,activateAddGroup:!0,includeDeleteButtonInSettings:!1,activateMetedataTool:!0,activateLayerFilterTool:!0,activateLayerInfoTool:!0},options:{modalOptions:{},metadataOptions:{},settingsOptions:{}},style:{chartStyle:{}},settings:{},layerMetadata:{},layerdownload:{},metadataTemplate:null});const Re=Se;var Ge=o(900226),Ce=o(22387),Pe=o(231010),De=o(964091);function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},Oe.apply(this,arguments)}function Ze(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const _e=(e,t)=>e.reduce(((e,o)=>{let r=G()({},o);return r.nodes&&(r=G()({},r,{nodes:_e(r.nodes,t)})),t.forEach((e=>{r=e.func(r)?G()({},r,e.options):G()({},r)})),e.push(r),e}),[]),Me=(e,t,o)=>-1!==((O()(e.title)?e.title[o]||e.title.default:e.title)||e.name).toLowerCase().indexOf(t.toLowerCase()),Ie=(0,q.oz)(H())((e=>e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active),y.Bt,y.jN,g.yn,y.yj,y.lI,T.Od,v.Pz,v.KV,y.NP,y.wA,y.l2,T.Zs,Y.JF,f.PJ,L.us,U.c0,b.np,E.wk,((e,t,o,r,a,s,i,l,n,p,c,d,u,m,h,y,g,T,v)=>({enabled:e,groups:t,settings:o,swipeSettings:r,layerMetadata:a,layerdownload:s,currentZoomLvl:i&&i.zoom,scales:(0,w.getScales)(i&&i.projection||"EPSG:3857",i&&i.mapOptions&&i.mapOptions.view&&i.mapOptions.view.DPI||null),currentLocale:l,currentLocaleLanguage:n,selectedNodes:p,filterText:c,generalInfoFormat:y,layers:d,selectedLayers:d.filter((e=>_()(p.filter((t=>t===e.id))))),noFilterResults:0===d.filter((e=>Me(e,c,l))).length,updatableLayersCount:d.filter((e=>"background"!==e.group&&("wms"===e.type||"wmts"===e.type))).length,selectedGroups:p.map((e=>(0,x.Mk)(t,e))).filter((e=>e&&e.nodes)),mapName:u,filteredGroups:_e(t,[{options:{showComponent:!0},func:()=>!c},{options:{loadingError:!0},func:e=>_()((e.nodes||[]).filter((e=>e.loadingError&&"Warning"!==e.loadingError)))},{options:{expanded:!0,showComponent:!0},func:e=>c&&_()((e.nodes||[]).filter((t=>Me(t,c,l)||t.nodes&&_()(e.nodes.filter((e=>e.showComponent))))))},{options:{showComponent:!1},func:e=>_()((e.nodes||[]).filter((e=>e.hidden)))&&1===e.nodes.length},{options:{exclusiveMapType:!0},func:e=>"3dtiles"===e.type&&!g}]),catalogActive:m,activateWidgetTool:h,user:T,isLocalizedLayerStylesEnabled:v})));class Ne extends i().Component{constructor(){super(...arguments),Ze(this,"getNoBackgroundLayers",(e=>"background"!==e.name)),Ze(this,"getDefaultGroup",(()=>{const e=this.props.groupNodeComponent||Ge.Z;return i().createElement(e,Oe({onSort:!this.props.filterText&&this.props.activateSortLayer?this.props.onSort:null},this.props.groupOptions,{titleTooltip:this.props.activateTitleTooltip,propertiesChangeHandler:this.props.groupPropertiesChangeHandler,onToggle:this.props.onToggleGroup,style:this.props.groupStyle,groupVisibilityCheckbox:!0,visibilityCheckType:this.props.visibilityCheckType,currentLocale:this.props.currentLocale,selectedNodes:this.props.selectedNodes,onSelect:this.props.activateToolsContainer?this.props.onSelectNode:null}))})),Ze(this,"getDefaultLayer",(()=>{const e=this.props.layerNodeComponent||Ce.Z,t=(this.props.resolutions||(0,w.getResolutions)())[k()(this.props.currentZoomLvl)];return i().createElement(e,Oe({},this.props.layerOptions,{titleTooltip:this.props.activateTitleTooltip,showFullTitleOnExpand:this.props.showFullTitleOnExpand,onToggle:this.props.onToggleLayer,activateOpacityTool:this.props.activateOpacityTool,onContextMenu:this.props.onContextMenu,propertiesChangeHandler:this.props.layerPropertiesChangeHandler,onSelect:this.props.activateToolsContainer?this.props.onSelectNode:null,visibilityCheckType:this.props.visibilityCheckType,activateLegendTool:this.props.activateLegendTool,currentZoomLvl:this.props.currentZoomLvl,scales:this.props.scales,currentLocale:this.props.currentLocale,selectedNodes:this.props.selectedNodes,filterText:this.props.filterText,onUpdateNode:this.props.updateNode,hideOpacityTooltip:this.props.hideOpacityTooltip,language:this.props.isLocalizedLayerStylesEnabled?this.props.currentLocaleLanguage:null,resolution:t}))})),Ze(this,"renderTOC",(()=>{const e=this.getDefaultGroup(),t=this.getDefaultLayer(),o=[this.props.activateToolsContainer,this.props.activateFilterLayer,this.props.activateMapTitle].filter((e=>e)),r=o.length>0?" toc-body-sections-"+o.length:" toc-body-sections";return i().createElement("div",null,i().createElement(K,{title:this.props.mapName,showTitle:this.props.activateMapTitle,showFilter:this.props.activateFilterLayer&&(this.props.groups.filter((e=>(e.nodes||[]).length))||[]).length,showTools:this.props.activateToolsContainer,onClear:()=>{this.props.onSelectNode()},onFilter:this.props.onFilter,filterTooltipClear:i().createElement(S.Z,{msgId:"toc.clearFilter"}),filterPlaceholder:(0,A.S$)(this.context.messages,"toc.filterPlaceholder"),filterText:this.props.filterText,toolbar:i().createElement(Re,{items:this.props.items.filter((e=>{let{target:t}=e;return"toolbar"===t})),groups:this.props.groups,layers:this.props.layers,selectedLayers:this.props.selectedLayers,selectedGroups:this.props.selectedGroups,generalInfoFormat:this.props.generalInfoFormat,settings:this.props.settings,swipeSettings:this.props.swipeSettings,layerMetadata:this.props.layerMetadata,layerdownload:this.props.layerdownload,metadataTemplate:this.props.metadataTemplate,maxDepth:this.props.maxDepth,activateTool:{activateToolsContainer:this.props.activateToolsContainer,activateRemoveLayer:this.props.activateRemoveLayer,activateRemoveGroup:this.props.activateRemoveGroup,activateZoomTool:this.props.activateZoomTool,activateQueryTool:this.props.activateQueryTool,activateDownloadTool:this.props.activateDownloadTool,activateSettingsTool:this.props.activateSettingsTool,activateAddLayer:this.props.activateAddLayerButton&&!this.props.catalogActive,activateAddGroup:this.props.activateAddGroupButton,includeDeleteButtonInSettings:!1,activateMetedataTool:this.props.activateMetedataTool,activateWidgetTool:this.props.activateWidgetTool,activateLayerFilterTool:this.props.activateLayerFilterTool,activateLayerInfoTool:this.props.updatableLayersCount>0&&this.props.activateLayerInfoTool},options:{modalOptions:{},metadataOptions:this.props.metadataOptions,settingsOptions:this.props.settingsOptions},style:{chartStyle:this.props.chartStyle},text:{settingsText:i().createElement(S.Z,{msgId:"layerProperties.windowTitle"}),opacityText:i().createElement(S.Z,{msgId:"opacity"}),elevationText:i().createElement(S.Z,{msgId:"elevation"}),saveText:i().createElement(S.Z,{msgId:"save"}),closeText:i().createElement(S.Z,{msgId:"close"}),confirmDeleteText:i().createElement(S.Z,{msgId:"layerProperties.deleteLayer"}),confirmDeleteMessage:i().createElement(S.Z,{msgId:"layerProperties.deleteLayerMessage"}),confirmDeleteLayerGroupText:i().createElement(S.Z,{msgId:"layerProperties.deleteLayerGroup"}),confirmDeleteLayerGroupMessage:i().createElement(S.Z,{msgId:"layerProperties.deleteLayerGroupMessage"}),confirmDeleteConfirmText:i().createElement(S.Z,{msgId:"layerProperties.delete"}),confirmDeleteCancelText:i().createElement(S.Z,{msgId:"cancel"}),addLayer:i().createElement(S.Z,{msgId:"toc.addLayer"}),addLayerTooltip:i().createElement(S.Z,{msgId:"toc.addLayer"}),addLayerToGroupTooltip:i().createElement(S.Z,{msgId:"toc.addLayerToGroup"}),addGroupTooltip:i().createElement(S.Z,{msgId:"toc.addGroup"}),addSubGroupTooltip:i().createElement(S.Z,{msgId:"toc.addSubGroup"}),createWidgetTooltip:i().createElement(S.Z,{msgId:"toc.createWidget"}),zoomToTooltip:{LAYER:i().createElement(S.Z,{msgId:"toc.toolZoomToLayerTooltip"}),LAYERS:i().createElement(S.Z,{msgId:"toc.toolZoomToLayersTooltip"})},settingsTooltip:{LAYER:i().createElement(S.Z,{msgId:"toc.toolLayerSettingsTooltip"}),GROUP:i().createElement(S.Z,{msgId:"toc.toolGroupSettingsTooltip"})},featuresGridTooltip:i().createElement(S.Z,{msgId:"toc.toolFeaturesGridTooltip"}),downloadToolTooltip:i().createElement(S.Z,{msgId:"toc.toolDownloadTooltip"}),trashTooltip:{LAYER:i().createElement(S.Z,{msgId:"toc.toolTrashLayerTooltip"}),LAYERS:i().createElement(S.Z,{msgId:"toc.toolTrashLayersTooltip"}),GROUP:i().createElement(S.Z,{msgId:"toc.toolTrashGroupTooltip"})},reloadTooltip:{LAYER:i().createElement(S.Z,{msgId:"toc.toolReloadLayerTooltip"}),LAYERS:i().createElement(S.Z,{msgId:"toc.toolReloadLayersTooltip"})},layerMetadataTooltip:i().createElement(S.Z,{msgId:"toc.layerMetadata.toolLayerMetadataTooltip"}),layerMetadataPanelTitle:i().createElement(S.Z,{msgId:"toc.layerMetadata.layerMetadataPanelTitle"}),layerFilterTooltip:i().createElement(S.Z,{msgId:"toc.layerFilterTooltip"}),layerInfoTooltip:i().createElement(S.Z,{msgId:"toc.layerInfoTooltip"})},onToolsActions:{onZoom:this.props.onZoomToExtent,onNewWidget:this.props.onNewWidget,onBrowseData:this.props.onBrowseData,onQueryBuilder:this.props.onQueryBuilder,onDownload:this.props.onDownload,onUpdate:this.props.updateNode,onRemove:this.props.removeNode,onClear:this.props.onSelectNode,onSettings:this.props.onSettings,onUpdateSettings:this.props.updateSettings,onRetrieveLayerData:this.props.retrieveLayerData,onHideSettings:this.props.hideSettings,onReload:this.props.refreshLayerVersion,onAddLayer:this.props.onAddLayer,onAddGroup:this.props.onAddGroup,onGetMetadataRecord:this.props.onGetMetadataRecord,onHideLayerMetadata:this.props.hideLayerMetadata,onShow:this.props.layerPropertiesChangeHandler,onLayerInfo:this.props.onLayerInfo}})}),i().createElement("div",{className:"mapstore-toc"+r},this.props.noFilterResults&&this.props.filterText?i().createElement("div",null,i().createElement("div",{className:"toc-filter-no-results"},i().createElement(S.Z,{msgId:"toc.noFilteredResults"}))):i().createElement(V.Z,{onError:this.props.onError,onSort:!this.props.filterText&&this.props.activateSortLayer?this.props.onSort:null,filter:this.getNoBackgroundLayers,nodes:this.props.filteredGroups},i().createElement(Pe.Z,{groupElement:e,layerElement:t}))))}))}render(){return this.props.groups?this.renderTOC():i().createElement("div",null)}}Ze(Ne,"propTypes",{id:a().number,items:a().array,layers:a().array,buttonContent:a().node,groups:a().array,settings:a().object,swipeSettings:a().object,layerMetadata:a().object,layerdownload:a().object,metadataTemplate:a().oneOfType([a().string,a().array,a().object,a().func]),refreshMapEnabled:a().bool,groupStyle:a().object,groupPropertiesChangeHandler:a().func,layerPropertiesChangeHandler:a().func,onToggleGroup:a().func,onToggleLayer:a().func,onContextMenu:a().func,onBrowseData:a().func,onQueryBuilder:a().func,onDownload:a().func,onSelectNode:a().func,selectedNodes:a().array,onZoomToExtent:a().func,retrieveLayerData:a().func,onSort:a().func,onSettings:a().func,onRefreshLayer:a().func,onNewWidget:a().func,hideSettings:a().func,updateSettings:a().func,updateNode:a().func,removeNode:a().func,activateTitleTooltip:a().bool,showFullTitleOnExpand:a().bool,activateOpacityTool:a().bool,activateSortLayer:a().bool,activateFilterLayer:a().bool,activateMapTitle:a().bool,activateToolsContainer:a().bool,activateRemoveLayer:a().bool,activateRemoveGroup:a().bool,activateLegendTool:a().bool,activateZoomTool:a().bool,activateQueryTool:a().bool,activateDownloadTool:a().bool,activateSettingsTool:a().bool,activateMetedataTool:a().bool,activateWidgetTool:a().bool,activateLayerInfoTool:a().bool,maxDepth:a().number,visibilityCheckType:a().string,settingsOptions:a().object,chartStyle:a().object,currentZoomLvl:a().number,scales:a().array,layerOptions:a().object,metadataOptions:a().object,spatialOperations:a().array,spatialMethodOptions:a().array,groupOptions:a().object,currentLocale:a().string,currentLocaleLanguage:a().string,onFilter:a().func,filterText:a().string,generalInfoFormat:a().string,selectedLayers:a().array,selectedGroups:a().array,mapName:a().string,filteredGroups:a().array,noFilterResults:a().bool,onAddLayer:a().func,onAddGroup:a().func,onError:a().func,onGetMetadataRecord:a().func,hideLayerMetadata:a().func,activateAddLayerButton:a().bool,activateAddGroupButton:a().bool,activateLayerFilterTool:a().bool,catalogActive:a().bool,refreshLayerVersion:a().func,hideOpacityTooltip:a().bool,layerNodeComponent:a().func,groupNodeComponent:a().func,isLocalizedLayerStylesEnabled:a().bool,onLayerInfo:a().func,onSetSwipeActive:a().func,updatableLayersCount:a().number,onSetSwipeMode:a().func,resolutions:a().func}),Ze(Ne,"contextTypes",{messages:a().object}),Ze(Ne,"defaultProps",{items:[],layers:[],groupPropertiesChangeHandler:()=>{},layerPropertiesChangeHandler:()=>{},retrieveLayerData:()=>{},onToggleGroup:()=>{},onToggleLayer:()=>{},onContextMenu:()=>{},onToggleQuery:()=>{},onZoomToExtent:()=>{},onSettings:()=>{},onRefreshLayer:()=>{},onNewWidget:()=>{},updateNode:()=>{},removeNode:()=>{},onSelectNode:()=>{},selectedNodes:[],activateOpacityTool:!0,activateTitleTooltip:!0,showFullTitleOnExpand:!1,activateSortLayer:!0,activateFilterLayer:!0,activateMapTitle:!0,activateToolsContainer:!0,activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateMetedataTool:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateQueryTool:!0,activateDownloadTool:!0,activateWidgetTool:!1,activateLayerFilterTool:!1,activateLayerInfoTool:!0,maxDepth:3,visibilityCheckType:"glyph",settingsOptions:{includeCloseButton:!1,closeGlyph:"1-close",buttonSize:"small",showFeatureInfoTab:!0},layerOptions:{},metadataOptions:{},groupOptions:{},spatialOperations:[{id:"INTERSECTS",name:"queryform.spatialfilter.operations.intersects"},{id:"BBOX",name:"queryform.spatialfilter.operations.bbox"},{id:"CONTAINS",name:"queryform.spatialfilter.operations.contains"},{id:"WITHIN",name:"queryform.spatialfilter.operations.within"}],spatialMethodOptions:[{id:"Viewport",name:"queryform.spatialfilter.methods.viewport"},{id:"BBOX",name:"queryform.spatialfilter.methods.box"},{id:"Circle",name:"queryform.spatialfilter.methods.circle"},{id:"Polygon",name:"queryform.spatialfilter.methods.poly"}],currentLocale:"en-US",filterText:"",selectedLayers:[],selectedGroups:[],mapName:"",filteredGroups:[],noFilterResults:!1,onAddLayer:()=>{},onAddGroup:()=>{},onError:()=>{},onGetMetadataRecord:()=>{},hideLayerMetadata:()=>{},activateAddLayerButton:!1,activateAddGroupButton:!1,catalogActive:!1,refreshLayerVersion:()=>{},metadataTemplate:null,onLayerInfo:()=>{},onSetSwipeMode:()=>{}});const ke=(0,n.withPropsOnChange)(["user","addLayersPermissions","activateAddLayerButton","removeLayersPermissions","activateRemoveLayer","sortingPermission","activateRemoveLayer","addGroupsPermissions","activateAddGroupButton","removeGroupsPermissions","activateRemoveGroup","layerInfoToolPermissions","activateLayerInfoTool"],(e=>{const{addLayersPermissions:t=!0,removeLayersPermissions:o=!0,sortingPermissions:r=!0,addGroupsPermissions:a=!0,removeGroupsPermissions:s=!0,layerInfoToolPermissions:i=!1,activateAddLayerButton:l,activateRemoveLayer:n,activateSortLayer:p,activateAddGroupButton:c,activateRemoveGroup:d,activateLayerInfoTool:u,user:m}=e,h=(e,t)=>{const o=m&&"ADMIN"===m.role||!1;return!(!e&&!o)&&t};return{activateAddLayerButton:h(t,l),activateRemoveLayer:h(o,n),activateSortLayer:h(r,p),activateAddGroupButton:h(a,c),activateRemoveGroup:h(s,d),activateLayerInfoTool:h(i,u)}})),Fe=(0,n.branch)((e=>{let{checkPlugins:t=!0}=e;return t}),(0,n.withPropsOnChange)(["items","activateAddLayerButton","activateAddGroupButton","activateLayerFilterTool","activateSettingsTool","FeatureEditor","activateLayerInfoTool"],(e=>{let{items:t=[],activateAddLayerButton:o=!0,activateAddGroupButton:r=!0,activateQueryTool:a=!0,activateSettingsTool:s=!0,activateLayerFilterTool:i=!0,activateWidgetTool:l=!0,activateLayerInfoTool:n=!0,activateDownloadTool:p=!0}=e;return{activateAddLayerButton:o&&!!I()(t,{name:"MetadataExplorer"})||!1,activateAddGroupButton:r&&!!I()(t,{name:"AddGroup"})||!1,activateSettingsTool:s&&!!I()(t,{name:"TOCItemsSettings"})||!1,activateQueryTool:a&&!!I()(t,{name:"FeatureEditor"})||!1,activateLayerFilterTool:i&&!!I()(t,{name:"FilterLayer"})||!1,activateWidgetTool:l&&!!I()(t,{name:"WidgetBuilder"})&&!!I()(t,{name:"Widgets"}),activateLayerInfoTool:n&&!!I()(t,{name:"LayerInfo"})||!1,activateDownloadTool:p&&!!I()(t,{name:"LayerDownload"})||!1}}))),je=(0,l.connect)(Ie,{groupPropertiesChangeHandler:c.WO,layerPropertiesChangeHandler:c.He,retrieveLayerData:u.k,onToggleGroup:(0,x.$0)("groups",c.bh),onToggleLayer:(0,x.$0)("layers",c.bh),onContextMenu:c.pV,onBrowseData:c.Qr,onQueryBuilder:d.Zq,onDownload:c.LR,onSort:c.Dv,onSettings:c.RP,onZoomToExtent:m.Px,hideSettings:c.sF,updateSettings:c.VP,updateNode:c.tV,removeNode:c.ZF,onSelectNode:c.UG,onFilter:c.F5,onAddLayer:F.pu.bind(null,"metadataexplorer","enabled",!0,"group"),onAddGroup:F.pu.bind(null,"addgroup","enabled",!0,"parent"),onGetMetadataRecord:B.ky,onError:h.vU,hideLayerMetadata:c.Jh,onNewWidget:()=>(0,j.A4)(),refreshLayerVersion:c.ct,onLayerInfo:F.Xg.bind(null,"layerinfo","enabled",!0,!1)})((0,n.compose)(ke,Fe)(Ne)),Be={TOCPlugin:G()(je,{Toolbar:{name:"toc",position:7,exclusive:!0,panel:!0,help:i().createElement(S.Z,{msgId:"helptexts.layerSwitcher"}),tooltip:"layers",wrap:!0,title:"layers",icon:i().createElement(p.Glyphicon,{glyph:"1-layer"}),priority:1},DrawerMenu:{name:"toc",position:1,glyph:"1-layer",icon:i().createElement("img",{src:P()}),buttonConfig:{buttonClassName:"square-button no-border",tooltip:"toc.layers"},priority:2}}),reducers:{queryform:o(13316).Z,query:o(698183).Z},epics:o(23939).Z(De.Z)}},744448:(e,t,o)=>{"use strict";o.d(t,{yn:()=>r,IY:()=>a,wQ:()=>s});const r=e=>e.swipe&&e.swipe||{active:!1},a=e=>e?.swipe?.spy||{radius:80},s=e=>e?.swipe?.swipe||{direction:"cut-vertical"}},505386:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});var r=o(923645),a=o.n(r)()((function(e){return e[1]}));a.push([e.id,"\n.ms2 #mapstore-layer-settings {\n    min-width: 400px;\n}\n\n.ms2 .portal-dialog {\n    position: absolute;\n}\n\n@media all and (min-width: 635px) {\n    .ms2 .portal-dialog {\n        left: calc(50% - 315px);\n        top: 100px;\n        max-width: 630px;\n        background-color: #fff;\n    }\n}\n\n@media all and (max-width: 634px) {\n    .ms2 .portal-dialog {\n        width: 100%;\n    }\n}\n",""]);const s=a},829626:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woCDCsUqrUEAAAAAQxJREFUOMvN0iFLw1EUBfCf02Q0LGhQQVZekiU/gTAYImpasMi6VVBhwSCsi0kQbIJFsBoMBjHdpKDJMjBaxM3yhCn7z4HF29695xzuue/wxxofNkwp1crl8kKn03kswowVEEvYx25utdCKiO6vAimlKZxh+cfoCo2IeC0USClVcY7Zgo2fsR4Rd1+NUh95CzdDyDCHm4z9LoAueiMcvpexAy0sZgvzBeQnrEXE/SALM3hHFZcDyJd59pFSmh5koY1b1FDHXl61m7+zjpWMaX+RJvoEGjjAKZawncFwjSM0cYidYTlYxQkCGzmt56hgMyIuRkliJZPKWeAlH+9hpChnkUkc52czIt78y/oEtThIARE8NNwAAAAASUVORK5CYII="}}]);