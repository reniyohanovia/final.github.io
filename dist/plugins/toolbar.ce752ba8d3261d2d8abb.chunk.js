(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[9859],{956611:(e,t,o)=>{"use strict";o.d(t,{Z:()=>h});var s=o(747037),r=o.n(s),n=o(45697),l=o.n(n),i=o(124852),a=o.n(i),p=o(630294),c=o(719648);function m(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var s=o.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class u extends a().Component{constructor(){super(...arguments),m(this,"onMouseOver",(()=>{const e=r()(this.props.helpText)?this.props.helpText:(0,c.S$)(this.context.messages,this.props.helpText.props.msgId);this.props.changeHelpText(e),this.props.changeHelpwinVisibility(!0)}))}render(){return a().createElement(p.Badge,{id:this.props.id,onMouseOver:this.onMouseOver,className:(this.props.isVisible?"":"hidden ")+(this.props.className?this.props.className:"")},"?")}}m(u,"propTypes",{id:l().string,helpText:l().oneOfType([l().string,l().element]),isVisible:l().bool,changeHelpText:l().func,changeHelpwinVisibility:l().func,className:l().string}),m(u,"contextTypes",{messages:l().object}),m(u,"defaultProps",{helpText:"",isVisible:!1});const h=u},403626:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>S});var s=o(124852),r=o.n(s),n=o(45697),l=o.n(n),i=o(171703),a=o(264317),p=o(820709),c=o(350126),m=o(22222),u=o(727418),h=o.n(u),g=o(638510);function y(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var s=o.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},b.apply(this,arguments)}class d extends r().Component{render(){const{children:e,...t}=this.props;return r().createElement(a.CSSTransitionGroup,b({},t,{transitionName:"toolbarexpand",transitionEnterTimeout:500,transitionLeaveTimeout:300}),e)}}class f extends r().Component{render(){const{children:e,...t}=this.props;return r().createElement("div",t,e)}}class v extends r().Component{constructor(){super(...arguments),y(this,"getPanel",(e=>!0===e.panel?e.plugin:e.panel)),y(this,"getPanels",(()=>this.getTools().filter((e=>e.panel)).map((e=>({name:e.name,title:e.title,cfg:e.cfg,panel:this.getPanel(e),items:e.items,wrap:e.wrap||!1}))))),y(this,"getTools",(()=>{const e=this.props.items.filter((e=>!e.alwaysVisible))||[];return this.props.items.filter((t=>t.alwaysVisible||1===e.length||this.props.allVisible)).filter((e=>!e.showWhen||e.showWhen(this.props))).map(((e,t)=>h()({},e,{position:e.position||t}))).sort(((e,t)=>e.position-t.position))}))}render(){const e=this.props.disableAnimation?f:d;return r().createElement(g.Z,{id:this.props.id,className:"mapToolbar btn-group-"+this.props.layout,toolCfg:this.props.btnConfig,container:e,mapType:this.props.mapType,toolStyle:this.props.buttonStyle,activeStyle:this.props.pressedButtonStyle,toolSize:this.props.buttonSize,stateSelector:this.props.stateSelector,tools:this.getTools(),panels:this.getPanels(),activePanel:this.props.active,style:"vertical"!==this.props.layout?{...this.props.style,display:"flex"}:this.props.style,panelStyle:this.props.panelStyle,panelClassName:this.props.panelClassName})}}y(v,"propTypes",{id:l().string,tools:l().array,mapType:l().string,style:l().object,panelStyle:l().object,panelClassName:l().string,disableAnimation:l().bool,active:l().string,items:l().array,allVisible:l().bool,layout:l().string,stateSelector:l().string,buttonStyle:l().string,buttonSize:l().string,pressedButtonStyle:l().string,btnConfig:l().object}),y(v,"contextTypes",{messages:l().object,router:l().object}),y(v,"defaultProps",{id:"mapstore-toolbar",style:{},panelStyle:{minWidth:"300px",right:"52px",zIndex:100,position:"absolute",overflow:"auto",left:"450px"},panelClassName:"toolbar-panel",disableAnimation:!1,items:[],allVisible:!0,layout:"vertical",stateSelector:"toolbar",buttonStyle:"primary",buttonSize:null,pressedButtonStyle:"success",btnConfig:{className:"square-button"}});const S={ToolbarPlugin:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"toolbar";return(0,i.connect)((e=>(0,m.P1)([t=>t.controls&&t.controls[e]&&t.controls[e].active,t=>t.controls&&t.controls[e]&&t.controls[e].expanded,p.Rd,e=>(0,c.ic)(e,{right:!0,bottom:!0})],((t,o,s,r)=>({active:t,allVisible:o,stateSelector:e,layout:s?"horizontal":"vertical",style:r}))))(e))(v)},reducers:{controls:o(182862).Z}}},638510:(e,t,o)=>{"use strict";o.d(t,{Z:()=>j});var s=o(353131),r=o.n(s),n=o(727418),l=o.n(n),i=o(45697),a=o.n(i),p=o(124852),c=o.n(p),m=o(630294),u=o(171703),h=o(12838),g=o(687753),y=o(723813),b=o(956611),d=o(804504),f=o(401811),v=o(23888);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},S.apply(this,arguments)}function T(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var s=o.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const C=(0,u.connect)((e=>({isVisible:e.controls&&e.controls.help&&e.controls.help.enabled})),{changeHelpText:y.n2,changeHelpwinVisibility:y.SA})(b.Z);class P extends c().Component{constructor(){super(...arguments),T(this,"getToolConfig",(e=>e.tool?{}:this.props.toolCfg)),T(this,"getTool",(e=>{if(e.tool)return!0===e.tool?e.plugin:e.tool;let t=()=>({});const o={};return e.exclusive?(t=t=>({active:t.controls&&t.controls[this.props.stateSelector]&&t.controls[this.props.stateSelector].active===e.name}),o[this.props.eventSelector]=g.Xg.bind(null,this.props.stateSelector,"active",e.name,!0)):e.toggle?(t=t=>({bsStyle:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]?this.props.activeStyle:this.props.toolStyle,active:t.controls[e.toggleControl||e.name]&&t.controls[e.toggleControl||e.name][e.toggleProperty||"enabled"]||!1}),o[this.props.eventSelector]=g.Xi.bind(null,e.toggleControl||e.name,e.toggleProperty||null)):e.action&&(o[this.props.eventSelector]=r()(e.action,this.context),t=e.selector||t),(0,u.connect)(t,o,((e,t,o)=>this.mergeHandlers({...o,...e},t)))(this.props.tool)})),T(this,"renderTool",((e,t)=>{if(e.element)return e.element;const o=e.help?c().createElement(C,{className:"mapstore-helpbadge",helpText:e.help}):c().createElement("span",null),s=e.tooltip?c().createElement(d.Z,{msgId:e.tooltip}):null,r=this.getTool(e),n=this.getToolConfig(e),l=e.childTools||[];return this.addTooltip(c().createElement(r,S({},n,{pluginCfg:e.cfg,tooltip:s,style:e.style,btnSize:this.props.toolSize,bsStyle:this.props.toolStyle,help:o,key:e.name||"tool"+t,mapType:this.props.mapType},e.cfg,{items:e.items||[]}),e.cfg&&e.cfg.glyph?c().createElement(m.Glyphicon,{glyph:e.cfg.glyph}):e.icon,o," ",e.text,l.length>0&&c().createElement(P,S({},e.innerProps,{mapType:this.props.mapType,tools:l,panels:e.childPanels}))),e)})),T(this,"renderTools",(()=>this.props.tools.map(this.renderTool))),T(this,"renderPanels",(()=>this.props.panels.filter((e=>!e.panel.loadPlugin)).map((e=>{const t=e.panel,o=c().createElement(t,S({key:e.name,mapType:this.props.mapType},e.cfg,e.props||{},{items:e.items||[]})),s=e.title?c().createElement(d.Z,{msgId:e.title}):null;return e.wrap?c().createElement(m.Collapse,{key:"mapToolBar-item-collapse-"+e.name,in:this.props.activePanel===e.name},c().createElement(m.Panel,{header:s,style:this.props.panelStyle,className:this.props.panelClassName},o)):o})))),T(this,"mergeHandlers",((e,t)=>Object.keys(t).reduce(((o,s)=>l()(o,{[s]:e[s]?(0,h.qC)(e[s],t[s]):t[s]})),e))),T(this,"addTooltip",((e,t)=>{if(t.tooltip){let o=c().createElement(m.Tooltip,{id:this.props.id+"-"+t.name+"-tooltip"},c().createElement(d.Z,{msgId:t.tooltip}));return c().createElement(f.Z,{key:this.props.id+"-"+t.name+"-overlay",rootClose:!0,placement:"left",overlay:o},e)}return e}))}render(){const e=this.props.container;return c().createElement("span",{id:this.props.id,style:this.props.containerWrapperStyle},c().createElement(e,{id:this.props.id+"-container",style:this.props.style,className:this.props.className},this.renderTools()),this.renderPanels())}}T(P,"propTypes",{id:a().string.isRequired,container:a().func,containerWrapperStyle:a().object,tool:a().oneOfType([a().object,a().func]),className:a().string,style:a().object,tools:a().array,panels:a().array,mapType:a().string,toolStyle:a().string,activeStyle:a().string,toolSize:a().string,stateSelector:a().string.isRequired,eventSelector:a().string,panelStyle:a().object,panelClassName:a().string,activePanel:a().string,toolCfg:a().object}),T(P,"contextTypes",{messages:a().object,router:a().object}),T(P,"defaultProps",{container:m.Panel,className:"tools-container",style:{},toolStyle:"default",activeStyle:"primary",tools:[],panels:[],tool:v.Z,mapType:"leaflet",eventSelector:"onClick",panelStyle:{},panelClassName:"tools-container-panel",toolSize:null,toolCfg:{}});const j=P}}]);