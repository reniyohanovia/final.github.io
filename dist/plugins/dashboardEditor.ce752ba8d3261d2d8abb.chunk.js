(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[8541],{874097:(o,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>D});var n=t(124852),i=t.n(n),r=t(867076),s=t(22222),d=t(171703),a=t(45697),l=t.n(a),c=t(152543),p=t(952273),u=t(641259),b=t(366907),h=t(492838),m=t(851719);const g=(0,r.compose)((0,d.connect)((()=>({})),{backFromWizard:()=>(0,h.Rz)("layer",void 0)}),(0,r.withProps)((o=>{let{backFromWizard:e=(()=>{})}=o;return{exitButton:{onClick:e,glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToLayerSelection"}}})));var f=t(52713),v=t(21195),y=t(374072),C=t(644517),w=t(8204);function E(o,e,t){return(e=function(o){var e=function(o,e){if("object"!=typeof o||null===o)return o;var t=o[Symbol.toPrimitive];if(void 0!==t){var n=t.call(o,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(o);return"symbol"==typeof e?e:String(e)}(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}const S=(0,r.compose)((0,d.connect)(b.Nb,{toggleConnection:h.w2,triggerShowConnections:m.G9}),(0,d.connect)(b.Tw),(0,r.withProps)((o=>{let{availableDependencies:e=[]}=o;return{availableDependencies:e.filter((o=>"map"!==o))}})),g)(v.Z),P=(0,r.compose)((0,d.connect)((0,s.P1)(u.P0,p.HU,u.DZ,p.ie,(function(o,e,t){return{showConnections:o,hasConnections:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]).length>0,hasWidgets:e,canEdit:t}})),{onShowConnections:m.G9,onAddWidget:h.A4}),(0,r.withProps)((o=>{let{onAddWidget:e=(()=>{}),hasWidgets:t,canEdit:n,hasConnections:i,showConnections:r,onShowConnections:s=(()=>{})}=o;return{buttons:[{glyph:"plus",tooltipId:"dashboard.editor.addACardToTheDashboard",bsStyle:"primary",visible:n,id:"ms-add-card-dashboard",onClick:()=>e()},{glyph:r?"bulb-on":"bulb-off",tooltipId:r?"dashboard.editor.hideConnections":"dashboard.editor.showConnections",bsStyle:r?"success":"primary",visible:!!t&&!!i||!n,onClick:()=>s(!r)}]}})))(w.Z);class k extends i().Component{componentDidMount(){this.props.onMount()}componentWillUnmount(){this.props.onUnmount()}render(){const o=this.props.pluginCfg.selectedService||"",e=this.props.pluginCfg.services||{};return this.props.editing?i().createElement("div",{className:"dashboard-editor de-builder"},i().createElement(S,{disableEmptyMap:this.props.disableEmptyMap,defaultSelectedService:o,defaultServices:e,enabled:this.props.editing,onClose:()=>this.props.setEditing(!1),catalog:this.props.catalog})):i().createElement("div",{className:"ms-vertical-toolbar dashboard-editor de-toolbar",id:this.props.id},i().createElement(P,{transitionProps:!1,btnGroupProps:{vertical:!0},btnDefaultProps:{tooltipPosition:"right",className:"square-button-md",bsStyle:"primary"}}),this.props.loading?i().createElement(f.Z,{style:{position:"fixed",bottom:0}}):null)}}E(k,"propTypes",{id:l().string,editing:l().bool,loading:l().bool,limitDockHeight:l().bool,fluid:l().bool,zIndex:l().number,dockSize:l().number,position:l().string,onMount:l().func,onUnmount:l().func,setEditing:l().func,dimMode:l().string,src:l().string,style:l().object,pluginCfg:l().object,catalog:l().object,disableEmptyMap:l().bool}),E(k,"defaultProps",{id:"dashboard-editor",editing:!1,dockSize:500,loading:!0,limitDockHeight:!0,zIndex:1e4,fluid:!1,dimMode:"none",position:"left",onMount:()=>{},onUnmount:()=>{},setEditing:()=>{}});const M=(0,d.connect)((0,s.P1)(u.i$,u.MZ,((o,e)=>({editing:o,loading:e}))),{setEditing:m.D_,onMount:()=>(0,m.Nl)(!0),onUnmount:()=>(0,m.Nl)(!1)})(k),D=(0,c.rx)("DashboardEditor",{component:M,reducers:{dashboard:C.Z},epics:y.ZP})}}]);