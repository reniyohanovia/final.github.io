(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[8156],{230195:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(124852),a=r.n(n),o=r(45697),i=r.n(o);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends a().Component{constructor(e){super(e),l(this,"state",{inputText:""}),l(this,"validateValue",(e=>!this.props.formatRegex||new RegExp(this.props.formatRegex).test(e))),this.state={inputText:e.value},this.inputRef=a().createRef()}componentDidMount(){this.props.onTemporaryChanges?.(!0)}componentWillUnmount(){this.props.onTemporaryChanges?.(!1)}getValue(){return{[this.props.column.key]:this.validateValue(this.state.inputText)?this.state.inputText:this.props.value}}getInputNode(){return this.inputRef.current}render(){return a().createElement("input",s({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:this.inputRef,className:"form-control",defaultValue:this.props.value,onChange:e=>{this.setState({inputText:e.target.value,isValid:this.validateValue(e.target.value),validated:!0})}}))}}l(p,"propTypes",{value:i().string,inputProps:i().object,dataType:i().string,column:i().object,formatRegex:i().string,onTemporaryChanges:i().func}),l(p,"defaultProps",{dataType:"string",column:{}})},188156:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var n=r(124852),a=r.n(n),o=r(630294),i=r(867076),s=r(452341),l=r(753370),p=r.n(l),u=r(984596),m=r.n(u),c=r(264721),d=r.n(c),h=r(545578),f=r.n(h),g=r(441609),y=r.n(g),b=r(804504),v=r(230195);const w=e=>a().createElement(v.Z,{dataType:"string",formatRegex:e}),x=[{name:"Name",key:"attribute",width:120},{name:"Title",key:"title",editor:w("^[-@.\\/#&+\\w\\s*]{0,100}$"),width:120,editable:e=>!e?.hide},{name:"Description",key:"description",editor:w("^[-@.,\\/#&+\\w\\s*]{0,200}$"),width:150,editable:e=>!e?.hide}];var C=r(77665),E=r(657579),T=r(23888);const R=(0,i.compose)((0,i.withProps)((e=>{let{options:t={}}=e;return{options:{propertyName:(t?.propertyName||[])?.map((e=>"string"==typeof e?{name:e}:e))}}})),(0,i.withProps)((function(){let{attributes:e=[],options:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{attributes:e.filter((e=>!(0,s.isGeometryType)(e))).map((e=>{const r=t?.propertyName?.map((e=>e.name)),n=t?.propertyName?.find((t=>t.name===e.name));return{...e,label:e.name,attribute:e.name,hide:r?.indexOf(e.name)<0,title:n?.title||"",description:n?.description||""}}))}})),(0,E.Z)((e=>{let{attributes:t=[]}=e;return 0===t.length})))((function(){let{style:e={},titleMsg:t="featuregrid.columns",onChange:r=(()=>{}),attributes:n=[],options:o={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=e=>n[e],s=(e,t)=>{r("options.propertyName",((e,t,r)=>{const n=m()(t);return r?e.filter((e=>!d()(n,e.name))):f()([...e,...n.map((e=>({name:e})))],"name")})(o&&o.propertyName||[],e,t))};return a().createElement("div",{className:"bg-body data-attribute-selector",style:e},a().createElement("h4",{className:"text-center"},a().createElement("strong",null,a().createElement(b.Z,{msgId:t}))),a().createElement(p(),{rowKey:"id",columns:x,enableCellSelect:!0,rowGetter:i,rowsCount:n.length,onGridRowsUpdated:e=>{let{fromRow:t,toRow:n,updated:a}=e;const[{name:s}={}]=(l=t,p=n,Array.from({length:p+1-l},((e,t)=>t+l))).map((e=>i(e))).filter((e=>Object.keys(a||{}).filter((t=>e[t]!==a[t])).length>0));var l,p;!y()(s)&&r("options.propertyName",o.propertyName.map((e=>s===e.name?{...e,...a}:e)))},rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:e=>s(e.map((e=>n[e.rowIdx].name)),!1),onRowsDeselected:e=>s(e.map((e=>n[e.rowIdx].name)),!0),selectBy:{indexes:n.reduce(((e,t,r)=>[...e,...t.hide?[]:[r]]),[])}}}))})),N=e=>{let{data:t={options:{}},onChange:r=(()=>{}),featureTypeProperties:n,sampleChart:i}=e;return a().createElement(o.Row,null,a().createElement(C.Z,{title:a().createElement(b.Z,{msgId:"widgets.builder.wizard.configureTableOptions"})}),a().createElement(o.Col,{xs:12},a().createElement("div",null,i)),a().createElement(o.Col,{xs:12},a().createElement(o.Form,{className:"chart-options-form",horizontal:!0},a().createElement(R,{options:t.options,onChange:r,attributes:n}),t.options&&t.options.columnSettings?a().createElement(T.Z,{style:{float:"right"},onClick:()=>r("options.columnSettings",void 0)},a().createElement(b.Z,{msgId:"widgets.builder.wizard.resetColumnsSizes"})):null)))}}}]);