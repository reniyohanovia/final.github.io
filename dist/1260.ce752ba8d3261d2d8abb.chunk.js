(self.webpackChunkmapstore2=self.webpackChunkmapstore2||[]).push([[1260],{278426:(t,e,o)=>{"use strict";o.d(e,{Z:()=>w});var i=o(124852),r=o.n(i),s=o(45697),n=o.n(s),a=o(409669),p=o.n(a),l=o(618446),h=o.n(l),c=o(352353),m=o.n(c),u=o(313311),d=o.n(u),g=o(984596),y=o.n(g),f=o(923715),b=o(847529),v=o(119950),x=o(169141);function S(t,e,o){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class w extends r().Component{constructor(){super(...arguments),S(this,"addFeatures",(t=>{const e=new x.Z;let o=null,i=!1;"FeatureCollection"===t.type?(o={features:m()(t.properties.visibility)||t.properties.visibility?t.features:[]},i=!!t.features):(o={geometry:t.geometry},i=!(!t.geometry||!t.geometry.geometries&&!t.geometry.coordinates)),t.container&&i&&(this._feature=e.readFeatures({type:t.type,properties:t.properties,id:t.msId,...o},{dataProjection:t.featuresCrs}),this._feature.map((e=>{let o=e;return e.getProperties().isCircle&&(o=(0,b.aj)(e,t.crs||"EPSG:3857",t.featuresCrs),o.setGeometry(o.getGeometry().transform(t.crs||"EPSG:3857",t.featuresCrs))),o})).forEach((e=>e.getGeometry().transform(t.featuresCrs,t.crs||"EPSG:3857"))),t.style&&t.style!==t.layerStyle&&this._feature.forEach((e=>{let o=[],i={};"FeatureCollection"===t.type?(i=d()(t.features,(t=>t.properties.id===e.getProperties().id)),o=(0,v.createStylesAsync)(y()(i.style))):(o=(0,v.createStylesAsync)(y()(t.style)),i={type:t.type,geometry:t.geometry,properties:t.properties,style:t.style}),p().all(o).then((t=>{e.setStyle((()=>(0,f.Cw)({...i,style:t})))}))})),t.container.getSource().addFeatures(this._feature))})),S(this,"removeFromContainer",(()=>{if(this._feature)if(Array.isArray(this._feature)){const t=this.props.container.getSource();this._feature.map((e=>{let o=e.getId();void 0!==o&&t.getFeatureById(o)?t.removeFeature(t.getFeatureById(o)):t.removeFeature(e)}))}else this.props.container.getSource().removeFeature(this._feature)}))}componentDidMount(){this.addFeatures(this.props)}shouldComponentUpdate(t){return!(h()(t.properties,this.props.properties)&&h()(t.geometry,this.props.geometry)&&h()(t.features,this.props.features)&&h()(t.crs,this.props.crs)&&h()(t.style,this.props.style))}UNSAFE_componentWillUpdate(t){this.removeFromContainer(),this.addFeatures(t)}componentWillUnmount(){this.removeFromContainer()}render(){return null}}S(w,"propTypes",{type:n().string,layerStyle:n().object,style:n().object,properties:n().object,crs:n().string,container:n().object,features:n().array,geometry:n().object,msId:n().oneOfType([n().string,n().number]),featuresCrs:n().string}),S(w,"defaultProps",{featuresCrs:"EPSG:4326"})},877758:(t,e,o)=>{"use strict";o.d(e,{Z:()=>j});var i=o(45697),r=o.n(i),s=o(124852),n=o.n(s),a=o(477434),p=o(351546),l=o(727418),h=o.n(l),c=o(49977),m=o.n(c),u=o(281763),d=o.n(u),g=o(701469),y=o.n(g),f=o(957557),b=o.n(f),v=o(618446),x=o.n(v),S=o(414293),w=o.n(S),E=o(835516);function P(t,e,o){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class j extends n().Component{constructor(){super(...arguments),P(this,"setLayerVisibility",(t=>{const e=this.props.options&&!1!==this.props.options.visibility,o=t.options&&!1!==t.options.visibility;o!==e&&this.layer&&this.isValid()&&this.layer.setVisible(o)})),P(this,"setLayerOpacity",(t=>{t!==(this.props.options&&void 0!==this.props.options.opacity?this.props.options.opacity:1)&&this.layer&&this.layer.setOpacity(t)})),P(this,"generateOpts",((t,e,o,i,r,s)=>{const{minResolution:n,maxResolution:a,disableResolutionLimits:p,...l}=t,c={...l,...!p&&{minResolution:n,maxResolution:a,minZoom:w()(a)?void 0:(0,E.getZoomFromResolution)(a,s),maxZoom:w()(n)?void 0:(0,E.getZoomFromResolution)(n,s)}};return h()({},c,d()(e)?{zIndex:e}:null,{srs:o,onError:()=>{this.props.onCreationError(c)},securityToken:i,env:r})})),P(this,"createLayer",((t,e,o,i,r,s)=>{if(t){const n=this.generateOpts(e,o,(0,p.normalizeSRS)(this.props.srs),i,r,s);this.layer=a.default.createLayer(t,n,this.props.map,this.props.mapId);const l=a.default.isCompatible(t,n);if(this.layer&&!this.layer.detached){const t=this.props.map,o=t&&t.getView().getProjection().getExtent(),i=e&&e.bbox&&e.bbox.bounds,r=o&&(0,p.reprojectBbox)(o,this.props.srs,"EPSG:4326");let s=i&&(0,p.reprojectBbox)((0,p.getExtentFromNormalized)(i,this.props.srs).extent,"EPSG:4326");s&&2===s.length&&y()(s[1])&&(s=s[1]),(r&&s&&!(0,p.isBboxCompatible)((0,p.getPolygonFromExtent)(r),(0,p.getPolygonFromExtent)(s))||!l)&&this.props.onWarning({title:"warning",message:"notification.incompatibleDataAndProjection",action:{label:"close"},position:"tc",uid:"1"}),this.addLayer(e)}this.layer&&this.layer.get&&this.layer.get("getElevation")&&this.props.map.set("elevationLayer",this.layer),this.forceUpdate()}})),P(this,"updateLayer",((t,e)=>{if(t.position===e.position&&t.srs===e.srs&&t.securityToken===e.securityToken){if(t.options===e.options)return;if(x()(b()(t.options,["loading"]),b()(e.options,["loading"])))return}const o=a.default.updateLayer(this.props.type,this.layer,this.generateOpts(t.options,t.position,t.projection,t.securityToken,t.env,t.resolutions),this.generateOpts(e.options,e.position,e.projection,e.securityToken,e.env,e.resolutions),this.props.map,this.props.mapId);o&&(o.detached?this.layer=o:(this.props.map.removeLayer(this.layer),this.layer=o,this.addLayer(t.options)))})),P(this,"addLayer",(t=>{if(this.isValid()){this.props.map.addLayer(this.layer);const e=new(m().Subject),o=new(m().Subject);t.handleClickOnLayer&&this.layer.set("handleClickOnLayer",!0),this.layer.getSource().on("tileloadstart",(()=>{0===this.tilestoload?(this.props.onLayerLoading(t.id),this.tilestoload++):this.tilestoload++})),this.layer.getSource().on("tileloadend",(()=>{e.next({type:"tileloadend"}),this.tilestoload--,0===this.tilestoload&&o.next()})),this.layer.getSource().on("tileloaderror",(t=>{e.next({type:"tileloaderror",event:t}),this.tilestoload--,0===this.tilestoload&&o.next()})),e.bufferWhen((()=>o)).subscribe({next:e=>{const o=e.filter((t=>"tileloaderror"===t.type));o.length>0&&(t&&!t.hideErrors||!t)?(this.props.onLayerLoad(t.id,{error:!0}),this.props.onLayerError(t.id,e.length,o.length)):this.props.onLayerLoad(t.id)}}),this.tileLoadEndStream$=e,this.tileStopStream$=o;const i=new(m().Subject),r=new(m().Subject);if(this.layer.getSource().on("imageloadstart",(()=>{0===this.imagestoload?(this.props.onLayerLoading(t.id),this.imagestoload++):this.imagestoload++})),this.layer.getSource().on("imageloadend",(()=>{this.imagestoload--,i.next({type:"imageloadend"}),0===this.imagestoload&&r.next()})),this.layer.getSource().on("imageloaderror",(t=>{this.imagestoload--,i.next({type:"imageloaderror",event:t}),0===this.imagestoload&&r.next()})),i.bufferWhen((()=>r)).subscribe({next:e=>{const o=e.filter((t=>"imageloaderror"===t.type));o.length>0?(this.props.onLayerLoad(t.id,{error:!0}),(t&&!t.hideErrors||!t)&&this.props.onLayerError(t.id,e.length,o.length)):this.props.onLayerLoad(t.id)}}),this.imageLoadEndStream$=i,this.imageStopStream$=r,this.layer.getSource().on("vectorerror",(()=>{this.props.onLayerLoad(t.id,{error:!0})})),t.refresh){let e=0;this.refreshTimer=setInterval((()=>{this.layer.getSource().updateParams(h()({},t.params,{_refreshCounter:e++}))}),t.refresh)}}})),P(this,"isValid",(()=>{const t=a.default.isValid(this.props.type,this.layer);return this.valid=t,t}))}componentDidMount(){this.valid=!0,this.tilestoload=0,this.imagestoload=0,this.createLayer(this.props.type,this.props.options,this.props.position,this.props.securityToken,this.props.env,this.props.resolutions)}UNSAFE_componentWillReceiveProps(t){this.setLayerVisibility(t);const e=t.options&&void 0!==t.options.opacity?t.options.opacity:1;this.setLayerOpacity(e),t.position!==this.props.position&&this.layer&&this.layer.setZIndex&&this.layer.setZIndex(t.position),this.props.options&&this.updateLayer(t,this.props)}componentWillUnmount(){this.layer&&this.props.map&&(this.tileLoadEndStream$&&(this.tileLoadEndStream$.complete(),this.tileStopStream$.complete(),this.imageLoadEndStream$.complete(),this.imageStopStream$.complete()),this.layer.detached?this.layer.remove():this.props.map.removeLayer(this.layer)),this.refreshTimer&&clearInterval(this.refreshTimer),a.default.removeLayer(this.props.type,this.props.options,this.props.map,this.props.mapId,this.layer)}render(){if(this.props.children){const t=this.layer,e=t?n().Children.map(this.props.children,(e=>e?n().cloneElement(e,{container:t,styleName:this.props.options&&this.props.options.styleName}):null)):null;return n().createElement(n().Fragment,null,e)}return a.default.renderLayer(this.props.type,this.props.options,this.props.map,this.props.mapId,this.layer)}}P(j,"propTypes",{onWarning:r().func,maxExtent:r().array,map:r().object,mapId:r().string,srs:r().string,type:r().string,options:r().object,onLayerLoading:r().func,onLayerError:r().func,onCreationError:r().func,onLayerLoad:r().func,position:r().number,observables:r().array,securityToken:r().string,env:r().array,resolutions:r().array}),P(j,"defaultProps",{observables:[],onLayerLoading:()=>{},onLayerLoad:()=>{},onLayerError:()=>{},onCreationError:()=>{},onWarning:()=>{},srs:"EPSG:3857"})},323113:(t,e,o)=>{"use strict";o.d(e,{Z:()=>W});var i=o(537566),r=o(573800),s=o(386306),n=o(370878),a=o(978471),p=o(276773),l=o(218672),h=o(99937),c=o(169141),m=o(159398),u=o(301908),d=o(45697),g=o.n(d),y=o(124852),f=o.n(y),b=o(727418),v=o.n(b),x=o(351546),S=o(234228),w=o(835516),E=o(444183);var P=o(782527),j=o(618446),L=o.n(j),O=o(313311),C=o.n(O),k=o(823493),Z=o.n(k),z=o(701469),I=o.n(z),R=o(414293),T=o.n(R),F=(o(745902),o(893379)),M=o.n(F),G=o(559896);function _(t,e,o){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}M()(G.Z,{insert:"head",singleton:!1}),G.Z.locals;const V=new c.Z;class B extends f().Component{constructor(){var t;super(...arguments),t=this,_(this,"getDocument",(()=>this.props.document||document)),_(this,"getResolutions",(t=>{if(this.props.mapOptions&&this.props.mapOptions.view&&this.props.mapOptions.view.resolutions)return this.props.mapOptions.view.resolutions;const e=(t?(0,l.U2)(t):this.map.getView().getProjection()).getExtent();return(0,w.getResolutionsForProjection)(t??this.map.getView().getProjection().getCode(),this.props.mapOptions.minResolution,this.props.mapOptions.maxResolution,this.props.mapOptions.minZoom,this.props.mapOptions.maxZoom,this.props.mapOptions.zoomFactor,e)})),_(this,"mouseMoveEvent",(t=>{if(!t.dragging&&t.coordinate){const e=this.map.get("elevationLayer")&&this.map.get("elevationLayer").get("getElevation");let o=t.coordinate.slice(),i=(0,l.bU)(o,this.props.projection),r=i[0]/360%1*360;r<-180?r+=360:r>180&&(r-=360),this.props.onMouseMove({y:i[1]||0,x:r||0,z:this.map.get("elevationLayer")&&this.map.get("elevationLayer").get("getElevation")(o,t.pixel)||void 0,crs:"EPSG:4326",pixel:{x:t.pixel[0],y:t.pixel[1]},latlng:{lat:i[1],lng:r,z:e&&e(o,t.pixel)||void 0},lat:i[1],lng:r,rawPos:t.coordinate.slice()})}})),_(this,"updateMapInfoState",(()=>{let t=this.map.getView(),e=t.getCenter(),o=t.getProjection().getExtent()||(0,x.getExtentForProjection)(this.props.projection);const i=t.getProjection().getCode();if(-1!==["EPSG:3857","EPSG:900913","EPSG:4326"].indexOf(i)||e&&e[0]>=o[0]&&e[0]<=o[2]&&e[1]>=o[1]&&e[1]<=o[3]){let e=this.normalizeCenter(t.getCenter()),o=t.calculateExtent(this.map.getSize()),r={width:this.map.getSize()[0],height:this.map.getSize()[1]};this.props.onMapViewChanges({x:e[0]||0,y:e[1]||0,crs:"EPSG:4326"},t.getZoom(),{bounds:{minx:o[0],miny:o[1],maxx:o[2],maxy:o[3]},crs:i,rotation:t.getRotation()},r,this.props.id,this.props.projection,void 0,t.getResolution())}})),_(this,"haveResolutionsChanged",(t=>{const e=this.props.mapOptions&&this.props.mapOptions.view?this.props.mapOptions.view.resolutions:void 0,o=t.mapOptions&&t.mapOptions.view?t.mapOptions.view.resolutions:void 0;return!L()(e,o)})),_(this,"createView",(function(t,e,o,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=r.restrictedExtent&&r.crs&&(0,x.reprojectBbox)(r.restrictedExtent,r.crs,(0,x.normalizeSRS)(o)),n=!i||i&&!i.view?v()({},i,{extent:s}):v()({},i),a=v()({},{projection:(0,x.normalizeSRS)(o),center:[t.x,t.y],zoom:e,minZoom:r.minZoom},n||{});return new p.ZP(a)})),_(this,"_updateMapPositionFromNewProps",(t=>{var e=this.map.getView();const o=this.props.center;if(t.center.y!==o.y||t.center.x!==o.x){let o=(0,x.reproject)({x:t.center.x,y:t.center.y},"EPSG:4326",t.projection,!0);e.setCenter([o.x,o.y])}Math.round(t.zoom)!==this.props.zoom&&e.setZoom(Math.round(t.zoom)),(t.bbox&&void 0!==t.bbox.rotation||this.bbox&&void 0!==this.bbox.rotation&&t.bbox.rotation!==this.props.bbox.rotation)&&e.setRotation(t.bbox.rotation)})),_(this,"normalizeCenter",(t=>{let e=(0,x.reproject)({x:t[0],y:t[1]},this.props.projection,"EPSG:4326",!0);return[e.x,e.y]})),_(this,"setMousePointer",(t=>{this.map&&(this.map.getViewport().style.cursor=t||"auto")})),_(this,"registerHooks",(()=>{this.props.hookRegister.registerHook(w.default.RESOLUTIONS_HOOK,(t=>this.getResolutions(t))),this.props.hookRegister.registerHook(w.default.RESOLUTION_HOOK,(()=>this.map.getView().getResolution())),this.props.hookRegister.registerHook(w.default.COMPUTE_BBOX_HOOK,((t,e)=>{var o=(0,x.reproject)([t.x,t.y],"EPSG:4326",this.props.projection);let i=this.createView(o,e,this.props.projection,this.props.mapOptions&&this.props.mapOptions.view,this.props.limits),r=this.map.getSize(),s=i.calculateExtent(r);return{bounds:{minx:s[0],miny:s[1],maxx:s[2],maxy:s[3]},crs:this.props.projection,rotation:this.map.getView().getRotation()}})),this.props.hookRegister.registerHook(w.default.GET_PIXEL_FROM_COORDINATES_HOOK,(t=>this.map.getPixelFromCoordinate(t))),this.props.hookRegister.registerHook(w.default.GET_COORDINATES_FROM_PIXEL_HOOK,(t=>this.map.getCoordinateFromPixel(t))),this.props.hookRegister.registerHook(w.default.ZOOM_TO_EXTENT_HOOK,(function(e){let{padding:o,crs:i,maxZoom:r,duration:s,nearest:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,x.reprojectBbox)(e,i,t.props.projection);a&&a[0]===a[2]&&a[1]===a[3]&&"EPSG:4326"===i&&I()(e)&&-180===e[0]&&-90===e[1]&&(a=t.map.getView().getProjection().getExtent());let p=r;a&&a[0]===a[2]&&a[1]===a[3]&&T()(p)&&(p=21),t.map.getView().fit(a,{size:t.map.getSize(),padding:o&&[o.top||0,o.right||0,o.bottom||0,o.left||0],maxZoom:p,duration:s,nearest:n})}))}))}componentDidMount(){[{code:"EPSG:4269",def:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs",axisOrientation:"neu",extent:[-172.54,23.81,-47.74,86.46],worldExtent:[-172.54,23.81,-47.74,86.46]},...this.props.projectionDefs].forEach((t=>{const e=m.default.defs(t.code);var o,i,r,s,n;o=t.code,i=t.extent,r=t.worldExtent,s=t.axisOrientation||e.axis||"enu",n=e.units||"m",(0,l.Sx)(new E.Z({code:o,extent:i,worldExtent:r,axisOrientation:s,units:n}))}));let t=(0,x.reproject)([this.props.center.x,this.props.center.y],"EPSG:4326",this.props.projection);(0,u.z)(m.default);let e=v()(this.props.interactive?{}:{doubleClickZoom:!1,dragPan:!1,altShiftDragRotate:!1,keyboard:!1,mouseWheelZoom:!1,shiftDragZoom:!1,pinchRotate:!1,pinchZoom:!1},this.props.mapOptions.interactions),o=(0,i.ce)(v()({dragPan:!1,mouseWheelZoom:!1},e,{}));void 0!==e&&void 0!==e.dragPan||(this.dragPanInteraction=new r.Z({kinetic:!1}),o.extend([this.dragPanInteraction])),void 0!==e&&void 0!==e.mouseWheelZoom||(this.mouseWheelInteraction=new s.Z({duration:0}),o.extend([this.mouseWheelInteraction]));let p=(0,n.c)(v()({zoom:this.props.zoomControl,attributionOptions:v()({collapsible:!1},this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container?{target:this.getDocument().querySelector(this.props.mapOptions.attribution.container)}:{})},this.props.mapOptions.controls)),h=new a.default({layers:[],controls:p,interactions:o,maxTilesLoading:1/0,target:this.getDocument().getElementById(this.props.id)||`${this.props.id}`,view:this.createView(t,Math.round(this.props.zoom),this.props.projection,this.props.mapOptions&&this.props.mapOptions.view,this.props.limits)});this.map=h,this.props.registerHooks&&this.registerHooks(),this.map.disabledListeners={},this.map.disableEventListener=t=>{this.map.disabledListeners[t]=!0},this.map.enableEventListener=t=>{delete this.map.disabledListeners[t]},this.map.getViewport().addEventListener("mouseout",(()=>{setTimeout((()=>this.props.onMouseOut()),150)})),h.on("moveend",this.updateMapInfoState),h.on("singleclick",(t=>{if(this.props.onClick&&!this.map.disabledListeners.singleclick){let e=this.map.getView(),o=t.coordinate.slice(),i=e.getProjection().getExtent()||(0,x.getExtentForProjection)(this.props.projection);if("EPSG:4326"===this.props.projection&&(o[0]=(0,x.normalizeLng)(o[0])),"EPSG:900913"!==this.props.projection&&"EPSG:3857"!==this.props.projection||(o=(0,l.bU)(o,this.props.projection),i=(0,x.reprojectBbox)(i,this.props.projection,"EPSG:4326")),o[0]>=i[0]&&o[0]<=i[2]&&o[1]>=i[1]&&o[1]<=i[3]){let e,i;e="EPSG:900913"!==this.props.projection&&"EPSG:3857"!==this.props.projection?(0,x.reproject)(o,this.props.projection,"EPSG:4326"):{x:o[0],y:o[1]};let r={};this.markerPresent=!1,h.forEachFeatureAtPixel(t.pixel,((t,o)=>{if(o&&o.get("handleClickOnLayer")){const r=t.getGeometry();if(!this.markerPresent&&"Point"===r.getType()){this.markerPresent=!0,i=o.get("msId");const t=(0,l.bU)(r.getFirstCoordinate(),this.props.projection);e={x:t[0],y:t[1]}}}if(o?.get("msId")){const e=V.writeFeatureObject(t,{featureProjection:this.props.projection,dataProjection:"EPSG:4326"});r[o.get("msId")]=r[o.get("msId")]?[...r[o.get("msId")],e]:[e]}}));const s=Object.keys(r).map((t=>({id:t,features:r[t]}))),n=(0,x.normalizeLng)(e.x),a=this.map.get("elevationLayer")&&this.map.get("elevationLayer").get("getElevation");this.props.onClick({pixel:{x:t.pixel[0],y:t.pixel[1]},latlng:{lat:e.y,lng:n,z:a&&a(o,t.pixel)||void 0},rawPos:t.coordinate.slice(),modifiers:{alt:t.originalEvent.altKey,ctrl:t.originalEvent.ctrlKey,metaKey:t.originalEvent.metaKey,shift:t.originalEvent.shiftKey},intersectedFeatures:s},i)}}}));const c=Z()(this.mouseMoveEvent,100);h.on("pointermove",c),this.updateMapInfoState(),this.setMousePointer(this.props.mousePointer),this.forceUpdate(),this.props.onResolutionsChange(this.getResolutions())}UNSAFE_componentWillReceiveProps(t){if(t.mousePointer!==this.props.mousePointer&&this.setMousePointer(t.mousePointer),t.zoomControl!==this.props.zoomControl&&(t.zoomControl?this.map.addControl(new h.Z):this.map.removeControl(this.map.getControls().getArray().filter((t=>t instanceof h.Z))[0])),this.map&&(this.props.mapOptions&&this.props.mapOptions.interactions)!==(t.mapOptions&&t.mapOptions.interactions)){const e=t.mapOptions.interactions||{},o=this.map.getInteractions().getArray();Object.keys(e).forEach((t=>{const{Instance:i,options:r}=P.hH[t]||{};let s=C()(o,(e=>P.hH[t]&&e instanceof i));s?s.setActive(e[t]):e[t]&&i&&this.map.addInteraction(new i(r))}))}if(this.map&&this.props.id!==t.mapStateSource&&this._updateMapPositionFromNewProps(t),this.map&&t.resize!==this.props.resize&&setTimeout((()=>{this.map.updateSize()}),0),this.map&&(this.props.projection!==t.projection||this.haveResolutionsChanged(t))||this.props.limits!==t.limits){if(this.props.projection!==t.projection||this.props.limits!==t.limits){let e=t.projection;const o=(0,x.reproject)([t.center.x,t.center.y],"EPSG:4326",e);this.map.setView(this.createView(o,t.zoom,t.projection,t.mapOptions&&t.mapOptions.view,t.limits)),this.props.onResolutionsChange(this.getResolutions())}this.map.getLayers().forEach((t=>{let e=t.getSource();e.getTileLoadFunction&&e.setTileLoadFunction(e.getTileLoadFunction())})),this.map.render()}}componentWillUnmount(){const t=this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&this.getDocument().querySelector(this.props.mapOptions.attribution.container);if(t&&t.querySelector(".ol-attribution"))try{t.removeChild(t.querySelector(".ol-attribution"))}catch(t){}this.map&&this.map.setTarget(null)}render(){const t=this.map,e=t?f().Children.map(this.props.children,(e=>e?f().cloneElement(e,{map:t,mapId:this.props.id,onLayerLoading:this.props.onLayerLoading,onLayerError:this.props.onLayerError,onLayerLoad:this.props.onLayerLoad,projection:this.props.projection,onCreationError:this.props.onCreationError,resolutions:this.getResolutions()}):null)):null;return f().createElement("div",{id:this.props.id,style:this.props.style},e)}}_(B,"propTypes",{id:g().string,document:g().object,style:g().object,center:S.ZP.PropTypes.center,zoom:g().number.isRequired,mapStateSource:S.ZP.PropTypes.mapStateSource,projection:g().string,projectionDefs:g().array,onMapViewChanges:g().func,onResolutionsChange:g().func,onClick:g().func,mapOptions:g().object,zoomControl:g().bool,mousePointer:g().string,onMouseMove:g().func,onLayerLoading:g().func,onLayerLoad:g().func,onLayerError:g().func,resize:g().oneOfType([g().number,g().string]),measurement:g().object,changeMeasurementState:g().func,registerHooks:g().bool,hookRegister:g().object,interactive:g().bool,onCreationError:g().func,bbox:g().object,wpsBounds:g().object,onWarning:g().func,maxExtent:g().array,limits:g().object,onMouseOut:g().func}),_(B,"defaultProps",{id:"map",onMapViewChanges:()=>{},onResolutionsChange:()=>{},onCreationError:()=>{},onClick:null,onMouseMove:()=>{},mapOptions:{},projection:"EPSG:3857",projectionDefs:[],onLayerLoading:()=>{},onLayerLoad:()=>{},onLayerError:()=>{},resize:0,registerHooks:!0,hookRegister:w.default,interactive:!0,onMouseOut:()=>{},center:{x:13,y:45,crs:"EPSG:4326"},zoom:5});const W=B},904101:(t,e,o)=>{"use strict";o.d(e,{Z:()=>g});var i=o(45697),r=o.n(i),s=o(124852),n=o.n(s),a=o(477434),p=o(727418),l=o.n(p),h=o(797398),c=o.n(h),m=o(203728);function u(t,e,o){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}o(848709);const d={className:"ol-overviewmap ol-custom-overviewmap",collapseLabel:"»",label:"«",collapsed:!0,collapsible:!0};class g extends n().Component{constructor(){super(...arguments),u(this,"dragstart",(t=>{this.dragging||(this.dragBox=this.box.cloneNode(),this.dragBox.setAttribute("class","ol-overview-dargbox"),this.dragBox.style.position="relative",this.box.appendChild(this.dragBox),""===this.box.style.top?this.offsetStartTop=0:this.offsetStartTop=parseInt(this.box.style.top.slice(0,-2),10),""===this.box.style.left?this.offsetStartLeft=0:this.offsetStartLeft=parseInt(this.box.style.left.slice(0,-2),10),this.mouseStartTop=t.pageY,this.mouseStartLeft=t.pageX,this.dragging=!0)})),u(this,"draggingel",(t=>{!0===this.dragging&&(this.dragBox.style.top=this.offsetStartTop+t.pageY-this.mouseStartTop+"px",this.dragBox.style.left=this.offsetStartLeft+t.pageX-this.mouseStartLeft+"px",t.stopPropagation(),t.preventDefault())})),u(this,"dragend",(()=>{if(!0===this.dragging){let t={};t.top=""===this.dragBox.style.top?0:parseInt(this.dragBox.style.top.slice(0,-2),10),t.left=""===this.dragBox.style.left?0:parseInt(this.dragBox.style.left.slice(0,-2),10),this.box.removeChild(this.dragBox),delete this.dragBox,this.dragging=!1,this.setNewExtent(t)}})),u(this,"setNewExtent",(t=>{let e=this.box.offsetWidth,o=this.box.offsetHeight,i=this.props.map.getSize(),r=t.left*Math.abs(i[0]/e),s=t.top*Math.abs(i[1]/o);r=c()(r)?r:0,s=c()(s)?s:0;let n=[0+r,i[1]+s],a=[i[0]+r,0+s],p=this.props.map.getCoordinateFromPixel(n)||[0,0],l=this.props.map.getCoordinateFromPixel(a)||[0,0],h=[p[0],p[1],l[0],l[1]];this.props.map.getView().fit(h,i,{nearest:!0})}))}componentDidMount(){let t=[];this.props.layers.forEach((e=>{t.push(a.default.createLayer(e.type,e.options||{}))}));let e=l()({},d,this.props.overviewOpt,{layers:t});this.overview=new m.Z(e),this.props.map&&this.overview.setMap(this.props.map),this.box=this.overview.element.getElementsByClassName("ol-overviewmap-box").item(0),this.box.onmousedown=t=>{this.dragstart(t),this.box.onmousemove=t=>{this.draggingel(t)},this.overview.element.onmousemove=t=>{this.draggingel(t)},this.box.onmouseup=()=>{this.dragend(),this.overview.element.onmousemove=null,this.box.onmousemove=null,this.box.onmouseup=null}}}render(){return null}}u(g,"displayName","Overview"),u(g,"propTypes",{id:r().string,map:r().object,overviewOpt:r().object,layers:r().array}),u(g,"defaultProps",{id:"overview",overviewOpt:{},layers:[{type:"osm",options:{}}]})},37525:(t,e,o)=>{"use strict";o.d(e,{Z:()=>c});var i=o(45697),r=o.n(i),s=o(124852),n=o.n(s),a=o(727418),p=o.n(a),l=o(225303);function h(t,e,o){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class c extends n().Component{componentDidMount(){this.scalebar=new l.ZP(p()({},this.props,this.props.container?{target:document.querySelector(this.props.container)}:{})),this.props.map&&this.props.map.addControl(this.scalebar)}componentWillUnmount(){if(this.props.container&&document.querySelector(".ol-scale-line"))try{document.querySelector(this.props.container).removeChild(document.querySelector(".ol-scale-line"))}catch(t){}}render(){return null}}h(c,"propTypes",{map:r().object,className:r().string,minWidth:r().number,units:r().oneOf(["degrees","imperial","nautical","metric","us"]),container:r().string}),h(c,"defaultProps",{map:null,className:"ol-scale-line",minWidth:64,units:"metric"})},782527:(t,e,o)=>{"use strict";o.d(e,{y7:()=>v,oU:()=>x,hH:()=>S});var i=o(573800),r=o(345801),s=o(386306),n=o(718369),a=o(878516),p=o(500052),l=o(848041),h=o(978653),c=o(497950);if(!/^8(379|815)$/.test(o.j))var m=o(752043);if(!/^8(379|815)$/.test(o.j))var u=o(944538);if(!/^8(379|815)$/.test(o.j))var d=o(552329);if(!/^8(379|815)$/.test(o.j))var g=o(525642);if(!/^8(379|815)$/.test(o.j))var y=o(513987);if(!/^8(379|815)$/.test(o.j))var f=o(869669);if(!/^8(379|815)$/.test(o.j))var b=o(15265);const v=function(){let t,{type:e,coordinates:o,radius:i,center:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(e){case"Point":t=new m.Z(o||[]);break;case"LineString":t=new u.Z(o||[]);break;case"MultiPoint":t=new d.Z(o||[]);break;case"MultiLineString":t=new g.Z(o||[]);break;case"MultiPolygon":t=new y.Z(o||[]);break;default:t=i&&r?(0,b.Bb)(new f.Z([r.x,r.y],i),100):new b.ZP(o||[])}return t},x=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t&&t.geometry&&"Polygon"===t.geometry.type},S={dragPan:{options:{kinetic:!1},Instance:i.Z},keyboardPan:{options:{kinetic:!1},Instance:r.Z},mouseWheelZoom:{options:{duration:0},Instance:s.Z},doubleClickZoom:{options:{duration:0},Instance:n.Z},shiftDragZoom:{options:{duration:0},Instance:a.Z},keyboardZoom:{options:{},Instance:p.Z},pinchZoom:{options:{duration:0},Instance:l.Z},pinchRotate:{options:{},Instance:h.Z},altShiftDragRotate:{options:{},Instance:c.Z}}},559896:(t,e,o)=>{"use strict";o.d(e,{Z:()=>s});var i=o(923645),r=o.n(i)()((function(t){return t[1]}));r.push([t.id,".ms2 .ol-control button:hover, .ms2 .ol-control button:focus {\n    background-color: #f4f4f4;\n}\n.ms2 .ol-zoom .ol-zoom-out, .ms2 .ol-zoom .ol-zoom-in{\n    width: 26px;\n    height: 26px;\n    line-height: 26px;\n    display: block;\n\n    color: black;\n    background-color: #fff;\n    border-width: 0;\n    margin:0;\n}\n.ms2 .ol-zoom.ol-unselectable.ol-control .ol-zoom-in, .ms2 .ol-zoom.ol-unselectable.ol-control .ol-zoom-out {\n    font-family: 'Lucida Console', Monaco, monospace;\n    text-align: center;\n    text-decoration: none;\n    font-weight: bold;\n}\n\n.ms2 .ol-zoom .ol-zoom-out{\n    font-size: 18px;\n    border-radius: 0 0 4px 4px;\n}\n.ms2 .ol-zoom .ol-zoom-in{\n    border-bottom: 1px solid #ccc;\n    border-radius: 4px 4px 0 0;\n    font-size: 20px;\n}\n.ms2 .ol-zoom.ol-unselectable.ol-control{\n    top:10px;\n    left:10px;\n    padding:0;\n    box-shadow: rgba(0, 0, 0, 0.65098) 0px 1px 5px 0px;\n    border-radius: 4px;\n}\n\n.ms2 .ol-scale-line.ol-unselectable{\n    background-color: rgba(255, 255, 255, 0.8);\n}\n",""]);const s=r},660260:(t,e,o)=>{"use strict";o.d(e,{Z:()=>s});var i=o(923645),r=o.n(i)()((function(t){return t[1]}));r.push([t.id,".ms2 .ol-custom-overviewmap,\n       .ms2 .ol-custom-overviewmap.ol-uncollapsible {\n          bottom: 20px;\n          left: auto;\n          right: 10px;\n          top: auto;\n\n      }\n      .ms2 .ol-custom-overviewmap:not(.ol-collapsed)  {\n\n           box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n           border-radius: 1px;\n           transition: all .2s;\n      }\n      .ms2 .ol-custom-overviewmap .ol-overviewmap-map {\n          border: none;\n          width: 300px;\n          height: 150px;\n\n      }\n\n      .ms2 .ol-custom-overviewmap .ol-overviewmap-box {\n          border: 1px solid black;\n          cursor: pointer;\n          border-radius: 5px;\n      }\n\n      .ms2 .ol-custom-overviewmap:not(.ol-collapsed) button{\n          bottom: auto;\n          left: auto;\n          right: 2px;\n          bottom: 2px;\n      }\n\n      .ms2 .ol-rotate {\n          top: 170px;\n          right: 0;\n      }\n      .ms2 .ol-overview-dargbox{\n           border: 1px solid black;\n           background-color: rgba(125,125,0,.5);\n           border-radius: 5px;\n      }\n",""]);const s=r},848709:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>n});var i=o(893379),r=o.n(i),s=o(660260);r()(s.Z,{insert:"head",singleton:!1});const n=s.Z.locals||{}}}]);